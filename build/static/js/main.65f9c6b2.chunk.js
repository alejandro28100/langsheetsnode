(this.webpackJsonplangsheets=this.webpackJsonplangsheets||[]).push([[0],{255:function(e,t,r){"use strict";r.r(t);var a=r(1),n=r.n(a),c=r(38),i=r.n(c),s=r(273),o=Object(s.a)({colors:{brand:{50:"#eaeaff",100:"#c2c2f3",200:"#9b9ae6",300:"#7371da",400:"#4c48cf",500:"#332fb6",600:"#27258e",700:"#1b1a66",800:"#0f1040",900:"#06041a"}}}),l=r(303),d=r(7),j=r(82),b=r(83),u=r.n(b),h=r(25),p=r(2),x=function(e){var t=e.component,r=e.redirectTo,a=(e.isLoading,e.loggedIn,Object(j.a)(e,["component","redirectTo","isLoading","loggedIn"])),n=Object(h.h)(),c=u.a.get("token");return Object(p.jsx)(h.b,Object(d.a)(Object(d.a)({},a),{},{render:function(e){return c?Object(p.jsx)(t,Object(d.a)({},e)):Object(p.jsx)(h.a,{to:r,state:{from:n.pathname}})}}))},O=r(13),f=r.n(O),m=r(27),g=r(3),v=Object(a.createContext)(),y={user:void 0,error:void 0,loading:!0};function w(e,t){switch(t.type){case"logout":return Object(d.a)(Object(d.a)({},e),{},{user:void 0});case"loading":return Object(d.a)(Object(d.a)({},e),{},{loading:!0,error:void 0});case"success":var r=t.payload.user;return Object(d.a)(Object(d.a)({},e),{},{user:r,loading:!1});case"error":var a=t.payload.error;return Object(d.a)(Object(d.a)({},e),{},{user:void 0,loading:!1,error:a})}}var k=function(e){var t=e.children,r=Object(a.useReducer)(w,y),n=Object(g.a)(r,2),c=n[0],i=n[1],s=Object(h.g)();function o(){return(o=Object(m.a)(f.a.mark((function e(t,r){var a,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i({type:"loading"}),e.next=3,fetch("/api/users/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:r})});case 3:return a=e.sent,e.next=6,a.json();case 6:if(n=e.sent,!a.ok){e.next=12;break}return u.a.set("token",n.token),delete n.token,i({type:"success",payload:{user:n}}),e.abrupt("return",n);case 12:return i({type:"error",payload:{error:n}}),e.abrupt("return",void 0);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(){return(l=Object(m.a)(f.a.mark((function e(t,r,a,n){var c,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i({type:"loading"}),e.next=3,fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t,lastName:r,email:a,password:n})});case 3:return c=e.sent,e.next=6,c.json();case 6:if(s=e.sent,!c.ok){e.next=10;break}return i({type:"success",payload:{user:{}}}),e.abrupt("return");case 10:i({type:"error",payload:{error:s}});case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(a.useEffect)((function(){function e(){return(e=Object(m.a)(f.a.mark((function e(){var t,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i({type:"loading"}),u.a.get("token")){e.next=5;break}return i({type:"success",payload:{user:void 0}}),e.abrupt("return");case 5:return e.prev=5,e.next=8,fetch("/api/users/userInfo");case 8:return t=e.sent,e.next=11,t.json();case 11:r=e.sent,i({type:"success",payload:{user:r}}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),i({type:"error",payload:{error:e.t0}});case 18:case"end":return e.stop()}}),e,null,[[5,15]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var j=Object(d.a)({logout:function(){u.a.remove("token"),i({type:"logout"}),s.push("/")},login:function(e,t){return o.apply(this,arguments)},signUp:function(e,t,r,a){return l.apply(this,arguments)}},c);return Object(p.jsx)(v.Provider,{value:j,children:t})};function C(){return Object(a.useContext)(v)}var S=r(71),E=r(19),A=r(301),I=r(302),z=r(257),P=r(179),L=r(308),R=r(310),F=r(287),N=r(276),W=r(288),q=r(304),D=r(274),T=r(277),M=r(175),V=r(307),_=r(279),B=r(280),J=r(66),Z=r(15),H=r(93),K=r(113),G=r(174),Y={es:"Espa\xf1ol",en:"Ingl\xe9s",fr:"Franc\xe9s",ru:"Ruso",de:"Alem\xe1n",ja:"Japon\xe9s",zh:"Chino"};function U(e){var t=e.lang,r=e.title,n=e._id,c=(e.createdAt,e.deleteSheet),i=e.isPublic,s=Object(a.useState)(!1),o=Object(g.a)(s,2),l=o[0],d=o[1],j=function(){return d(!1)},b=Object(a.useRef)();return Object(p.jsxs)(a.Fragment,{children:[Object(p.jsxs)(D.a,{boxShadow:"base",background:"white",height:"40",borderRadius:"xl",width:"full",children:[Object(p.jsxs)(D.a,{padding:"5",flexDirection:"column",children:[Object(p.jsx)(N.a,{title:""===r?"Sin t\xedtulo":r,noOfLines:2,fontFamily:"sans-serif",fontSize:"large",fontWeight:"semibold",children:""===r?"Sin t\xedtulo":r}),Object(p.jsx)(T.a,{}),Y[t]&&Object(p.jsxs)(N.a,{children:[Object(p.jsx)(z.a,{mr:"2",as:G.a}),Y[t]]}),Object(p.jsxs)(N.a,{noOfLines:1,title:"Actividad ".concat(i?"P\xfablica":"Privada"),children:[Object(p.jsx)(z.a,{mr:"2",as:i?H.c:K.b}),"Actividad ",i?"P\xfablica":"Privada"]})]}),Object(p.jsx)(T.a,{}),Object(p.jsx)(D.a,{pr:"5",py:"5",children:Object(p.jsxs)(M.a,{as:D.a,flexDirection:"column",alignItems:"center",justifyContent:"space-evenly",spacing:"0",size:"lg",colorScheme:"brand",variant:"ghost",children:[Object(p.jsx)(V.a,{hasArrow:!0,label:"Comenzar Actividad",children:Object(p.jsx)(_.a,{as:"a",href:"/worksheets/".concat(n,"/practice"),icon:Object(p.jsx)(z.a,{as:Z.g})})}),Object(p.jsx)(V.a,{hasArrow:!0,label:"Editar Actividad",children:Object(p.jsx)(_.a,{as:"a",href:"/worksheets/".concat(n,"/edit"),icon:Object(p.jsx)(z.a,{as:K.a})})}),Object(p.jsx)(V.a,{hasArrow:!0,label:"Eliminar Actividad",children:Object(p.jsx)(_.a,{onClick:function(e){return d(!0)},icon:Object(p.jsx)(z.a,{as:H.a})})})]})})]}),Object(p.jsx)(B.a,{isOpen:l,leastDestructiveRef:b,onClose:j,children:Object(p.jsx)(J.g,{children:Object(p.jsxs)(B.b,{children:[Object(p.jsx)(J.f,{fontSize:"lg",fontWeight:"bold",children:"Eliminar Actividad"}),Object(p.jsx)(J.b,{children:"\xbfEst\xe1s seguro de querer borrar esta actividad? Esta acci\xf3n es irreversible."}),Object(p.jsxs)(J.e,{children:[Object(p.jsx)(P.a,{ref:b,onClick:j,children:"Cancelar"}),Object(p.jsx)(P.a,{colorScheme:"red",onClick:function(e){return c(n)},ml:3,children:"Eliminar"})]})]})})})]})}U.defaultProps={lang:"",isPublic:!0};var X=U,Q=r(74),$=r(37),ee=r.n($),te=function(e){Object(a.useEffect)((function(){document.body.style.background=e}),[e])};te.propTypes={backgroundColor:ee.a.string.isRequired};var re,ae,ne=te,ce=r(283),ie=r(286),se=r(138);function oe(){return(oe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function le(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},c=Object.keys(e);for(a=0;a<c.length;a++)r=c[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)r=c[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function de(e,t){var r=e.title,n=e.titleId,c=le(e,["title","titleId"]);return a.createElement("svg",oe({width:70,height:78,viewBox:"0 0 70 78",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":n},c),r?a.createElement("title",{id:n},r):null,re||(re=a.createElement("g",{clipPath:"url(#clip0)"},a.createElement("path",{d:"M69.7126 21.9061L55.7683 3.7113L29.024 0.0596367C25.5601 -0.413512 22.3645 1.97751 21.8856 5.39973L14.2604 59.911C13.7815 63.3332 16.2016 66.4903 19.6655 66.9635L56.4828 71.9905C59.9467 72.4636 63.1423 70.0726 63.6212 66.6504L69.8733 21.9541L69.7126 21.9061Z",fill:"#605EC5"}),a.createElement("path",{d:"M69.8201 21.991L53.7102 19.7918L55.9559 3.73657L69.8201 21.991Z",fill:"#8987DE"}),a.createElement("path",{d:"M57.2476 29.9889L30.5532 26.3441L30.0225 30.138L56.7169 33.7828L57.2476 29.9889Z",fill:"white"}),a.createElement("path",{d:"M55.9146 39.52L29.2202 35.8752L28.6895 39.6692L55.3839 43.3139L55.9146 39.52Z",fill:"white"}),a.createElement("path",{d:"M27.8744 45.4979L27.4214 48.7365L50.65 51.908L51.103 48.6695L27.8744 45.4979Z",fill:"white"}),a.createElement("path",{d:"M49.6339 26.3764L33.2997 10.2388H6.3008C2.80408 10.2388 -0.0300293 13.0394 -0.0300293 16.4934V71.5224C-0.0300293 74.9771 2.80474 77.777 6.3008 77.777H43.4684C46.9651 77.777 49.7992 74.9764 49.7992 71.5224V26.4016L49.6339 26.3764Z",fill:"#252388"}),a.createElement("path",{d:"M49.752 26.4463H33.4893V10.2388L49.752 26.4463Z",fill:"#4846AE"}),a.createElement("path",{d:"M38.4054 36.0681H11.4578V39.8981H38.4054V36.0681Z",fill:"white"}),a.createElement("path",{d:"M38.4054 45.6899H11.4578V49.5198H38.4054V45.6899Z",fill:"white"}),a.createElement("path",{d:"M34.9068 55.4049H11.4578V58.6742H34.9068V55.4049Z",fill:"white"}))),ae||(ae=a.createElement("defs",null,a.createElement("clipPath",{id:"clip0"},a.createElement("rect",{width:70,height:77.7778,fill:"white"})))))}var je,be,ue,he,pe=a.forwardRef(de);r.p;function xe(){return(xe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function Oe(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},c=Object.keys(e);for(a=0;a<c.length;a++)r=c[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)r=c[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function fe(e,t){var r=e.title,n=e.titleId,c=Oe(e,["title","titleId"]);return a.createElement("svg",xe({id:"Capa_2","data-name":"Capa 2",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 42 16",stroke:"currentColor",fill:"currentColor",ref:t,"aria-labelledby":n},c),r?a.createElement("title",{id:n},r):null,je||(je=a.createElement("path",{d:"M16.14,13.06c-.39,0-.74-.5-1-1.51a19.28,19.28,0,0,1-.42-2c-.43.06-1,.17-1.71.32l-1.69.35c-.22.56-.58,1.38-1.1,2.45a.61.61,0,0,1-.55.36.7.7,0,0,1-.46-.19.61.61,0,0,1-.2-.46A11.73,11.73,0,0,1,10,10a.7.7,0,0,1-.1-.38c0-.35.2-.57.62-.67.49-.91,1.1-2,1.84-3.14,1-1.61,1.64-2.42,1.89-2.42s.56.23.69.7l.4,2.15.95,4.44.36,1a2.39,2.39,0,0,1,.19.69.63.63,0,0,1-.2.46A.64.64,0,0,1,16.14,13.06Zm-2.26-7.3-1.82,3q.76-.21,2.34-.48Z"})),be||(be=a.createElement("path",{className:"cls-1",d:"M23.38,12.61a10.06,10.06,0,0,1-3.67.57.71.71,0,0,1-.52-.26.77.77,0,0,1-.25-.54V10.53q0-.91.12-2.61c.08-1.22.13-2.1.14-2.64s0-1,.07-1.75a.57.57,0,0,1,.21-.43,7,7,0,0,1,2-.26,3.58,3.58,0,0,1,2.16.76A2.65,2.65,0,0,1,24.8,5.78a3.05,3.05,0,0,1-1.27,2.59,4.4,4.4,0,0,1,1.43.9,1.57,1.57,0,0,1,.48,1.09,2,2,0,0,1-.84,1.49A4.11,4.11,0,0,1,23.38,12.61ZM22.17,9.25l-.68-.1H21a4.84,4.84,0,0,1-.74-.05c0,.53,0,1,0,1.43v1.33a8.26,8.26,0,0,0,2.73-.48,2.71,2.71,0,0,0,.86-.53c.26-.22.39-.39.39-.5s-.28-.43-.82-.68A7.17,7.17,0,0,0,22.17,9.25Zm-.72-5.11a7.5,7.5,0,0,0-1,0V5.3l-.13,2.47c.61.05.93.08,1,.07a2.67,2.67,0,0,0,1.58-.6,1.83,1.83,0,0,0,.66-1.46,1.45,1.45,0,0,0-.67-1.12A2.27,2.27,0,0,0,21.45,4.14Z"})),ue||(ue=a.createElement("path",{className:"cls-1",d:"M33,5.7a.67.67,0,0,1-.62-.48,1.11,1.11,0,0,0-.33-.49,1.76,1.76,0,0,0-.66-.07c-.62,0-1.31.47-2.06,1.41a5.9,5.9,0,0,0-1.53,3.61,2,2,0,0,0,.53,1.42,1.68,1.68,0,0,0,1.31.61A2.85,2.85,0,0,0,31,11.37a8.66,8.66,0,0,0,1.14-.75,1.09,1.09,0,0,1,.54-.27.57.57,0,0,1,.46.21.65.65,0,0,1,.19.46.68.68,0,0,1-.24.51A5.19,5.19,0,0,1,29.66,13a2.92,2.92,0,0,1-2.24-1,3.37,3.37,0,0,1-.88-2.33,7.19,7.19,0,0,1,1.81-4.44,4.12,4.12,0,0,1,3.06-1.89,4.86,4.86,0,0,1,.56,0,1.9,1.9,0,0,1,.44.09A.67.67,0,0,1,33,3.14c.29,0,.48.2.56.58A7.52,7.52,0,0,1,33.65,5a.78.78,0,0,1-.14.46A.56.56,0,0,1,33,5.7Z"})),he||(he=a.createElement("path",{d:"M39.8,0H2.2a2,2,0,0,0-2,2V14a2,2,0,0,0,2,2H39.8a2,2,0,0,0,2-2V2A2,2,0,0,0,39.8,0Zm-.65,14.26H2.86A.91.91,0,0,1,2,13.35V2.7a1,1,0,0,1,1-1h36a1,1,0,0,1,1.13,1.07V3a.68.68,0,0,1,0,.12h0v10.2A.9.9,0,0,1,39.15,14.26Z"})))}var me,ge,ve,ye,we,ke=a.forwardRef(fe);r.p;function Ce(){return(Ce=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function Se(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},c=Object.keys(e);for(a=0;a<c.length;a++)r=c[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)r=c[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Ee(e,t){var r=e.title,n=e.titleId,c=Se(e,["title","titleId"]);return a.createElement("svg",Ce({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":n},c),r?a.createElement("title",{id:n},r):null,me||(me=a.createElement("rect",{x:12,y:6,width:4,height:4,rx:.5,fill:"#4846AE"})),ge||(ge=a.createElement("rect",{x:6,y:6,width:4,height:4,rx:.5,fill:"#4846AE"})),ve||(ve=a.createElement("rect",{y:6,width:4,height:4,rx:.5,fill:"#4846AE"})),ye||(ye=a.createElement("path",{d:"M12.5218 11.5161C12.0215 12.0161 11.5219 12.5161 10.9268 12.8914C10.0216 13.5162 8 13.5 6.99997 13.5C5.98032 13.4885 4.99928 13.0089 3.99992 12.5",stroke:"#616161",strokeLinecap:"round",strokeLinejoin:"round"})),we||(we=a.createElement("path",{d:"M4.32786 13.9956C4.10086 13.6319 4.02894 13.2646 3.80915 12.8979C3.72803 12.7626 3.64479 12.6383 3.57362 12.5089C3.41056 12.2124 3.5 12 3.78875 12.0797C3.2496 12.0797 4.5 11.9506 5.07287 11.9506C5.44509 11.9511 6 11.9075 6.13559 11.9075",stroke:"#616161",strokeLinecap:"round",strokeLinejoin:"round"})))}var Ae=a.forwardRef(Ee);r.p;function Ie(e){var t=e.leftActions,r=e.rightActions,n=(e.withIcon,e.sm),c=Object(ce.a)(["(max-width:900px)"]),i=Object(g.a)(c,1)[0],s=C(),o=s.logout,l=s.user,d=s.loading;return Object(p.jsxs)(D.a,{px:"10",background:"white",py:"4",shadow:"sm",alignItems:"center",sx:{"@media print":{display:"none"}},children:[Object(p.jsx)(P.a,{as:"a",href:"/",variant:"unstyled",children:Object(p.jsx)(z.a,{w:10,h:10,as:pe})}),i?Object(p.jsxs)(a.Fragment,{children:[Object(p.jsx)(T.a,{}),Object(p.jsxs)(I.a,{children:[Object(p.jsx)(I.b,{colorScheme:"brand",variant:"ghost",as:P.a,children:Object(p.jsx)(z.a,{as:Q.c})}),Object(p.jsxs)(I.f,{zIndex:"dropdown",children:[!d&&Object(p.jsxs)(a.Fragment,{children:[Object(p.jsx)(N.a,{p:"4",fontSize:"x-large",fontWeight:"medium",children:"".concat(l.name," ").concat(l.lastName)}),Object(p.jsx)(I.e,{onClick:o,icon:Object(p.jsx)(z.a,{as:se.a}),children:"Cerrar Sesi\xf3n"})]}),!!n&&Object(p.jsx)(I.c,{}),n]})]})]}):Object(p.jsxs)(a.Fragment,{children:[t,Object(p.jsx)(T.a,{}),r,l&&Object(p.jsx)(ie.a,{children:Object(p.jsxs)(I.a,{children:[Object(p.jsx)(I.b,{variant:"ghost",colorScheme:"brand",as:_.a,icon:Object(p.jsx)(z.a,{w:8,h:8,as:Z.y})}),Object(p.jsxs)(I.f,{children:[Object(p.jsx)(ie.a,{p:"5",children:Object(p.jsx)(N.a,{fontSize:"x-large",fontWeight:"medium",children:"".concat(l.name," ").concat(l.lastName)})}),Object(p.jsx)(I.e,{onClick:o,icon:Object(p.jsx)(z.a,{as:se.a}),children:"Cerrar Sesi\xf3n"})]})]})})]})]})}Ie.defaultProps={withIcon:!0};var ze=Ie,Pe=function(e){Object(a.useEffect)((function(){document.title=e}),[e])};Pe.propTypes={title:ee.a.string.isRequired};var Le=Pe;function Re(){return document.fullscreen||document.mozFullScreen||document.webkitIsFullScreen||document.msFullscreenElement}function Fe(e){return e.map(Ne)}function Ne(e){var t=Object(d.a)({},e);return t.content=JSON.parse(e.content),t}function We(e){return 0===Object.keys(e).length?"":Object.keys(e).map((function(t){return e[t]?"".concat(t,"=").concat(e[t]):""})).join("&")}var qe={error:void 0,loading:!0,worksheets:void 0};function De(e,t){switch(t.type){case"call-api":return Object(d.a)(Object(d.a)({},e),{},{loading:!0});case"api-call-ended":return Object(d.a)(Object(d.a)({},e),{},{loading:!1});case"update-worksheets":return Object(d.a)(Object(d.a)({},e),{},{loading:!1,worksheets:t.payload.worksheets});case"api-error":return Object(d.a)(Object(d.a)({},e),{},{loading:!1,error:t.payload.error});default:return console.warn("The action type given did not match any posible action",t),e}}var Te=function(){var e=Object(h.g)(),t=Object(A.a)(),r=C().user,n=Object(a.useReducer)(De,qe),c=Object(g.a)(n,2),i=c[0],s=c[1],o=i.error,l=i.loading,j=i.worksheets;function b(){return(b=Object(m.a)(f.a.mark((function t(){var a,n,c;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s({type:"call-api"}),a={title:"Actividad sin t\xedtulo",lang:"es",private:!1,published:!1,content:JSON.stringify([{type:"paragraph",children:[{text:""}]}]),createdAt:new Date,author:{name:r.name,lastName:r.lastName,id:r.id}},t.next=4,fetch("/api/activities",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 4:return n=t.sent,t.next=7,n.json();case 7:if(c=t.sent,s({type:"api-call-ended"}),!n.ok){t.next=12;break}return e.push("/worksheets/".concat(c._id,"/edit")),t.abrupt("return");case 12:s({type:"api-error",payload:{error:c}});case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function u(){return(u=Object(m.a)(f.a.mark((function e(r){var a,n,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s({type:"call-api"}),e.next=3,fetch("/api/activities/".concat(r),{method:"DELETE"});case 3:if(a=e.sent,n=a.json(),!a.ok){e.next=10;break}return c=Object(E.a)(j).filter((function(e){return e._id!==r})),s({type:"update-worksheets",payload:{worksheets:c}}),t({title:"Actividad Eliminada",description:"La actividad fue eliminada exit\xf3samente",status:"info",durarion:5e3,isClosable:!0}),e.abrupt("return");case 10:s({type:"api-error",payload:{error:n}});case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(a.useEffect)((function(){function e(){return(e=Object(m.a)(f.a.mark((function e(){var t,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s({type:"call-api"}),e.next=3,fetch("/api/activities");case 3:return t=e.sent,e.next=6,t.json();case 6:if(r=e.sent,!t.ok){e.next=10;break}return s({type:"update-worksheets",payload:{worksheets:Fe(r)}}),e.abrupt("return");case 10:s({type:"api-error",payload:{error:r}});case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var x={createSheet:function(){return b.apply(this,arguments)},deleteSheet:function(e){return u.apply(this,arguments)}};return ne("var(--chakra-colors-gray-100)"),Le("LangSheets | Mis actividades"),Object(p.jsxs)(a.Fragment,{children:[Object(p.jsx)(ze,{sm:Object(p.jsx)(I.e,{icon:Object(p.jsx)(z.a,{as:Z.t}),href:"/activities",as:"a",children:"B\xfasqueda de Actividades"}),rightActions:Object(p.jsx)(P.a,{leftIcon:Object(p.jsx)(z.a,{as:Z.t}),size:"sm",mr:"4",as:"a",href:"/activities",variant:"outline",colorScheme:"brand",children:"B\xfasqueda De Actividades"})}),l&&Object(p.jsx)(L.a,{size:"xs",isIndeterminate:!0,sx:{"& > div":{background:"var(--chakra-colors-brand-300)"}}}),o&&Object(p.jsxs)(R.a,{status:"error",children:[Object(p.jsx)(R.c,{}),Object(p.jsx)(R.b,{children:o.message})]}),Object(p.jsxs)(F.a,{maxW:"container.lg",children:[Object(p.jsx)(N.a,{fontSize:"xx-large",fontWeight:"semibold",my:"5",textAlign:["center","left"],children:" Mis Actividades "}),Object(p.jsxs)(W.a,{mx:{md:"7",lg:"0"},gap:"5",justifyContent:"center",placeItems:"center",templateColumns:{base:"",md:"repeat(2, var(--chakra-sizes-72))",lg:"repeat(3, var(--chakra-sizes-80))"},children:[!!j&&j.map((function(e){return Object(p.jsx)(q.a,{width:"full",isLoaded:!l,children:Object(p.jsx)(X,Object(d.a)({},Object(d.a)(Object(d.a)({},e),x)))},e._id)})),Object(p.jsx)(D.a,{width:"full",as:P.a,colorScheme:"brand",variant:"ghost",background:"white",onClick:x.createSheet,leftIcon:Object(p.jsx)(z.a,{as:Q.a}),size:"lg",boxShadow:"base",height:"40",borderRadius:"xl",children:"Crear Nueva actividad"})]})]})]})},Me=r(17),Ve=function(e){return Object(p.jsx)(a.Fragment,{children:Object(p.jsxs)(D.a,{flexDirection:"column",alignItems:"center",children:[Object(p.jsx)(ie.a,{px:"4",variant:"unstyled",_focus:{outline:"none"},as:"a",href:"/",children:Object(p.jsx)(pe,{width:"70px"})}),Object(p.jsxs)(D.a,{mt:"40",flexDirection:"column",flexGrow:"1",width:"full",children:[Object(p.jsx)(V.a,{hasArrow:!0,arrowSize:"5",placement:"auto-start",label:"Previsualizar actividad",children:Object(p.jsx)(ie.a,{as:"a",target:"_blank",referrerPolicy:"no-referrer",href:"/worksheets/".concat(e.id,"/practice"),sx:{"&":{transition:"all ease 300ms",color:"white",cursor:"pointer",textAlign:"center",borderRadius:"none"},"&:hover, &:active":{background:"#252388"}},children:Object(p.jsx)(z.b,{m:"4",w:8,h:8,as:Z.g})})}),Object(p.jsx)(V.a,{hasArrow:!0,arrowSize:"5",placement:"auto-start",label:"Imprimir actividad",children:Object(p.jsx)(ie.a,{onClick:e.handlePrint,sx:{"&":{transition:"all ease 300ms",color:"white",cursor:"pointer",textAlign:"center",borderRadius:"none"},"&:hover, &:active":{background:"#252388"}},children:Object(p.jsx)(z.b,{m:"4",w:8,h:8,as:Z.s})})})]})]})})},_e=r(311);var Be=function(e){var t=e.title,r=e.updateWorksheetProp,n=e.dispatch,c=Object(a.useRef)();return Object(p.jsx)(ie.a,{onClick:function(){return c.current.focus()},sx:{"@media print":{textAlign:"center"}},children:Object(p.jsxs)(_e.a,{fontSize:"x-large",required:!0,id:"title",value:t,onBlur:function(){return r({property:"title"})},onChange:function(e){return n({type:"change-worksheet-prop",payload:{property:"title",value:e}})},type:"text",placeholder:"Escribe un t\xedlulo aqu\xed...",children:[Object(p.jsx)(_e.c,{ref:c}),Object(p.jsx)(_e.b,{})]})})},Je=r(259),Ze=r(293),He=r(312),Ke=r(305),Ge=r(295),Ye=function(e){var t=e.decorate,r=e.renderElement,a=e.renderLeaf,n=e.readOnly,c=e.placeholder,i=Object(j.a)(e,["decorate","renderElement","renderLeaf","readOnly","placeholder"]);return Object(p.jsx)(ie.a,Object(d.a)(Object(d.a)({},i),{},{background:"white",p:"5",as:Me.a,decorate:t,renderElement:r,renderLeaf:a,readOnly:n,placeholder:c}))},Ue=r(289),Xe=function(e){var t=e.updateWorksheetProp,r=e.dispatch,a=e.lang;return Object(p.jsxs)(ie.a,{my:"4",children:[Object(p.jsx)(N.a,{my:"2",children:"Idioma"}),Object(p.jsxs)(Ue.a,{background:"white",required:!0,value:a,onBlur:function(){return t({property:"lang"})},onChange:function(e){return r({type:"change-worksheet-prop",payload:{property:"lang",value:e.target.value}})},children:[Object(p.jsx)("option",{value:""}),Object(p.jsx)("option",{value:"de",children:"Alem\xe1n"}),Object(p.jsx)("option",{value:"es",children:"Espa\xf1ol"}),Object(p.jsx)("option",{value:"fr",children:"Franc\xe9s"}),Object(p.jsx)("option",{value:"en",children:"Ingl\xe9s"}),Object(p.jsx)("option",{value:"ru",children:"Ruso"}),Object(p.jsx)("option",{value:"zh",children:"Chino"}),Object(p.jsx)("option",{value:"ja",children:"Japon\xe9s"})]})]})};Xe.defaultProps={lang:""};var Qe=Xe,$e=function(e){var t=e.dispatch,r=e.updateWorksheetProp,a=e.isPrivate;return Object(p.jsx)(ie.a,{my:"4",children:Object(p.jsx)(V.a,{label:"Si la actividad es privada, no ser\xe1 listada en la p\xe1gina global de actividades. S\xf3lo tus alumnos podr\xe1n acceder a ella.",children:Object(p.jsxs)(N.a,{my:"2",children:["Actividad Privada ",Object(p.jsx)(He.a,{colorScheme:"brand",ml:"4",onBlur:function(){return r({property:"private"})},onChange:function(e){return t({type:"change-worksheet-prop",payload:{property:"private",value:!a}})},isChecked:a})," "]})})})};$e.defaultProps={isPrivate:!1};var et=$e,tt=function(){return Object(p.jsxs)(D.a,{as:"a",href:"/",alignItems:"center",children:[Object(p.jsx)(z.a,{w:10,h:10,as:pe}),Object(p.jsx)(N.a,{fontSize:"x-large",fontWeight:"bold",color:"brand.500",children:"Langsheets"})]})},rt=r(84),at=r(4),nt=r(189),ct=function(e){var t=e.normalizeNode;return e.normalizeNode=function(r){var a=Object(g.a)(r,2),n=a[0],c=a[1];!at.a.isBlock(n)||n.alignment?t(r):at.h.setNodes(e,{textAlign:"left"},{at:c})},e},it=function(e){var t=e.normalizeNode;return e.normalizeNode=function(r){var a=Object(g.a)(r,2),n=a[0],c=a[1];if("exercise-block"===n.type){if(!at.c.has(e,at.e.next(c)))return at.h.insertNodes(e,{type:"paragraph",children:[{text:""}]},{at:at.e.next(c)});if(!at.c.has(e,at.e.previous(c)))return console.log("Paragraph inserted"),at.h.insertNodes(e,{type:"paragraph",children:[{text:""}]},{at:at.e.previous(c)})}t(r)},e},st=r(12),ot=function(e){var t=e.normalizeNode;return e.normalizeNode=function(r){var a=Object(g.a)(r,2),n=a[0],c=a[1];if(at.a.isBlock(e,n)&&["paragraph","paragraph-with-missing-word"].includes(n.type)){var i,s=!1,o=Object(st.a)(at.c.descendants(n));try{for(o.s();!(i=o.n()).done;){Object(g.a)(i.value,1)[0].missingWord&&(s=!0)}}catch(x){o.e(x)}finally{o.f()}if(s){if("paragraph-with-missing-word"!==n.type)return at.h.setNodes(e,{type:"paragraph-with-missing-word"},{at:c})}else if("paragraph-with-missing-word"===n.type)return at.h.setNodes(e,{type:"paragraph"},{at:c})}if(at.c.isNode(n)&&at.b.isElement(n)){var l,d=at.c.first(e,c)[1],j=at.c.last(e,c)[1],b=Object(st.a)(at.c.children(e,c));try{for(b.s();!(l=b.n()).done;){var u=Object(g.a)(l.value,2),h=u[0],p=u[1];if(!0===h.missingWord){if(at.e.equals(p,j))return at.h.insertNodes(e,{text:" "},{at:at.e.next(p),select:!0,hanging:!0});if(at.e.equals(p,d))return at.h.insertNodes(e,{text:" "},{at:p,select:!0,hanging:!0});if(at.c.has(e,at.e.next(p)))if(" "!==at.c.get(e,at.e.next(p)).text[0])return at.h.insertText(e," ",{at:{path:at.e.next(p),offset:0}})}}}catch(x){b.e(x)}finally{b.f()}}t(r)},e},lt=function(e){var t=e.normalizeNode;return e.normalizeNode=function(r){var a,n=Object(g.a)(r,2),c=n[0],i=n[1],s=!1,o=Object(st.a)(at.c.ancestors(e,i));try{for(o.s();!(a=o.n()).done;){"exercise-block"===Object(g.a)(a.value,1)[0].type&&(s=!0)}}catch(d){o.e(d)}finally{o.f()}if(at.a.isBlock(e,c)&&["paragraph","word-order-exercise-paragraph"].includes(c.type)&&s){var l=!1;if(at.c.string(c).split("/").length>1&&(l=!0),l){if("word-order-exercise-paragraph"!==c.type)return at.h.setNodes(e,{type:"word-order-exercise-paragraph"},{at:i})}else if("word-order-exercise-paragraph"===c.type)return at.h.setNodes(e,{type:"paragraph"},{at:i})}t(r)},e};var dt=function(e){return Object(a.useMemo)((function(){return(null===e||void 0===e?void 0:e.plugins)?Object(Me.h)(Object(at.i)()):ct(lt(it(ot(Object(nt.a)(Object(Me.h)(Object(at.i)()))))))}),[])},jt=r(184),bt=Object(jt.io)({autoConnect:!1}),ut=Object(a.createContext)(bt),ht=r(190);function pt(e){if(!e.length||!e)throw new Error("Expected an array wit items and got",JSON.stringify(e));for(var t,r,a=Object(E.a)(e),n=a.length;0!==n;)r=Math.floor(Math.random()*n),t=a[n-=1],a[n]=a[r],a[r]=t;return e[0]===a[0]?pt(a):a}function xt(e,t){if(!e||!t)throw new Error("Slate editor and path are required");var r,a,n,c=Object(st.a)(at.c.ancestors(e,t));try{for(c.s();!(n=c.n()).done;){var i=Object(g.a)(n.value,1)[0];"exercise-block"===i.type&&(r=i.showAnswers,a=i.checkExercise)}}catch(s){c.e(s)}finally{c.f()}return{showAnswers:r,checkExercise:a}}function Ot(e,t){if("string"!==typeof e)throw new Error("Expected a string but got: ".concat(typeof e," ").concat(JSON.stringify(e)));var r=e.split("/").map((function(e){return{word:e,id:Object(ht.a)(),isCorrect:!1}}));return t.shuffle?pt(r):r}var ft=r(291),mt=r(292),gt=function(e){return Object(p.jsxs)(N.a,{as:"span",id:"wave",position:"relative",children:[Object(p.jsx)(N.a,{as:"span",className:"dot"}),Object(p.jsx)(N.a,{as:"span",className:"dot"}),Object(p.jsx)(N.a,{as:"span",className:"dot"})]})},vt=function(e){return Object(p.jsxs)(N.a,{as:"span",children:[e.message," ",Object(p.jsx)(gt,{})]})},yt=r(290),wt=function(e){var t=e.show,r=e.type;return t?"correct"===r?Object(p.jsx)(yt.a,{as:"span",children:Object(p.jsx)(z.a,{as:Z.h,color:"green.400"})}):Object(p.jsx)(yt.a,{as:"span",children:Object(p.jsx)(z.a,{as:Z.v,color:"red.400"})}):null};function kt(e,t){return e.toLowerCase().trim()===t.toLowerCase().trim()}var Ct=function(e){var t=Object(a.useContext)(ut),r=e.leaf,n=r.text,c=r.userAnswer,i=void 0===c?"":c,s=r.isCorrect,o=void 0!==s&&s,l=r.focused,d=void 0===l?void 0:l,j=Object(Me.g)(),b=Me.b.findPath(j,e.text),u=xt(j,b),h=u.showAnswers,x=u.checkExercise,O=h?n:i;function f(e){if(d)return e.preventDefault(),void e.target.blur();at.h.setNodes(j,{focused:{username:t.auth.username,userID:t.id}},{at:b})}function m(e){var t=e.target.value;at.h.setNodes(j,{isAnswered:t.trim().length>0,isCorrect:kt(t,n),userAnswer:t},{at:b})}return Object(p.jsxs)(ft.a,{w:"32",as:"span",display:"inline-block",position:"relative",children:[d&&t.id!==d.userID?Object(p.jsxs)(a.Fragment,{children:[Object(p.jsx)(N.a,{as:"span",w:"3",h:"3",bg:"brand.500",position:"absolute",transform:"translateY(-50%) translateX(50%)",animation:"pulse 2s infinite",boxShadow:"0 0 0 #3c37cfb7",right:"0",borderRadius:"50%",zIndex:"overlay"}),Object(p.jsx)(V.a,{label:Object(p.jsx)(vt,{message:"".concat(d.username," esta escribiendo")}),children:Object(p.jsx)(mt.a,{cursor:"not-allowed",variant:"filled",transition:"all ease 300ms",readOnly:x,value:O,onFocus:f,onChange:m})})]}):Object(p.jsx)(mt.a,{variant:"filled",readOnly:x,value:O,onFocus:f,onBlur:function(){d&&at.h.setNodes(j,{focused:void 0},{at:b})},onChange:m}),Object(p.jsx)(wt,{type:o?"correct":"wrong",show:!h&&x})]})},St=function(e){var t=Object(ce.a)(["print"]),r=Object(g.a)(t,1)[0],a=r?e.leaf.text+e.leaf.text:e.children;return Object(p.jsx)(ie.a,Object(d.a)(Object(d.a)({as:"span",color:r?"transparent":"",borderRadius:"sm",px:"1",background:"brand.200"},e.attributes),{},{sx:{"@media print":{background:"none",borderBottom:"solid black 1px",color:"transparent"}},children:a}))},Et=function(e){var t=e.leaf,r=e.children,a=e.attributes,n=Object(Me.e)();return!0===t.missingWord?n?Object(p.jsx)(Ct,Object(d.a)({},e)):Object(p.jsx)(St,Object(d.a)({},e)):(t.division&&(r=Object(p.jsx)(N.a,{as:"span",fontWeight:"black",color:"brand.500",children:r})),t.bold&&(r=Object(p.jsx)("strong",{children:r})),t.italic&&(r=Object(p.jsx)("em",{children:r})),t.underline&&(r=Object(p.jsx)("u",{children:r})),t.strike&&(r=Object(p.jsx)("s",{children:r})),Object(p.jsx)("span",Object(d.a)(Object(d.a)({},a),{},{children:r})))},At=function(e){var t=e.children,r=e.element,a=e.attributes,n=r.textAlign;return Object(p.jsx)(N.a,Object(d.a)(Object(d.a)({textAlign:n},a),{},{children:t}))},It=function(e){var t=e.attributes,r=e.children;return Object(p.jsx)("div",Object(d.a)(Object(d.a)({},t),{},{children:r}))},zt=r(119),Pt=function(e){var t=Object(a.useContext)(ut),r=Object(Me.g)(),n=e.element,c=n.focused,i=void 0===c?void 0:c,s=Me.b.findPath(r,n),o=xt(r,s),l=o.showAnswers,j=o.checkExercise,b=at.c.string(n),u=Object(a.useRef)(Ot(b,{shuffle:!0})),h=n.userAnswers,x=void 0===h?u.current:h,O=Ot(b,{shuffle:!1});return l?Object(p.jsx)(D.a,{flexWrap:"wrap",alignItems:"center",my:"4",p:"4",borderRadius:"base",border:"2px var(--chakra-colors-brand-600) solid",children:O.map((function(e){return Object(p.jsx)(Lt,Object(d.a)({},Object(d.a)(Object(d.a)({},e),{},{isCorrect:!0})),e.id)}))}):Object(p.jsx)(zt.a,{onDragEnd:function(e){if(i&&at.h.setNodes(r,{focused:void 0},{at:s}),e.destination){var t=function(e,t,r){var a=Array.from(e),n=a.splice(t,1),c=Object(g.a)(n,1)[0];return a.splice(r,0,c),a}(x,e.source.index,e.destination.index);at.h.setNodes(r,{userAnswers:qt(t,O)},{at:s})}},children:Object(p.jsx)(zt.c,{droppableId:"droppable",direction:"horizontal",children:function(e,a){return a.isDraggingOver&&!i&&at.h.setNodes(r,{focused:{username:t.auth.username,userID:t.id}},{at:s}),i&&i.userID!==t.id?Object(p.jsx)(V.a,{label:Object(p.jsx)(vt,{message:"".concat(i.username," esta contestando este ejercicio")}),children:Object(p.jsxs)(D.a,Object(d.a)(Object(d.a)({position:"relative",flexWrap:"wrap",alignItems:"center",p:"4",my:"4",borderRadius:"base",border:"2px var(--chakra-colors-brand-600) solid",ref:e.innerRef},e.droppableProps),{},{className:"".concat(a.isDraggingOver&&"draggingOver"),children:[Object(p.jsx)(N.a,{as:"span",w:"3",h:"3",bg:"brand.500",position:"absolute",transform:"translateY(-50%) translateX(50%)",animation:"pulse 2s infinite",boxShadow:"0 0 0 #3c37cfb7",top:"0",right:"0",borderRadius:"50%",zIndex:"overlay"}),x.map((function(e,t){return Object(p.jsx)(Rt,Object(d.a)({},Object(d.a)(Object(d.a)({},e),{},{index:t,focused:i,checkExercise:j})),e.id)})),e.placeholder]}))}):Object(p.jsxs)(D.a,Object(d.a)(Object(d.a)({position:"relative",flexWrap:"wrap",alignItems:"center",my:"4",p:"4",borderRadius:"base",border:"2px var(--chakra-colors-brand-600) solid",ref:e.innerRef},e.droppableProps),{},{className:"".concat(a.isDraggingOver&&"draggingOver"),children:[x.map((function(e,t){return Object(p.jsx)(Rt,Object(d.a)({},Object(d.a)(Object(d.a)({},e),{},{index:t,checkExercise:j})),e.id)})),e.placeholder]}))}})})},Lt=function(e){return Object(p.jsx)(N.a,{m:"1",px:"2",py:"1",bg:e.isCorrect?e.isCorrect?"green.500":"yellow.300":"transparent",color:e.isCorrect?"white":"black",borderRadius:"base",as:"span",fontWeight:"medium",transition:"all ease 300",cursor:"default",children:e.word})},Rt=function(e){var t=e.id,r=e.word,a=e.index,n=e.checkExercise,c=e.focused,i=e.isCorrect;function s(e){return e.isDragging?"brand.300":n?i?"green.300":"yellow.300":"brand.500"}return Object(p.jsx)(zt.b,{isDragDisabled:!!c,draggableId:t,index:a,children:function(e,t){return Object(p.jsx)(N.a,Object(d.a)(Object(d.a)(Object(d.a)({userSelect:"none",m:"1",px:"2",py:"1",borderRadius:"base",as:"span",cursor:c?"not-allowed":"move",fontWeight:"medium",color:n&&!i?"black":"white",transition:"all ease 300",bg:s(t),style:e.draggableProps.style,ref:e.innerRef},e.draggableProps),e.dragHandleProps),{},{children:r}))}},t)},Ft=function(e){var t=Object(ce.a)(["print"]),r=Object(g.a)(t,1)[0],a=e.attributes,n=e.children;return r?Object(p.jsx)(Nt,Object(d.a)({},e)):Object(p.jsx)("div",Object(d.a)(Object(d.a)({},a),{},{children:n}))},Nt=function(e){var t,r=e.element,a=[],n=Object(st.a)(at.c.texts(r));try{for(n.s();!(t=n.n()).done;){var c=Ot(Object(g.a)(t.value,1)[0].text,{shuffle:!0});a.push(c)}}catch(i){n.e(i)}finally{n.f()}return Object(p.jsx)(ie.a,{children:a.map((function(e,t){return Object(p.jsx)(Wt,{words:e},t)}))})},Wt=function(e){var t=e.words;return Object(p.jsx)(ie.a,{pb:"8",borderBottom:"solid thin",my:"5",children:t.map((function(e,r){var n=e.word,c=e.id,i=r===t.length-1;return Object(p.jsxs)(a.Fragment,{children:[Object(p.jsx)(Lt,{word:n})," ",!i&&" / "]},c)}))})};function qt(e,t){return e.map((function(e,r){return Object(d.a)(Object(d.a)({},e),{},{isCorrect:e.word===t[r].word})}))}var Dt=function(e){return Object(Me.e)()?Object(p.jsx)(Pt,Object(d.a)({},e)):Object(p.jsx)(Ft,Object(d.a)({},e))};var Tt=function(e){var t=e.element,r=e.children,a=e.attributes,n=t.textAlign,c=t.type.split(" ")[1];return Object(p.jsx)(N.a,Object(d.a)(Object(d.a)({textAlign:n,fontSize:c},a),{},{children:r}))},Mt=r(294),Vt=r(11);function _t(e,t,r){if(!r)return!1;var a=at.a.nodes(r,{match:function(r){return r[e]===t}});return!!Object(g.a)(a,1)[0]}function Bt(e,t){if(!t)return!1;var r=at.a.marks(t);return!!r&&!0===r[e]}function Jt(e,t){if(t)return Bt(e,t)?at.a.removeMark(t,e):at.a.addMark(t,e,!0)}var Zt=function(e){var t=e.format,r=e.label,a=e.type,n=e.customOnClick,c=e.variant,i=e.icon,s=e.formatKey,o=Object(j.a)(e,["format","label","type","customOnClick","variant","icon","formatKey"]),l=Object(Me.g)();function b(){return"function"===typeof n?n.call():"mark"===a?Jt(t,l):function(e,t,r){var a=_t(e,t,r);at.h.setNodes(r,Object(Vt.a)({},e,a?null:t),{match:function(e){return at.a.isBlock(r,e)}})}(s,t,l)}function u(){return"mark"===a?Bt(t,l):_t(s,t,l)}return"button"===c?Object(p.jsx)(V.a,{hasArrow:!0,label:r,fontSize:"md",children:Object(p.jsx)(P.a,Object(d.a)(Object(d.a)({size:"sm"},o),{},{color:u()?"brand.500":"#616161",background:u()?"brand.100":"",variant:"ghost",onClick:b,children:i}))}):Object(p.jsx)(I.e,{color:u()?"brand.500":"",background:u()?"brand.100":"",onClick:b,icon:i,children:r})};Zt.defaultProps={customOnClick:void 0,variant:"button",formatKey:"type"};var Ht=Zt,Kt=function(e){var t=Object(Me.g)(),r=Object(ce.a)(["print"]),a=Object(g.a)(r,1)[0],n=Me.b.findPath(t,e.element);return Object(p.jsxs)(M.a,{display:a?"none":"flex",flexWrap:"wrap",spacing:["0","4"],justifyContent:"center",colorScheme:"brand",size:"sm",children:[Object(p.jsx)(P.a,{my:"2",variant:"solid",onClick:function(){at.h.setNodes(t,{checkExercise:!0},{at:n})},children:"Calificar respuestas"}),Object(p.jsx)(P.a,{my:"2",variant:"outline",onClick:function(){at.h.setNodes(t,{showAnswers:!0},{at:n})},children:"Ver respuestas"})]})},Gt=function(e){return Object(p.jsx)(a.Fragment,{children:Object(p.jsx)(Kt,Object(d.a)({},e))})},Yt=r(185),Ut={"missing-word":"Palabras faltantes","word-order":"Ordenar oraciones"},Xt={"missing-word":Object(p.jsxs)(a.Fragment,{children:[Object(p.jsx)(N.a,{my:"2",children:"Cada oraci\xf3n puede contener una o m\xfaltiple palabras faltantes."}),Object(p.jsxs)(N.a,{my:"2",children:["Para a\xf1adir una palabra faltante seleccione la palabra(s) y presione el boton de a\xf1adir palabra faltante. ",Object(p.jsx)(z.a,{color:"brand.500",w:"2.5em",as:ke})]}),Object(p.jsx)(N.a,{my:"2",children:"Cada palabra faltante lucir\xe1 con un fondo de color p\xfarpura."}),Object(p.jsx)(N.a,{my:"2",color:"brand.500",fontWeight:"semibold",children:"Ejemplo:"}),Object(p.jsx)(N.a,{my:"2",children:Object(p.jsx)("em",{children:"Escribiendo la siguiente oraci\xf3n"})}),Object(p.jsxs)(N.a,{my:"2",as:"samp",children:["Si quieres cambiar el ",Object(p.jsx)(N.a,{px:"2",as:"span",bg:"brand.200",borderRadius:"base",children:"mundo"}),", c\xe1mbiate a ti mismo."]}),Object(p.jsx)(N.a,{my:"2",children:Object(p.jsx)("em",{children:"Se creara el siguiente ejercicio :"})}),Object(p.jsxs)(D.a,{alignItems:"center",flexWrap:"wrap",children:["Si quieres cambiar el ",Object(p.jsx)(mt.a,{w:"24",bg:"gray.100"}),", c\xe1mbiate a ti mismo."]})]}),"word-order":Object(p.jsxs)(a.Fragment,{children:[Object(p.jsxs)(N.a,{my:"2",children:["Cada oraci\xf3n tiene que ser dividida usando diagonales ",Object(p.jsx)(N.a,{as:"kbd",bg:"brand.100",children:"/"})]}),Object(p.jsx)(N.a,{my:"2",color:"brand.500",fontWeight:"semibold",children:"Ejemplo:"}),Object(p.jsx)(N.a,{my:"2",children:Object(p.jsx)("em",{children:"Escribiendo la siguiente oraci\xf3n"})}),Object(p.jsxs)(N.a,{my:"2",as:"samp",children:["Si quieres ",Object(p.jsx)(N.a,{as:"span",color:"brand.500",fontSize:"x-large",children:"/"})," cambiar ",Object(p.jsx)(N.a,{as:"span",color:"brand.500",fontSize:"x-large",children:"/"}),"el mundo, c\xe1mbiate",Object(p.jsx)(N.a,{as:"span",color:"brand.500",fontSize:"x-large",children:"/"})," a ti mismo."]}),Object(p.jsx)(N.a,{my:"2",children:Object(p.jsx)("em",{children:"Se creara el siguiente ejercicio :"})}),Object(p.jsx)(D.a,{flexWrap:"wrap",children:pt(["Si quieres","cambiar","el mundo, c\xe1mbiate","a ti mismo."]).map((function(e,t){return Object(p.jsx)(N.a,{as:"span",borderRadius:"base",m:"1",px:"1",py:"2",color:"white",bg:"brand.500",children:e},"".concat(e,"-").concat(t))}))})]})};var Qt=function(e){var t=Object(Me.g)();switch(e.exerciseType){case"missing-word":return Object(p.jsxs)(ie.a,{w:"full",children:[Object(p.jsx)(Ht,{m:"2",colorScheme:"brand",type:"mark",customOnClick:function(){return function(e,t){at.f.isCollapsed(e.selection)?alert("Para crear una palabra faltante , seleciona primero la palabra"):Jt("missingWord",e)}(t)},format:"missingWord",label:"A\xf1adir Palabra faltante",icon:Object(p.jsx)(z.a,{width:"2.5em",as:ke})}),Object(p.jsx)(Ze.a,{borderBottomWidth:"2px",opacity:"1"})]});case"word-order":default:return null}},$t=function(e){var t=Object(Me.g)(),r=Object(Me.e)(),n=Object(Me.d)(),c=Object(Me.f)();function i(){if(n&&c){if(t.selection){if(at.f.isExpanded(t.selection)){var e=at.a.fragment(t,t.selection);return"missing-word"===Object(g.a)(e,1)[0].exerciseType}return!0}return!0}return!1}return r?Object(p.jsxs)(a.Fragment,{children:[Object(p.jsx)(ie.a,Object(d.a)(Object(d.a)({},e.attributes),{},{borderBottomRadius:"base",py:"4",children:e.children})),Object(p.jsx)(Gt,Object(d.a)({},e))]}):Object(p.jsxs)(ie.a,Object(d.a)(Object(d.a)({borderRadius:"5px",border:"".concat(i()?"var(--chakra-colors-brand-100)":"transparent"," 1px solid")},e.attributes),{},{transition:"all ease 300ms",position:"relative",children:[Object(p.jsxs)(Mt.a,{in:i(),animateOpacity:!0,contentEditable:!1,children:[!r&&Object(p.jsxs)(ie.a,{borderTopRadius:"base",w:["full","full","auto"],bg:"brand.400",px:"4",py:"2",color:"white",children:["Actividad: ",Object(p.jsxs)("b",{children:[" ",Ut[e.element.exerciseType]," "]}),!!Xt[e.element.exerciseType]&&Object(p.jsxs)(Ke.a,{children:[Object(p.jsx)(Ke.f,{children:Object(p.jsx)(_.a,{variant:"ghost",colorScheme:"white",icon:Object(p.jsx)(z.a,{as:Yt.a})})}),Object(p.jsxs)(Ke.d,{children:[Object(p.jsx)(Ke.c,{}),Object(p.jsx)(Ke.e,{color:"black",children:"Ayuda"}),Object(p.jsx)(Ke.b,{color:"black",children:Xt[e.element.exerciseType]})]})]})]}),Object(p.jsx)(Qt,{isActive:i(),exerciseType:e.element.exerciseType})]}),Object(p.jsx)(ie.a,{borderBottomRadius:"base",py:"4",px:i()&&"2",children:e.children})]}))},er=function(e){return Object(p.jsx)(ie.a,Object(d.a)(Object(d.a)({},e.attributes),{},{children:e.children}))},tr=function(){return[Object(a.useCallback)((function(e){return Object(p.jsx)(Et,Object(d.a)({},e))}),[]),Object(a.useCallback)((function(e){var t=e.element.type;if("heading"===(null===t||void 0===t?void 0:t.split(" ")[0]))return Object(p.jsx)(Tt,Object(d.a)({},e));switch(t){case"exercise-block":return Object(p.jsx)($t,Object(d.a)({},e));case"exercise-list-items":return Object(p.jsx)(er,Object(d.a)({},e));case"missing-word-exercise-paragraph":return Object(p.jsx)(It,Object(d.a)({},e));case"word-order-exercise-paragraph":return Object(p.jsx)(Dt,Object(d.a)({},e));default:return Object(p.jsx)(At,Object(d.a)({},e))}}),[])]};function rr(){var e=Re(),t=Object(a.useState)(e),r=Object(g.a)(t,2),n=r[0],c=r[1];function i(){c(Re())}return Object(a.useEffect)((function(){return document.addEventListener("fullscreenchange",i),function(){document.removeEventListener("fullscreenchange",i)}}),[]),n}function ar(e,t){var r={type:"exercise-block",exerciseType:t.type,children:[{type:"paragraph",children:[{text:""}]}]};if(e.selection){var a=at.c.fragment(e,e.selection);if("exercise-block"===Object(g.a)(a,1)[0].type)return void alert("No es posible crear un ejercicio dentro de otro ejercicio, selecciona una linea de texto vac\xeda fuera del cuadro de ejercicio")}at.h.insertNodes(e,r,{select:!0}),Me.b.focus(e)}function nr(e){document.body.style.zoom="100%",e.target.blur(),setTimeout((function(){window.print()}),500)}function cr(){if(!Re()){var e=document.documentElement;e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()}}function ir(){Re()&&(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen())}var sr=function(e){var t=e.handlePublishActivity,r=e.worksheet,n=Object(Me.g)(),c=rr();return Object(p.jsxs)(a.Fragment,{children:[Object(p.jsxs)(I.a,{children:[Object(p.jsx)(I.b,{children:"Actividad"}),Object(p.jsxs)(I.f,{children:[Object(p.jsx)(I.e,{onClick:t,icon:Object(p.jsx)(z.b,{as:Z.n}),children:(null===r||void 0===r?void 0:r.published)?"Anular Publicaci\xf3n":"Publicar Actividad"}),Object(p.jsx)(I.e,{icon:Object(p.jsx)(z.b,{as:Z.s}),onClick:nr,children:"Imprimir Actividad"})]})]}),Object(p.jsxs)(I.a,{children:[Object(p.jsx)(I.b,{mx:"4",children:"Insertar"}),Object(p.jsx)(I.f,{children:Object(p.jsxs)(I.d,{title:"Ejercicios",children:[Object(p.jsx)(I.e,{icon:Object(p.jsx)(z.b,{w:8,h:8,as:ke}),onClick:function(e){return ar(n,{type:"missing-word"})},children:"Palabras Faltantes"}),Object(p.jsx)(I.e,{icon:Object(p.jsx)(z.b,{w:8,h:8,as:Ae}),onClick:function(e){return ar(n,{type:"word-order"})},children:"Ordenar Oraciones"})]})})]}),Object(p.jsxs)(I.a,{children:[Object(p.jsx)(I.b,{mx:"4",children:"Ver"}),Object(p.jsx)(I.f,{children:c?Object(p.jsx)(I.e,{icon:Object(p.jsx)(z.b,{as:rt.b}),onClick:ir,children:"Vista normal"}):Object(p.jsx)(I.e,{icon:Object(p.jsx)(z.b,{as:rt.a}),onClick:cr,children:"Pantalla completa"})})]})]})},or=function(){var e=Object(Me.g)(),t=Object(ce.a)("(min-width: 1024px)"),r=Object(g.a)(t,1)[0];return Object(p.jsxs)(a.Fragment,{children:[Object(p.jsxs)(I.a,{children:[Object(p.jsxs)(I.b,Object(d.a)(Object(d.a)({},r?"":Object(d.a)({},{borderRadius:"none",height:"full"})),{},{flex:"0 0 auto",display:"flex",as:P.a,size:"sm",colorScheme:"brand",variant:"solid",children:[Object(p.jsx)(z.b,{w:5,h:5,mr:"2",as:Q.d})," Insertar Ejercicio"]})),Object(p.jsxs)(I.f,{children:[Object(p.jsx)(I.e,{icon:Object(p.jsx)(z.b,{w:5,h:5,as:ke}),onClick:function(t){return ar(e,{type:"missing-word"})},children:"Palabras faltantes"}),Object(p.jsx)(I.e,{icon:Object(p.jsx)(z.b,{w:5,h:5,as:Ae}),onClick:function(t){return ar(e,{type:"word-order"})},children:"Ordernar oraciones"})]})]}),Object(p.jsxs)(I.a,{children:[Object(p.jsx)(V.a,{hasArrow:!0,label:"Estilos de tipograf\xeda",fontSize:"md",children:Object(p.jsx)(I.b,{as:P.a,"aria-label":"Estilos de tipograf\xeda",variant:"ghost",color:"#616161",size:"sm",children:Object(p.jsx)(z.b,{as:Z.o})})}),Object(p.jsxs)(I.f,{children:[Object(p.jsx)(Ht,{variant:"menuListItem",type:"block",format:"heading 4xl",label:Object(p.jsx)(N.a,{fontSize:"3xl",children:"T\xedtulo 1"})}),Object(p.jsx)(Ht,{variant:"menuListItem",type:"block",format:"heading 3xl",label:Object(p.jsx)(N.a,{fontSize:"2xl",children:"T\xedtulo 2"})}),Object(p.jsx)(Ht,{variant:"menuListItem",type:"block",format:"heading 2xl",label:Object(p.jsx)(N.a,{fontSize:"xl",children:"Subt\xedtulo 1"})}),Object(p.jsx)(Ht,{variant:"menuListItem",type:"block",format:"heading xl",label:Object(p.jsx)(N.a,{fontSize:"lg",children:"Subt\xedtulo 2"})}),Object(p.jsx)(Ht,{variant:"menuListItem",type:"block",format:"",label:Object(p.jsx)(N.a,{fontSize:"md",children:"Texto normal"})})]})]}),Object(p.jsx)(Ht,{type:"mark",format:"bold",label:"Negrita",icon:Object(p.jsx)(z.b,{as:Z.f})}),Object(p.jsx)(Ht,{type:"mark",format:"italic",label:"Cursiva",icon:Object(p.jsx)(z.b,{as:Z.q})}),Object(p.jsx)(Ht,{type:"mark",format:"underline",label:"Subrayado",icon:Object(p.jsx)(z.b,{as:Z.w})}),Object(p.jsx)(Ht,{type:"mark",format:"strike",label:"Tachado",icon:Object(p.jsx)(z.b,{as:Z.u})}),Object(p.jsx)(Ht,{type:"block",formatKey:"textAlign",format:"left",label:"Alinear a la izquierda",icon:Object(p.jsx)(z.b,{as:Z.c})}),Object(p.jsx)(Ht,{type:"block",formatKey:"textAlign",format:"center",label:"Alinear al centro",icon:Object(p.jsx)(z.b,{as:Z.a})}),Object(p.jsx)(Ht,{type:"block",formatKey:"textAlign",format:"right",label:"Alinear a la derecha",icon:Object(p.jsx)(z.b,{as:Z.d})}),Object(p.jsx)(Ht,{type:"block",formatKey:"textAlign",format:"justify",label:"Justificar",icon:Object(p.jsx)(z.b,{as:Z.b})})]})},lr="saving-worksheet",dr="saving-worksheet-success",jr="toggle-writting-mode",br="change-worksheet-prop",ur="set-worksheet",hr="error";function pr(e,t){switch(t.type){case jr:return Object(d.a)(Object(d.a)({},e),{},{isWritingMode:!e.isWritingMode});case br:if(!t.payload.property)throw new Error("'property' is required but got undefined");if("content"===t.payload.property&&!e.isWritingMode)return console.log("Cannot update activity state in preview mode"),e;var r=Object(d.a)({},e.worksheet);return r[t.payload.property]=t.payload.value,Object(d.a)(Object(d.a)({},e),{},{worksheet:r});case lr:return Object(d.a)(Object(d.a)({},e),{},{savingWorksheet:!0});case dr:return Object(d.a)(Object(d.a)({},e),{},{savingWorksheet:!1});case ur:return Object(d.a)(Object(d.a)({},e),{},{savingWorksheet:!1,loading:!1,worksheet:t.payload.worksheet,error:void 0});case hr:return Object(d.a)(Object(d.a)({},e),{},{loading:!1,error:t.payload.error});default:return console.warn("Action provided did not matched",t),e}}var xr={isWritingMode:!0,loading:!0,error:"",worksheet:void 0,savingWorksheet:!1};function Or(){if(!Re()){var e=document.documentElement;e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()}}function fr(){Re()&&(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen())}var mr=function(){var e,t,r=Object(h.g)(),n=Object(A.a)(),c=Object(h.i)().id,i=dt(),s=tr(),o=Object(g.a)(s,2),l=o[0],d=o[1],j=function(e){return Object(a.useCallback)((function(t){var r=Object(g.a)(t,2),a=r[0],n=r[1],c=[];if(at.g.isText(a)&&"word-order-exercise-paragraph"===at.c.parent(e,n).type){var i=a.text.split("/"),s=0;i.forEach((function(e,t){0!==t&&c.push({anchor:{path:n,offset:s-1},focus:{path:n,offset:s},division:!0}),s=s+e.length+1}))}return c}),[e])}(i),b=Object(a.useReducer)(pr,xr),u=Object(g.a)(b,2),x=u[0],O=u[1],v=x.worksheet,y=x.loading,w=x.error,k=x.isWritingMode,C=x.savingWorksheet,S=rr();function E(){return R.apply(this,arguments)}function R(){return(R=Object(m.a)(f.a.mark((function e(){var t,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O({type:lr}),e.prev=1,e.next=4,fetch("/api/activities/".concat(c),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({property:"published",value:!x.worksheet.published})});case 4:return t=e.sent,e.next=7,t.json();case 7:r=e.sent,O({type:dr}),O({type:br,payload:{property:"published",value:r.published}}),n({position:G?"top-right":"bottom",title:r.published?"La actividad fue publicada exit\xf3samente":"La publicaci\xf3n de la actividad fue anulada exit\xf3samente",status:"success",duration:5e3,isClosable:!0}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),n({position:G?"top-right":"bottom",title:"Error al guardar los cambios",status:"error",duration:5e3,isClosable:!0});case 16:case"end":return e.stop()}}),e,null,[[1,13]])})))).apply(this,arguments)}function F(e){return T.apply(this,arguments)}function T(){return(T=Object(m.a)(f.a.mark((function e(t){var r,a,i,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.property,O({type:lr}),a={property:r,value:x.worksheet[r],author:x.worksheet.author},"content"===r&&(a.value=JSON.stringify(x.worksheet[r])),e.prev=4,e.next=7,fetch("/api/activities/".concat(c),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 7:return i=e.sent,e.next=10,i.json();case 10:s=e.sent,console.log(s),O({type:dr}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),n({position:G?"top-right":"bottom",title:"Error al guardar los cambios",status:"error",duration:5e3,isClosable:!0});case 18:case"end":return e.stop()}}),e,null,[[4,15]])})))).apply(this,arguments)}function B(e){document.body.style.zoom="100%",e.target.blur(),setTimeout((function(){window.print()}),500)}Object(a.useEffect)((function(){function e(){return(e=Object(m.a)(f.a.mark((function e(){var t,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/activities/".concat(c));case 2:return t=e.sent,e.next=5,t.json();case 5:if(a=e.sent,404!==t.status){e.next=9;break}return r.push("/worksheets/404"),e.abrupt("return");case 9:if(!t.ok){e.next=12;break}return O({type:ur,payload:{worksheet:Ne(a)}}),e.abrupt("return");case 12:n({description:a.message,status:"error",isClosable:!0});case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[c,n,r]);var J=(null===x||void 0===x||null===(e=x.worksheet)||void 0===e?void 0:e.title)?"LangSheets | ".concat(null===x||void 0===x||null===(t=x.worksheet)||void 0===t?void 0:t.title):"LangSheets";Le(J);window.location.host;var K=Object(ce.a)("(min-width: 1024px)"),G=Object(g.a)(K,1)[0];return Object(p.jsx)(Me.c,{editor:i,value:y?[{children:[{text:"Cargando..."}]}]:w?[{children:[{text:""}]}]:v.content,onChange:function(e){return O({type:br,payload:{property:"content",value:e}})},children:G?Object(p.jsxs)(W.a,{h:"100vh",templateColumns:"repeat(12, 1fr)",templateRows:"auto 1fr",children:[Object(p.jsx)(W.b,{rowSpan:2,colSpan:1,bg:"#05043E",py:"10",position:"sticky",top:"0",zIndex:"docked",sx:{"@media print":{display:"none"}},children:Object(p.jsx)(Ve,{handlePrint:B,id:c})}),Object(p.jsxs)(W.b,{rowSpan:1,colSpan:11,sx:{"@media print":{display:"none"}},children:[y&&Object(p.jsx)(L.a,{size:"sm",isIndeterminate:!0,sx:{"& > div":{background:"var(--chakra-colors-brand-300)"}}}),Object(p.jsxs)(W.a,{alignItems:"center",gridTemplateRows:"auto auto auto",gridTemplateColumns:"50px 1fr auto",h:"full",bg:"white",children:[Object(p.jsx)(W.b,{rowSpan:"1",colSpan:"1",display:"grid",placeItems:"center",children:Object(p.jsx)(D.a,{as:"a",href:"/dashboard",mx:"4",children:Object(p.jsx)(z.a,{as:Z.e})})}),Object(p.jsxs)(W.b,{rowSpan:"1",display:"flex",flexDirection:"row",alignItems:"center",pt:"2",children:[Object(p.jsx)(q.a,{isLoaded:!y,children:Object(p.jsx)(Be,{updateWorksheetProp:F,dispatch:O,title:v?v.title:""})}),!y&&Object(p.jsx)(P.a,{ml:"5",variant:"ghost",size:"sm",rightIcon:C?Object(p.jsx)(Je.a,{}):Object(p.jsx)(z.a,{color:"green.500",as:Z.i}),children:C?"Guardando Actividad":"Cambios guardados"})]}),Object(p.jsx)(W.b,{display:"flex",alignItems:"center",px:"4",colStart:3,rowSpan:2,children:Object(p.jsx)(M.a,{children:Object(p.jsx)(V.a,{title:"Al hacer una actividad p\xfablica tus alumnos podr\xe1n acceder a la actividad",children:Object(p.jsxs)(P.a,{onClick:E,colorScheme:"brand",children:[Object(p.jsx)(z.a,{as:Z.n,mr:"2"}),(null===v||void 0===v?void 0:v.published)?"Anular Publicaci\xf3n":"Publicar Actividad"]})})})}),Object(p.jsx)(W.b,{py:"2",colStart:2,rowSpan:"1",display:"inline-flex",alignItems:"center",children:Object(p.jsx)(sr,{handlePublishActivity:E,worksheet:v})}),Object(p.jsx)(W.b,{py:"2",px:"5",colSpan:3,width:"full",borderTop:"2px solid var(--chakra-colors-gray-200)",children:Object(p.jsx)(M.a,{as:D.a,alignItems:"center",children:Object(p.jsx)(or,{})})})]})]}),Object(p.jsx)(W.b,{rowSpan:1,colSpan:8,p:"12",bg:"gray.100",sx:{"@media print":{gridColumn:"span 12/span 12",gridRow:"span 2/span 2"}},onBlur:function(){return F({property:"content"})},children:Object(p.jsx)(q.a,{isLoaded:!y,children:Object(p.jsx)(Ye,{decorate:j,renderElement:d,renderLeaf:l,readOnly:!k,placeholder:"Escribe aqu\xed..."})})}),Object(p.jsxs)(W.b,{rowSpan:1,colSpan:3,sx:{"@media print":{display:"none"}},children:[Object(p.jsx)(Ze.a,{}),Object(p.jsxs)(ie.a,{p:"4",children:[Object(p.jsx)(N.a,{fontWeight:"semibold",fontSize:"lg",children:"Detalles de la actividad"}),!y&&!w&&Object(p.jsxs)(a.Fragment,{children:[Object(p.jsx)(Qe,{updateWorksheetProp:F,dispatch:O,lang:v.lang}),Object(p.jsx)(et,{updateWorksheetProp:F,dispatch:O,isPrivate:v.private})]})]}),Object(p.jsx)(Ze.a,{}),Object(p.jsxs)(ie.a,{p:"4",children:[Object(p.jsx)(N.a,{fontWeight:"semibold",fontSize:"lg",children:"Ajustes"}),Object(p.jsxs)(N.a,{my:"2",children:["Modo de edici\xf3n: ",Object(p.jsx)(He.a,{colorScheme:"brand",ml:"4",isChecked:k,onChange:function(){return O({type:"toggle-writting-mode"})}})]})]})]})]}):Object(p.jsxs)(D.a,{flexDir:"column",minH:"100vh",children:[y&&Object(p.jsx)(L.a,{size:"sm",isIndeterminate:!0,sx:{"& > div":{background:"var(--chakra-colors-brand-300)"}}}),Object(p.jsxs)(D.a,{py:"2",px:"4",alignItems:"center",children:[Object(p.jsxs)(D.a,{flexGrow:"1",alignItems:"center",children:[Object(p.jsx)(q.a,{isLoaded:!y,children:Object(p.jsx)(Be,{updateWorksheetProp:F,dispatch:O,title:v?v.title:""})}),!y&&Object(p.jsxs)(Ke.a,{children:[Object(p.jsx)(Ke.f,{children:Object(p.jsx)(P.a,{ml:"5",variant:"ghost",size:"sm",sx:{"@media print":{display:"none"}},children:C?Object(p.jsx)(Je.a,{}):Object(p.jsx)(z.a,{color:"green.500",as:Z.i})})}),Object(p.jsx)(Ke.d,{p:"2",boxShadow:"base",children:C?"Guardando cambios":"Cambios guardados"})]})]}),Object(p.jsxs)(I.a,{children:[Object(p.jsx)(I.b,{variant:"ghost",colorScheme:"brand",icon:Object(p.jsx)(z.a,{as:Q.b}),as:_.a,sx:{"@media print":{display:"none"}}}),Object(p.jsxs)(I.f,{children:[Object(p.jsx)(I.d,{title:"Actividad",children:Object(p.jsx)(I.e,{onClick:E,icon:Object(p.jsx)(z.a,{color:"brand.500",as:Z.n}),children:(null===v||void 0===v?void 0:v.published)?"Anular Publicaci\xf3n":"Publicar Actividad"})}),Object(p.jsx)(I.c,{}),Object(p.jsx)(I.d,{title:"Ver",children:S?Object(p.jsx)(I.e,{icon:Object(p.jsx)(z.a,{as:rt.b}),onClick:fr,children:"Vista normal"}):Object(p.jsx)(I.e,{icon:Object(p.jsx)(z.a,{as:rt.a}),onClick:Or,children:"Pantalla completa"})})]})]})]}),Object(p.jsx)(Ze.a,{}),Object(p.jsx)(ie.a,{flexGrow:"1",bg:"gray.100",p:"4",boxShadow:"base",sx:{"@media print":{boxShadow:"none"}},children:Object(p.jsx)(q.a,{height:"full",isLoaded:!y,children:Object(p.jsx)(Ye,{decorate:j,renderElement:d,renderLeaf:l,readOnly:!k,placeholder:"Escribe aqu\xed..."})})}),i.selection&&Object(p.jsx)(Ge.a,{direction:"bottom",in:i.selection,style:{zIndex:50,boxShadow:"var(--chakra-shadows-dark-lg)"},children:Object(p.jsxs)(D.a,{pr:"30vw",w:"100vw",color:"#616161",bg:"white",alignItems:"center",height:"50px",children:[Object(p.jsx)(D.a,{width:"full",height:"full",overflowX:"auto",alignItems:"center",children:Object(p.jsx)(or,{})}),Object(p.jsxs)(D.a,{height:"full",position:"fixed",bottom:"0",right:"0",alignItems:"center",children:[Object(p.jsx)(Ze.a,{orientation:"vertical"}),Object(p.jsx)(_.a,{bg:"white",borderRadius:"none",height:"full",onClick:function(){at.h.deselect(i)},variant:"ghost",colorScheme:"brand",icon:Object(p.jsx)(z.a,{as:H.b})}),Object(p.jsx)(Ze.a,{orientation:"vertical"}),Object(p.jsx)(_.a,{variant:"ghost",borderRadius:"none",height:"full",colorScheme:"brand",icon:Object(p.jsx)(z.a,{as:Z.l})})]})]})}),!i.selection&&Object(p.jsx)(Ge.a,{direction:"bottom",in:!i.selection,style:{zIndex:150},children:Object(p.jsxs)(ie.a,{color:"white",display:"flex",bg:"#05043E",alignItems:"center",width:"100%",justifyContent:"space-around",sx:{"@media print":{display:"none"}},children:[Object(p.jsxs)(D.a,{onClick:B,flexDir:"column",alignItems:"center",justifyContent:"center",cursor:"pointer","aria-label":"button",py:"2",_hover:{color:"var(--chakra-colors-brand-300)"},children:[Object(p.jsx)(z.a,{w:6,h:6,as:Z.s}),Object(p.jsx)(N.a,{fontSize:"x-small",children:"Imprimir"})]}),Object(p.jsxs)(D.a,{flexDir:"column",alignItems:"center",as:"a",href:"/dashboard",justifyContent:"center",cursor:"pointer","aria-label":"button",py:"2",_hover:{color:"var(--chakra-colors-brand-300)"},children:[Object(p.jsx)(z.a,{w:6,h:6,as:Z.p}),Object(p.jsx)(N.a,{fontSize:"x-small",children:"Inicio"})]}),Object(p.jsxs)(D.a,{flexDir:"column",alignItems:"center",justifyContent:"center",cursor:"pointer","aria-label":"button",py:"2",_hover:{color:"var(--chakra-colors-brand-300)"},children:[Object(p.jsx)(z.a,{w:6,h:6,as:Z.g}),Object(p.jsx)(N.a,{fontSize:"x-small",children:"Previsualizar"})]})]})})]})})},gr=r(296),vr=r(313),yr=function(){var e=C().user;return Object(p.jsxs)(a.Fragment,{children:[Object(p.jsxs)(ie.a,{px:"10",children:[Object(p.jsxs)(D.a,{mx:"auto",justifyContent:"space-between",alignItems:"center",py:"5",children:[Object(p.jsx)(tt,{}),e?Object(p.jsx)(P.a,{as:"a",href:"/dashboard",colorScheme:"brand",variant:"solid",children:"Mis actividades"}):Object(p.jsxs)(M.a,{spacing:"5",children:[Object(p.jsx)(P.a,{as:"a",href:"/login",colorScheme:"brand",variant:"outline",children:"Iniciar Sesi\xf3n"}),Object(p.jsx)(P.a,{as:"a",href:"/signup",variant:"solid",colorScheme:"brand",children:"Crear Cuenta"})]})]}),Object(p.jsxs)(D.a,{flexDirection:["column","row"],alignItems:"center",my:"5",children:[Object(p.jsxs)(ie.a,{w:"40%",children:[Object(p.jsxs)(N.a,{lineHeight:"8",textAlign:["center","left"],children:[Object(p.jsx)(N.a,{as:"span",fontWeight:"bold",fontSize:"xxx-large",children:"Actividades digitales"})," ",Object(p.jsx)(N.a,{as:"span",color:"brand.300",fontWeight:"bold",fontSize:"xxx-large",children:"Interactivas"})]}),Object(p.jsx)(N.a,{fontSize:"x-large",children:"para entornos virtuales de aprendizaje."}),e?Object(p.jsx)(P.a,{my:"5",size:"lg",as:"a",href:"/dashboard",colorScheme:"brand",variant:"solid",children:"Mis actividades"}):Object(p.jsx)(P.a,{my:"5",size:"lg",as:"a",href:"/signup",variant:"solid",colorScheme:"brand",children:"Pru\xe9balo gratis"})]}),Object(p.jsx)(gr.a,{w:"60%",objectFit:"cover",src:"/hero.svg"})]})]}),Object(p.jsx)(D.a,{my:"5",p:"10",w:"full",position:"relative",alignItems:"center",children:Object(p.jsxs)(ie.a,{mt:"80",mx:"auto",width:"container.xl",children:[Object(p.jsxs)(ie.a,{w:"40%",children:[Object(p.jsx)(N.a,{color:"brand.300",fontWeight:"bold",fontSize:"xx-large",my:"10",children:"\xbfC\xf3mo funciona?"}),Object(p.jsxs)(vr.a,{spacing:"5",children:[Object(p.jsxs)(D.a,{children:[Object(p.jsx)(ie.b,{fontSize:"x-large",fontWeight:"bold",size:"50px",bg:"brand.300",color:"white",children:"1"}),Object(p.jsxs)(ie.a,{ml:"5",children:[Object(p.jsx)(N.a,{fontSize:"x-large",fontWeight:"bold",children:"Crea una actividad"}),Object(p.jsx)(N.a,{children:"Elige una plantilla o comienza una actividad desde cero. Inserta el contenido que necesites (im\xe1genes, videos etc.)"})]})]}),Object(p.jsxs)(D.a,{children:[Object(p.jsx)(ie.b,{fontSize:"x-large",fontWeight:"bold",size:"50px",bg:"brand.300",color:"white",children:"2"}),Object(p.jsxs)(ie.a,{ml:"5",children:[Object(p.jsx)(N.a,{fontSize:"x-large",fontWeight:"bold",children:"Publica tu actividad"}),Object(p.jsx)(N.a,{children:"Cambia el estado de tu actividad de borrador a publicado en un solo click."})]})]}),Object(p.jsxs)(D.a,{children:[Object(p.jsx)(ie.b,{fontSize:"x-large",fontWeight:"bold",size:"50px",bg:"brand.300",color:"white",children:"2"}),Object(p.jsxs)(ie.a,{ml:"5",children:[Object(p.jsx)(N.a,{fontSize:"x-large",fontWeight:"bold",children:"Comparte el link de tu actividad"}),Object(p.jsx)(N.a,{children:"Por cada actividad creada un link \xfanico ser\xe1 generado para que los alumnos puedan realizar las actividades en tiempo real."})]})]})]})]}),Object(p.jsx)(gr.a,{position:"absolute",top:"0.5",right:"0.5",src:"/figurebg.svg"}),Object(p.jsx)(gr.a,{position:"absolute",right:"425px",top:"310px",title:"Crea una actividad",src:"/figure1.svg"}),Object(p.jsx)(gr.a,{position:"absolute",right:"400px",top:"700px",title:"Comparte una actividad",src:"/figure2.svg"}),Object(p.jsx)(gr.a,{position:"absolute",right:"103px",top:"470px",title:"Publica una actividad",src:"/figure3.svg"})]})})]})},wr=r(297),kr=r(186),Cr={users:[],username:void 0,worksheet:{title:"",content:[{type:"paragraph",children:[{text:""}]}]}};function Sr(e,t){switch(t.type){case"set-username":return Object(d.a)(Object(d.a)({},e),{},{username:t.payload.username});case"set-worksheet":return Object(d.a)(Object(d.a)({},e),{},{worksheet:t.payload.worksheet});case"set-worksheet-content":return Object(d.a)(Object(d.a)({},e),{},{worksheet:Object(d.a)(Object(d.a)({},e.worksheet),{},{content:t.payload.content})});case"add-user":return Object(d.a)(Object(d.a)({},e),{},{users:[].concat(Object(E.a)(e.users),[t.payload.user])});case"set-users":return Object(d.a)(Object(d.a)({},e),{},{users:t.payload.users});default:return console.warn("Action provided did not matched",t),e}}var Er=function(e){var t=e.dispatch,r=Object(A.a)(),n=Object(a.useRef)();function c(){var e=n.current.value;if(""!==e.trim())return localStorage.setItem("ls-username",e),void t({type:"set-username",payload:{username:e}});r({description:"Debes elegir un nombre v\xe1lido",status:"warning",duration:8e3,position:"top-right",isClosable:!0})}return Object(p.jsx)(D.a,{bg:"gray.100",h:"100vh",alignItems:"center",justifyContent:"center",children:Object(p.jsxs)(D.a,{flexDir:"column",bg:"white",px:"10",py:"5",boxShadow:"base",borderRadius:"base",alignItems:"center",justifyContent:"center",children:[Object(p.jsx)(N.a,{fontSize:"x-large",my:"4",children:"Ingresa tu nombre"}),Object(p.jsx)(mt.a,{onSubmit:c,size:"lg",ref:n,variant:"filled",my:"4",placeholder:"Escribe un nombre"}),Object(p.jsx)(P.a,{variant:"solid",colorScheme:"brand",my:"4",onClick:c,children:"Aceptar"})]})})},Ar=function(e){var t=e.users,r=e.worksheet,n=(e.dispatch,e.onChange),c=e.editor,i=e.renderLeaf,s=e.renderElement;return Object(p.jsxs)(a.Fragment,{children:[Object(p.jsxs)(D.a,{py:"2",children:[Object(p.jsx)(N.a,{flexGrow:"1",color:"brand.600",px:"4",fontSize:"x-large",fontWeight:"bold",children:r.title}),Object(p.jsx)(D.a,{justifyContent:"flex-end",alignItems:"center",px:"4",children:Object(p.jsx)(zr,{users:t})})]}),Object(p.jsx)(ie.a,{children:Object(p.jsx)(F.a,{maxWidth:"container.lg",my:"4",children:Object(p.jsx)(ut.Provider,{value:bt,children:Object(p.jsx)(Me.c,{editor:c,value:r.content,onChange:n,children:Object(p.jsx)(ie.a,{background:"white",px:["8","16"],py:"16",as:Me.a,shadow:"sm",renderElement:s,renderLeaf:i,readOnly:!0})})})})})]})},Ir=function(e){var t=e.username,r=e.users,n=e.worksheet,c=e.dispatch,i=e.onChange,s=e.editor,o=e.renderLeaf,l=e.renderElement;return t?Object(p.jsxs)(a.Fragment,{children:[Object(p.jsxs)(D.a,{py:"2",children:[Object(p.jsx)(N.a,{flexGrow:"1",color:"brand.600",px:"4",fontSize:"x-large",fontWeight:"bold",children:n.title}),Object(p.jsx)(D.a,{justifyContent:"flex-end",alignItems:"center",px:"4",children:Object(p.jsx)(zr,{users:r})})]}),Object(p.jsx)(ie.a,{children:Object(p.jsx)(F.a,{maxWidth:"container.lg",my:"4",children:Object(p.jsx)(ut.Provider,{value:bt,children:Object(p.jsx)(Me.c,{editor:s,value:n.content,onChange:i,children:Object(p.jsx)(ie.a,{background:"white",px:["8","16"],py:"16",as:Me.a,shadow:"sm",renderElement:l,renderLeaf:o,readOnly:!0})})})})})]}):Object(p.jsx)(Er,{dispatch:c})},zr=function(e){var t=e.users;return Object(p.jsx)(wr.a,{size:"sm",max:3,children:t.map((function(e){var t=e.username,r=e.userID;return Object(p.jsx)(kr.a,{bg:"brand.500",color:"white",name:t,src:Object(p.jsx)(Z.x,{}),title:t},r)}))})},Pr=function(){var e=Object(h.i)().id,t=C(),r=t.user,n=t.loading,c=dt(),i=tr(),s=Object(g.a)(i,2),o=s[0],l=s[1],d=Object(a.useReducer)(Sr,Cr),j=Object(g.a)(d,2),b=j[0],u=j[1],x=b.username,O=b.users,v=b.worksheet,y=Object(a.useRef)(!1),w=Object(A.a)();function k(e){u({type:"set-worksheet-content",payload:{content:e}});var t=c.operations.filter((function(e){return!["set_value","set_selection"].includes(e.type)}));!y.current&&t.length&&bt.emit("content-change",t),y.current=!1}return Object(a.useEffect)((function(){function t(){return(t=Object(m.a)(f.a.mark((function t(){var r,a,n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/api/activities/".concat(e));case 2:return r=t.sent,t.next=5,r.json();case 5:a=t.sent,r.ok&&(n=Ne(a),u({type:"set-worksheet",payload:{worksheet:n}}));case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[e]),Object(a.useEffect)((function(){var e=localStorage.getItem("ls-username");!n&&r&&(e="".concat(r.name," ").concat(r.lastName)),u({type:"set-username",payload:{username:e}})}),[n]),Object(a.useEffect)((function(){x&&(bt.auth={username:x},bt.connect(),bt.emit("join-room",e))}),[e,x]),Object(a.useEffect)((function(){return bt.on("content-change",(function(e){y.current=!0,at.a.withoutNormalizing(c,(function(){e.forEach((function(e){c.apply(e)}))}))})),bt.on("users",(function(e){u({type:"set-users",payload:{users:e}})})),bt.on("user-connected",(function(e){w({description:"".concat(e.username," ha ingresado a la actividad."),status:"info",duration:3e3,position:"top-right",isClosable:!0}),u({type:"add-user",payload:{user:e}})})),bt.on("send-updated-content",(function(e){bt.emit("send-updated-content",e,v.content)})),bt.on("user-disconnected",(function(e){var t=e.username,r=e.users;w({description:"".concat(t," ha salido de la actividad."),status:"info",duration:3e3,position:"top-right",isClosable:!0}),u({type:"set-users",payload:{users:r}})})),bt.on("connection_error",(function(t){switch(t.message){case"invalid username":w({description:"Debes elegir un nombre v\xe1lido",status:"warning",duration:8e3,position:"top-right",isClosable:!0});break;case"invalid room":bt.emit("join-room",e)}})),function(){bt.offAny(),bt.off("content-change"),bt.off("send-updated-content"),bt.off("users"),bt.off("user-connected"),bt.off("user-disconnected"),bt.off("connection_error")}}),[e,v,c,w]),ne("var(--chakra-colors-gray-100)"),Le("LangSheets | ".concat(v.title)),Object(p.jsx)(ut.Provider,{value:bt,children:!n&&r?Object(p.jsx)(Ar,{users:O,worksheet:v,dispatch:u,onChange:k,editor:c,renderLeaf:o,renderElement:l,activityID:e}):Object(p.jsx)(Ir,{username:x,users:O,worksheet:v,onChange:k,dispatch:u,editor:c,renderLeaf:o,renderElement:l,activityID:e})})},Lr=function(){return Le("P\xe1gina no encontrada"),Object(p.jsxs)(a.Fragment,{children:[Object(p.jsx)(ze,{}),Object(p.jsxs)(D.a,{alignItems:"center",flexDirection:"column",justifyContent:"center",textAlign:"center",height:"100vh",children:[Object(p.jsx)(N.a,{fontSize:"6xl",children:"404"}),Object(p.jsx)(N.a,{fontSize:"4xl",children:"Page not founded"})]})]})},Rr=r(95),Fr=r(298),Nr={name:"",lastName:"",email:"",password:"",password2:"",error:void 0},Wr=function(){var e=C(),t=e.login,r=e.signUp,n=e.loading,c=Object(h.g)(),i=Object(a.useState)(Nr),s=Object(g.a)(i,2),o=s[0],l=s[1],j=o.name,b=o.lastName,u=o.email,x=o.password,O=o.password2,v=o.error;function y(e,t){var r=Object(d.a)({},o);r[e]=t,l(r)}function w(){return(w=Object(m.a)(f.a.mark((function e(a){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),o.password===o.password2){e.next=7;break}return(n=Object(d.a)({},o)).password2="",n.error="Las contrase\xf1as no coinciden",l(n),e.abrupt("return");case 7:return e.next=9,r(o.name,o.lastName,o.email,o.password);case 9:return e.next=11,t(o.email,o.password);case 11:c.push("/dashboard");case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(p.jsxs)(W.a,{h:"100vh",placeItems:"center",templateColumns:["1fr","repeat(2, 1fr)"],w:"100vw",children:[Object(p.jsxs)(ie.a,{children:[Object(p.jsx)(gr.a,{src:"/Online_collaboration.png"}),Object(p.jsx)(N.a,{px:"4",textAlign:"center",fontSize:"x-large",fontWeight:"semibold",color:"brand.700",children:"Lleva la interacci\xf3n de tus clases al siguiente nivel"})]}),Object(p.jsx)(ie.a,{w:"md",textAlign:"center",px:"10",children:Object(p.jsx)("form",{onSubmit:function(e){return w.apply(this,arguments)},children:Object(p.jsxs)(vr.a,{spacing:"4",children:[Object(p.jsx)(tt,{}),Object(p.jsxs)(Rr.a,{isRequired:!0,mr:"4",children:[Object(p.jsx)(Fr.a,{children:"Nombre (s)"}),Object(p.jsx)(mt.a,{autoFocus:!0,value:j,onChange:function(e){return y("name",e.target.value)},placeholder:"Armando"})]}),Object(p.jsxs)(Rr.a,{isRequired:!0,children:[Object(p.jsx)(Fr.a,{children:"Apellido (s)"}),Object(p.jsx)(mt.a,{value:b,onChange:function(e){return y("lastName",e.target.value)},placeholder:"S\xe1nchez"})]}),Object(p.jsxs)(Rr.a,{isRequired:!0,children:[Object(p.jsx)(Fr.a,{children:"Correo"}),Object(p.jsx)(mt.a,{value:u,onChange:function(e){return y("email",e.target.value)},placeholder:"email@provider.com"})]}),Object(p.jsxs)(Rr.a,{isRequired:!0,children:[Object(p.jsx)(Fr.a,{children:"Contrase\xf1a"}),Object(p.jsx)(mt.a,{value:x,onChange:function(e){return y("password",e.target.value)},type:"password"})]}),Object(p.jsxs)(Rr.a,{isRequired:!0,children:[Object(p.jsx)(Fr.a,{children:"Confirma tu contrase\xf1a"}),Object(p.jsx)(mt.a,{value:O,onChange:function(e){return y("password2",e.target.value)},type:"password"})]}),v&&Object(p.jsxs)(R.a,{status:"error",children:[Object(p.jsx)(R.c,{}),v]}),Object(p.jsx)(P.a,{isLoading:n,type:"submit",colorScheme:"brand",variant:"solid",children:"Crear Cuenta"}),Object(p.jsxs)(N.a,{textAlign:"center",children:["\xbfYa tienes una cuenta? Inicia sesi\xf3n ",Object(p.jsx)(N.a,{color:"brand",textDecoration:"underline",as:"a",href:"/login",children:" aqu\xed "})]})]})})})]})},qr={email:"",password:""};var Dr=function(){var e=Object(h.g)(),t=Object(a.useState)(qr),r=Object(g.a)(t,2),n=r[0],c=r[1],i=n.email,s=n.password,o=C(),l=o.login,j=o.loading,b=o.error;function u(e,t){var r=Object(d.a)({},n);r[e]=t,c(r)}function x(){return(x=Object(m.a)(f.a.mark((function t(r){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.preventDefault(),t.next=3,l(n.email,n.password);case 3:e.push("/dashboard");case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(p.jsx)(ie.a,{as:"form",bg:"gray.100",onSubmit:function(e){return x.apply(this,arguments)},display:"flex",alignItems:"center",justifyContent:"center",h:"100vh",flexDirection:"column",children:Object(p.jsxs)(vr.a,{spacing:"8",bg:"white",shadow:"base",w:["80vw","50vw","40vw"],p:["8","10"],children:[Object(p.jsx)(tt,{}),Object(p.jsxs)(Rr.a,{isRequired:!0,children:[Object(p.jsx)(Fr.a,{children:"Correo"}),Object(p.jsx)(mt.a,{autoFocus:!0,value:i,onChange:function(e){return u("email",e.target.value)},placeholder:"email@provider.com"})]}),Object(p.jsxs)(Rr.a,{isRequired:!0,children:[Object(p.jsx)(Fr.a,{children:"Contrase\xf1a"}),Object(p.jsx)(mt.a,{value:s,onChange:function(e){return u("password",e.target.value)},placeholder:"password",type:"password"})]}),b&&Object(p.jsxs)(R.a,{status:"error",children:[Object(p.jsx)(R.c,{}),b.message]}),Object(p.jsx)(P.a,{isLoading:j,type:"submit",colorScheme:"brand",variant:"solid",children:"Iniciar Sesi\xf3n"}),Object(p.jsxs)(N.a,{textAlign:"center",children:["\xbfAun no tienes una cuenta? Crea tu cuenta ",Object(p.jsx)(N.a,{color:"brand",textDecoration:"underline",as:"a",href:"/signUp",children:" aqu\xed "})]})]})})},Tr={editorValue:[{type:"paragraph",children:[{text:"Hello World!"}]}],remoteChange:!1};function Mr(e,t){switch(t.type){case"set_editor_value":var r=t.payload.editorValue;return Object(d.a)(Object(d.a)({},e),{},{editorValue:r});default:return e}}var Vr=function(){var e=Object(a.useReducer)(Mr,Tr),t=Object(g.a)(e,2),r=t[0],n=t[1],c=r.editorValue,i=Object(a.useRef)(!1),s=dt(),o=Object(a.useRef)(Date.now().toString()),l=tr(),d=Object(g.a)(l,2),j=d[0],b=d[1];return bt.connect(),Object(a.useEffect)((function(){return bt.on("content change",(function(e){var t=e.id,r=e.operations;console.log("Operations received",{senderID:t,operations:r}),console.log("Remote change status in socket",i.current),i.current=!0,at.a.withoutNormalizing(s,(function(){r.forEach((function(e){s.apply(e)}))}))})),function(){bt.off("content change"),bt.connected&&bt.disconnect()}}),[]),Object(p.jsx)(Me.c,{editor:s,value:c,onChange:function(e){console.log("Content updated",e),n({type:"set_editor_value",payload:{editorValue:e}});var t=s.operations.filter((function(e){return!["set_value","set_selection"].includes(e.type)}));console.log("Remote change",i.current),i.current?console.log("Change happened in other editor"):(console.log("Change happened in this editor"),t.length&&(console.log("Sending changes to the server"),bt.emit("content change",{id:o.current,operations:t}))),i.current=!1},children:Object(p.jsx)(ie.a,{border:"purple 1px solid",children:Object(p.jsx)(Me.a,{renderElement:b,renderLeaf:j})})})},_r=r(299),Br=r(278),Jr={es:"Espa\xf1ol",en:"Ingl\xe9s",fr:"Franc\xe9s",ru:"Ruso",de:"Alem\xe1n",it:"Italiano",jp:"Japon\xe9s"},Zr=function(e){var t=Object(h.g)(),r=Object(a.useState)(!1),n=Object(g.a)(r,2),c=n[0],i=n[1],s=C().user,o=(e._id,e.author),l=e.content,d=(e.createdAt,e.lang),j=e.title,b="".concat(o.name," ").concat(o.lastName),u=dt({plugins:!1}),x=tr(),O=Object(g.a)(x,2),v=O[0],y=O[1],w=Object(Br.a)(),k=w.isOpen,S=w.onOpen,E=w.onClose;function A(){return I.apply(this,arguments)}function I(){return(I=Object(m.a)(f.a.mark((function e(){var r,a,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(!0),r={title:j,lang:d,private:!1,published:!1,content:JSON.stringify(l),createdAt:new Date,author:{name:s.name,lastName:s.lastName,id:s.id}},e.prev=2,e.next=5,fetch("/api/activities",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});case 5:return a=e.sent,e.next=8,a.json();case 8:n=e.sent,t.push("/worksheets/".concat(n._id,"/edit")),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),alert("Algo sali\xf3 mal, refresca la p\xe1gina e int\xe9ntalo de nuevo :(");case 15:return e.prev=15,i(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])})))).apply(this,arguments)}return ne("var(--chakra-colors-gray-100)"),Object(p.jsx)(Me.c,{editor:u,value:l,children:Object(p.jsxs)(ie.a,{bg:"white",h:["70vh","60vh"],transition:"ease 0.5s transform",overflowY:"hidden",boxShadow:"base",children:[Object(p.jsxs)(ie.a,{p:"10",cursor:"zoom-in",position:"relative",h:["60vh","50vh"],overflowY:"auto",children:[Object(p.jsx)(ie.a,{width:"100%",height:"100%",position:"absolute",top:"0",left:"0",zIndex:"2",onClick:S}),Object(p.jsx)(Ye,{mx:"auto",pointerEvents:"none",transform:["scale(.6) translateY(-25%)","scale(.7) translateY(-20%)"],readOnly:!0,renderElement:y,renderLeaf:v})]}),Object(p.jsxs)(D.a,{zIndex:"2",bg:"brand.700",color:"white",alignItems:"center",justifyContent:"space-between",width:"full",position:"sticky",bottom:"0",left:"0",p:"5",children:[Object(p.jsxs)(ie.a,{children:[Object(p.jsx)(N.a,{isTruncated:!0,fontSize:"large",children:j}),Object(p.jsxs)(N.a,{children:[" ",Object(p.jsx)(z.a,{as:Z.r})," ",Jr[d]]}),Object(p.jsxs)(N.a,{isTruncated:!0,children:[" ",Object(p.jsx)(z.a,{as:Z.x})," ",b]})]}),Object(p.jsx)(V.a,{hasArrow:!0,label:"Clonar actividad",children:Object(p.jsxs)(P.a,{isLoading:c,onClick:A,alignSelf:"flex-start",variant:"outline",colorScheme:"white",children:[" ",Object(p.jsx)(z.a,{as:Z.m})," "]})})]}),Object(p.jsxs)(J.a,{isOpen:k,onClose:E,size:"2xl",children:[Object(p.jsx)(J.g,{}),Object(p.jsxs)(J.d,{bg:"gray.100",children:[Object(p.jsx)(J.c,{}),Object(p.jsx)(J.f,{children:j}),Object(p.jsxs)(J.b,{position:"relative",children:[Object(p.jsx)(ie.a,{width:"100%",height:"100%",position:"absolute",top:"0",left:"0",zIndex:"1"}),Object(p.jsxs)(N.a,{mb:"5",children:[" ",Object(p.jsx)(z.a,{as:Z.x})," ",b]}),Object(p.jsx)(ie.a,{bg:"white",boxShadow:"base",children:Object(p.jsx)(Ye,{readOnly:!0,renderElement:y,renderLeaf:v})})]}),Object(p.jsx)(J.e,{children:Object(p.jsxs)(M.a,{children:[Object(p.jsx)(P.a,{variant:"ghost",onClick:E,children:"Cerrar"}),Object(p.jsx)(P.a,{isLoading:c,onClick:A,rightIcon:Object(p.jsx)(z.a,{as:Z.m}),colorScheme:"brand",children:"Clonar Actividad"})]})})]})]})]})})},Hr=function(){var e=Object(a.useState)([]),t=Object(g.a)(e,2),r=t[0],n=t[1],c=Object(a.useState)(!0),i=Object(g.a)(c,2),s=i[0],o=i[1],l=Object(a.useState)(void 0),j=Object(g.a)(l,2),b=j[0],u=j[1],h=Object(a.useState)(void 0),x=Object(g.a)(h,2),O=x[0],v=x[1],y=Object(a.useState)(""),w=Object(g.a)(y,2),k=w[0],C=w[1];function S(){return E.apply(this,arguments)}function E(){return(E=Object(m.a)(f.a.mark((function e(){var t,r,a,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o(!0),t={},O&&(t.language=O),k.trim()&&(t.keywords=k),e.next=7,fetch("/api/activities/public?".concat(0!==Object.keys(t).length&&We(t)));case 7:return r=e.sent,e.next=10,r.json();case 10:a=e.sent,c=Fe(a),n(c),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),u(e.t0);case 18:return e.prev=18,o(!1),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[0,15,18,21]])})))).apply(this,arguments)}return Object(a.useEffect)((function(){S()}),[O]),b?Object(p.jsx)(ie.a,{children:"Error"}):Object(p.jsxs)(a.Fragment,{children:[Object(p.jsxs)(ie.a,{bg:"white",width:"full",children:[Object(p.jsxs)(D.a,{flexWrap:"wrap",alignItems:"center",px:"5",py:"4",children:[Object(p.jsx)(N.a,{as:"a",href:"/",children:Object(p.jsx)(z.a,{w:12,h:12,as:pe})}),Object(p.jsx)(T.a,{}),Object(p.jsx)(P.a,{as:"a",href:"/dashboard",variant:"outline",colorScheme:"brand",leftIcon:Object(p.jsx)(z.a,{as:Z.k}),mx:"4",children:"Regresar"})]}),Object(p.jsx)(Ze.a,{}),Object(p.jsxs)(D.a,{flexWrap:"wrap",alignItems:"center",justifyContent:"center",px:"5",children:[Object(p.jsxs)(ft.a,{my:{base:"5"},width:{base:"100%",md:"50%"},mr:"4",children:[Object(p.jsx)(V.a,{label:"Buscar actividades",children:Object(p.jsx)(_r.a,{cursor:"pointer",onClick:S,children:Object(p.jsx)(z.a,{as:Z.t})})}),Object(p.jsx)(mt.a,{borderLeftRadius:"none",value:k,onKeyDown:function(e){return"Enter"===e.key&&S()},onChange:function(e){return C(e.target.value)},placeholder:"Busca actividades de otros profesores"})]}),Object(p.jsxs)(I.a,{children:[Object(p.jsx)(V.a,{hasArrow:!0,label:"Filtrar por idioma",children:Object(p.jsxs)(D.a,{my:{base:"5"},alignItems:"center",border:"solid",borderRadius:"md",pl:"4",borderWidth:"thin",borderColor:"gray.200",children:[Object(p.jsx)(z.a,{h:8,w:8,as:Z.r,mr:"2"}),O?Jr[O]:"Seleccionar Idioma",Object(p.jsx)(I.b,{borderLeftRadius:"none",ml:"2",as:P.a,children:Object(p.jsx)(z.a,{as:Z.j})})]})}),Object(p.jsxs)(I.f,{zIndex:"dropdown",children:[Object(p.jsx)(I.e,{onClick:function(){return v("en")},children:"Ingl\xe9s"}),Object(p.jsx)(I.e,{onClick:function(){return v("fr")},children:"Franc\xe9s"}),Object(p.jsx)(I.e,{onClick:function(){return v("es")},children:"Espa\xf1ol"}),Object(p.jsx)(I.e,{onClick:function(){return v("ru")},children:"Ruso"}),Object(p.jsx)(I.e,{onClick:function(){return v("de")},children:"Aleman"}),Object(p.jsx)(I.e,{onClick:function(){return v("it")},children:"Italiano"}),Object(p.jsx)(I.e,{onClick:function(){return v("jp")},children:"Japon\xe9s"})]})]})]})]}),Object(p.jsxs)(W.a,{mx:"auto",justifyContent:"center",templateColumns:"repeat(auto-fill, minmax(320px, 350px))",gap:6,width:{lg:"container.lg"},p:"5",children:[!s&&r.map((function(e){return Object(p.jsx)(Zr,Object(d.a)({},e),e._id)})),!s&&0===r.length&&Object(p.jsx)(ie.a,{children:"Ninguna actividad fue encontrada :("})]})]})};var Kr=function(){return Object(p.jsx)(l.a,{theme:o,children:Object(p.jsx)("div",{className:"App",children:Object(p.jsx)(S.a,{children:Object(p.jsx)(k,{children:Object(p.jsxs)(h.d,{children:[Object(p.jsx)(h.b,{path:"/activities",component:Hr}),Object(p.jsx)(h.b,{path:"/test",component:Vr}),Object(p.jsx)(h.b,{exact:!0,path:"/",component:yr}),Object(p.jsx)(x,{path:"/dashboard",redirectTo:"/login",component:Te}),Object(p.jsx)(h.b,{path:"/login",component:Dr}),Object(p.jsx)(h.b,{path:"/signup",component:Wr}),Object(p.jsx)(x,{path:"/worksheets/:id/edit",type:"user",redirectTo:"/login",component:mr}),Object(p.jsx)(h.b,{path:"/worksheets/:id/practice",component:Pr}),Object(p.jsx)(h.b,{path:"*",component:Lr})]})})})})})},Gr=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,314)).then((function(t){var r=t.getCLS,a=t.getFID,n=t.getFCP,c=t.getLCP,i=t.getTTFB;r(e),a(e),n(e),c(e),i(e)}))};i.a.render(Object(p.jsx)(n.a.StrictMode,{children:Object(p.jsx)(Kr,{})}),document.getElementById("root")),Gr()}},[[255,1,2]]]);
//# sourceMappingURL=main.65f9c6b2.chunk.js.map
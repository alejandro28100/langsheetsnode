{"version":3,"sources":["theme/index.js","components/WorksheetCard.js","hooks/useBodyBackground.js","svgs/logo.svg","svgs/missingWord.svg","svgs/wordOrder.svg","components/Logo.js","components/Navbar.js","hooks/useDocumentTitle.js","utils/index.js","pages/Home.js","components/Form/Navbar.js","components/Form/WorksheetTitle.js","components/Slate/Editable.js","components/LanguagePicker.js","components/PublicSwitch.js","components/Slate/plugins/withTextAlignment.js","components/Slate/plugins/withExerciseBlock.js","components/Slate/plugins/withMissingWordExercise.js","components/Slate/plugins/withWordOrderExercise.js","hooks/useSlateEditor.js","utils/objects.js","utils/exerciseBlocks.js","context/socket.js","components/Slate/Inline/MissingWord.js","components/Slate/Inline/Leaf.js","components/Slate/Block/DefaultElement.js","components/Slate/Block/MissingWordExerciseParagraph.js","components/Slate/Block/WordOrderExerciseParagraph.js","components/Slate/Block/Heading.js","utils/slate.js","components/Slate/ToolbarButton.js","components/ScoringSection.js","components/Slate/Block/ExerciseBlock.js","hooks/useSlateRender.js","hooks/useIsFullscreen.js","components/Slate/commands/index.js","components/Form/ActionsMenu.js","components/Form/Toolbar.js","pages/Form.js","hooks/useSlateDecorate.js","pages/Practice.js","pages/NotFounded.js","App.js","reportWebVitals.js","index.js"],"names":["theme","extendTheme","colors","brand","50","100","200","300","400","500","600","700","800","900","LANGUAGES","es","en","fr","ru","de","ja","zh","WorksheetCard","lang","title","id","_id","deleteSheet","createdAt","isPublic","useState","isAlertOpen","setIsAlertOpen","onClose","cancelRef","useRef","boxShadow","background","height","borderRadius","width","padding","flexDirection","noOfLines","fontFamily","fontSize","fontWeight","mr","as","SiGoogletranslate","MdPublic","RiGitRepositoryPrivateFill","pr","py","Flex","alignItems","justifyContent","spacing","size","colorScheme","variant","hasArrow","label","href","icon","FaChalkboardTeacher","RiFileEditFill","onClick","e","MdDelete","isOpen","leastDestructiveRef","ref","ml","defaultProps","useBodyBackground","backgroundColor","useEffect","document","body","style","propTypes","PropTypes","string","isRequired","_g","_defs","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgLogo","_ref","svgRef","titleId","props","viewBox","fill","xmlns","clipPath","d","_path","_path2","_path3","_path4","ForwardRef","SvgMissingWord","stroke","className","_rect","_rect2","_rect3","SvgWordOrder","x","y","rx","strokeLinecap","strokeLinejoin","Logo","withIcon","iconSize","w","h","getIconSize","display","LogoIcon","color","Navbar","leftActions","rightActions","sm","useMediaQuery","isTabletOrLower","px","shadow","sx","Button","children","HiMenuAlt4","zIndex","useDocumentTitle","isFullscreen","fullscreen","mozFullScreen","webkitIsFullScreen","msFullscreenElement","parseWorksheets","worksheets","map","parseWorksheet","stringifyWorkshet","worksheet","updatedWorksheet","content","JSON","stringify","parse","initialState","error","undefined","loading","reducer","state","action","type","payload","console","warn","Home","history","useHistory","toast","useToast","useReducer","dispatch","a","newWorksheet","published","text","Date","fetch","method","headers","response","json","ok","push","updatedWorksheets","filter","description","status","durarion","isClosable","getWorksheets","worksheetsHandler","createSheet","isIndeterminate","message","maxW","my","textAlign","mx","md","lg","gap","placeItems","templateColumns","base","isLoaded","leftIcon","HiDocumentAdd","_focus","outline","mt","flexGrow","arrowSize","placement","referrerPolicy","transition","cursor","m","handlePrint","FaPrint","WorksheetTitle","textRef","current","focus","required","value","onChange","newValue","property","placeholder","CustomEditable","decorate","renderElement","renderLeaf","readOnly","p","Editable","LanguagePicker","PublicSwitch","isChecked","withTextAlignment","editor","normalizeNode","entry","node","path","Editor","isBlock","alignment","Transforms","setNodes","at","withExerciseBlock","Node","has","Path","next","insertNodes","previous","log","withMissingWordExercise","includes","hasMissingWords","descendants","missingWord","isNode","Element","isElement","firstNodePath","first","lastNodePath","last","child","childPath","equals","select","hanging","get","insertText","offset","withWordOrderExercise","isIntoAnExerciseBlock","ancestors","hasDivisions","split","useSlateEditor","useMemo","withHistory","withReact","createEditor","shuffleArray","array","Error","temporaryValue","randomIndex","result","currentIndex","Math","floor","random","getExerciseBlockProps","showAnswers","checkExercise","getDivisions","config","withIDs","word","nanoid","isCorrect","shuffle","socket","io","autoConnect","SocketContext","createContext","Mark","FaCheck","FaTimes","MissingWordInput","useContext","leaf","correctAnswer","userAnswer","focused","user","useSlate","ReactEditor","findPath","handleOnFocus","event","emit","username","auth","userID","blur","handleOnChange","properties","isAnswered","trim","handleIsCorrect","toLowerCase","inputValue","position","bg","_hover","onFocus","onBlur","UserLabel","DotAnimation","MissingWordEditable","isPrinting","attributes","borderBottom","Leaf","isReadOnly","useReadOnly","division","bold","italic","underline","strike","DefaultElement","element","MissingWordExerciseParagraph","WordOrderPractice","textContent","userAnswersRef","userAnswers","correctAnswers","flexWrap","border","onDragEnd","destination","items","list","startIndex","endIndex","Array","from","splice","removed","reorder","index","checkAnswers","droppableId","direction","provided","snapshot","innerRef","droppableProps","isDraggingOver","WordComponent","DraggableWordComponent","getBg","isDragging","draggableId","userSelect","draggableProps","dragHandleProps","answer","WordOrderExerciseParagraph","Heading","isBlockActive","format","nodes","match","n","isMarkActive","marks","toggleMark","removeMark","addMark","ToolbarButton","customOnClick","formatKey","rest","handleClick","isActive","toggleBlock","ButtonsSection","exerciseBlockPath","ScoringSection","EXERCISES_TYPES","EXERCISES_HELP_TEXT","MissingWordIcon","Tools","exerciseType","Range","isCollapsed","selection","alert","handleCreateMissingWord","borderBottomWidth","opacity","ExerciseBlock","isFocused","useFocused","isSelected","useSelected","isExpanded","fragment","borderBottomRadius","in","animateOpacity","contentEditable","borderTopRadius","IoMdHelpCircleOutline","ExerciseList","useSlateRender","useCallback","useIsFullscreen","initialValue","setValue","handler","addEventListener","removeEventListener","createExercise","newNode","zoom","setTimeout","window","print","handleOpenFullscreen","screen","documentElement","requestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","msRequestFullscreen","handleCloseFullscreen","exitFullscreen","mozCancelFullScreen","webkitExitFullscreen","msExitFullscreen","ActionsMenu","saveWorksheet","RiDraftFill","FaFileUpload","WordOrderIcon","BsFullscreenExit","BsFullscreen","DesktopToolbar","isDesktop","flex","HiViewGridAdd","aria-label","FaHeading","FaBold","FaItalic","FaUnderline","FaStrikethrough","FaAlignLeft","FaAlignCenter","FaAlignRight","FaAlignJustify","ACTIONS","isWritingMode","savingWorksheet","Form","useParams","ranges","Text","isText","parent","parts","forEach","part","anchor","useSlateDecorate","duration","getWorksheet","host","location","newContent","templateRows","rowSpan","colSpan","top","gridTemplateRows","gridTemplateColumns","FaArrowLeft","pt","colStart","isLoading","borderTop","Toolbar","gridColumn","gridRow","flexDir","minH","HiDotsVertical","IconButton","overflowX","bottom","right","orientation","deselect","MdKeyboardHide","FaChevronUp","FaHome","users","UsersList","max","name","src","UserNameForm","inputRef","handleSetUserName","onSubmit","Practice","connect","on","commingUsers","newUser","err","offAny","off","maxWidth","Provider","NotFounded","App","exact","component","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.c5aea17e.chunk.js","sourcesContent":["import { extendTheme } from \"@chakra-ui/react\"\r\n\r\nconst theme = extendTheme({\r\n    colors: {\r\n        brand: {\r\n            50: \"#eaeaff\",\r\n            100: \"#c2c2f3\",\r\n            200: \"#9b9ae6\",\r\n            300: \"#7371da\",\r\n            400: \"#4c48cf\",\r\n            500: \"#332fb6\",\r\n            600: \"#27258e\",\r\n            700: \"#1b1a66\",\r\n            800: \"#0f1040\",\r\n            900: \"#06041a\",\r\n        }\r\n    }\r\n})\r\n\r\nexport default theme;","import React, { Fragment, useState, useRef } from 'react'\r\nimport PropTypes from \"prop-types\"\r\nimport { Text, Icon, ButtonGroup, IconButton, Button, Spacer, Flex, Tooltip, AlertDialog, AlertDialogBody, AlertDialogOverlay, AlertDialogContent, AlertDialogHeader, AlertDialogFooter } from \"@chakra-ui/react\"\r\n\r\nimport { FaChalkboardTeacher } from \"react-icons/fa\";\r\nimport { MdDelete, MdPublic } from \"react-icons/md\";\r\nimport { RiFileEditFill } from \"react-icons/ri\";\r\nimport { RiGitRepositoryPrivateFill } from \"react-icons/ri\";\r\nimport { SiGoogletranslate } from \"react-icons/si\";\r\n\r\n\r\nconst LANGUAGES = {\r\n    es: \"Español\",\r\n    en: \"Inglés\",\r\n    fr: \"Francés\",\r\n    ru: \"Ruso\",\r\n    de: \"Alemán\",\r\n    ja: \"Japonés\",\r\n    zh: \"Chino\"\r\n}\r\n\r\nfunction WorksheetCard({ lang, title, _id: id, createdAt, deleteSheet, isPublic }) {\r\n    const [isAlertOpen, setIsAlertOpen] = useState(false);\r\n    const onClose = () => setIsAlertOpen(false);\r\n    const cancelRef = useRef();\r\n    return (\r\n        <Fragment>\r\n\r\n            <Flex boxShadow=\"base\" background=\"white\" height=\"40\" borderRadius=\"xl\" width=\"full\">\r\n                <Flex padding=\"5\" flexDirection=\"column\">\r\n                    <Text title={title === \"\" ? \"Sin título\" : title} noOfLines={2} fontFamily=\"sans-serif\" fontSize=\"large\" fontWeight=\"semibold\">{title === \"\" ? \"Sin título\" : title}</Text>\r\n                    <Spacer />\r\n\r\n                    {LANGUAGES[lang] && <Text >\r\n                        <Icon mr=\"2\" as={SiGoogletranslate} />\r\n                        {LANGUAGES[lang]}\r\n                    </Text>}\r\n\r\n                    <Text noOfLines={1} title={`Actividad ${isPublic ? \"Pública\" : \"Privada\"}`}>\r\n                        <Icon mr=\"2\" as={isPublic ? MdPublic : RiGitRepositoryPrivateFill} />\r\n                        Actividad {isPublic ? \"Pública\" : \"Privada\"}\r\n                    </Text>\r\n\r\n\r\n                </Flex>\r\n                <Spacer />\r\n                <Flex pr=\"5\" py=\"5\">\r\n                    <ButtonGroup as={Flex} flexDirection=\"column\" alignItems=\"center\" justifyContent=\"space-evenly\" spacing=\"0\" size=\"lg\" colorScheme=\"brand\" variant=\"ghost\">\r\n\r\n                        <Tooltip hasArrow label=\"Comenzar Actividad\" >\r\n                            <IconButton as=\"a\" href={`/worksheets/${id}/practice`} icon={<Icon as={FaChalkboardTeacher} />} />\r\n                        </Tooltip>\r\n\r\n                        <Tooltip hasArrow label=\"Editar Actividad\">\r\n                            <IconButton as=\"a\" href={`/worksheets/${id}/edit`} icon={<Icon as={RiFileEditFill} />} />\r\n                        </Tooltip>\r\n\r\n                        <Tooltip hasArrow label=\"Eliminar Actividad\">\r\n                            <IconButton onClick={e => setIsAlertOpen(true)} icon={<Icon as={MdDelete} />} />\r\n                        </Tooltip>\r\n                    </ButtonGroup>\r\n                </Flex>\r\n            </Flex >\r\n\r\n            <AlertDialog\r\n                isOpen={isAlertOpen}\r\n                leastDestructiveRef={cancelRef}\r\n                onClose={onClose}\r\n            >\r\n                <AlertDialogOverlay>\r\n                    <AlertDialogContent>\r\n                        <AlertDialogHeader fontSize=\"lg\" fontWeight=\"bold\">\r\n                            Eliminar Actividad\r\n                        </AlertDialogHeader>\r\n\r\n                        <AlertDialogBody>\r\n                            ¿Estás seguro de querer borrar esta actividad? Esta acción es irreversible.\r\n                        </AlertDialogBody>\r\n\r\n                        <AlertDialogFooter>\r\n                            <Button ref={cancelRef} onClick={onClose}>\r\n                                Cancelar\r\n                            </Button>\r\n                            <Button colorScheme=\"red\" onClick={e => deleteSheet(id)} ml={3}>\r\n                                Eliminar\r\n                            </Button>\r\n                        </AlertDialogFooter>\r\n                    </AlertDialogContent>\r\n                </AlertDialogOverlay>\r\n            </AlertDialog>\r\n        </Fragment >\r\n    )\r\n}\r\n\r\nWorksheetCard.defaultProps = {\r\n    lang: \"\",\r\n    isPublic: true,\r\n}\r\n\r\nWorksheetCard.propTypes = {\r\n    lang: PropTypes.oneOf([\"en\", \"fr\", \"de\", \"ja\", \"es\", \"zh\", \"ru\", \"\"]).isRequired,\r\n    title: PropTypes.string.isRequired,\r\n    _id: PropTypes.string.isRequired,\r\n    isPublic: PropTypes.bool.isRequired,\r\n    createdAt: PropTypes.string.isRequired,\r\n    deleteSheet: PropTypes.func.isRequired,\r\n}\r\n\r\nexport default WorksheetCard\r\n\r\n\r\n","import { useEffect } from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nconst useBodyBackground = (backgroundColor) => {\r\n    //Set the color value to the body background on mount \r\n\r\n    useEffect(() => {\r\n        document.body.style.background = backgroundColor;\r\n    }, [backgroundColor]);\r\n}\r\n\r\n\r\n\r\n\r\nuseBodyBackground.propTypes = {\r\n    backgroundColor: PropTypes.string.isRequired,\r\n}\r\n\r\nexport default useBodyBackground\r\n","var _g, _defs;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgLogo(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 70,\n    height: 78,\n    viewBox: \"0 0 70 78\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _g || (_g = /*#__PURE__*/React.createElement(\"g\", {\n    clipPath: \"url(#clip0)\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M69.7126 21.9061L55.7683 3.7113L29.024 0.0596367C25.5601 -0.413512 22.3645 1.97751 21.8856 5.39973L14.2604 59.911C13.7815 63.3332 16.2016 66.4903 19.6655 66.9635L56.4828 71.9905C59.9467 72.4636 63.1423 70.0726 63.6212 66.6504L69.8733 21.9541L69.7126 21.9061Z\",\n    fill: \"#605EC5\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M69.8201 21.991L53.7102 19.7918L55.9559 3.73657L69.8201 21.991Z\",\n    fill: \"#8987DE\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M57.2476 29.9889L30.5532 26.3441L30.0225 30.138L56.7169 33.7828L57.2476 29.9889Z\",\n    fill: \"white\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M55.9146 39.52L29.2202 35.8752L28.6895 39.6692L55.3839 43.3139L55.9146 39.52Z\",\n    fill: \"white\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M27.8744 45.4979L27.4214 48.7365L50.65 51.908L51.103 48.6695L27.8744 45.4979Z\",\n    fill: \"white\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M49.6339 26.3764L33.2997 10.2388H6.3008C2.80408 10.2388 -0.0300293 13.0394 -0.0300293 16.4934V71.5224C-0.0300293 74.9771 2.80474 77.777 6.3008 77.777H43.4684C46.9651 77.777 49.7992 74.9764 49.7992 71.5224V26.4016L49.6339 26.3764Z\",\n    fill: \"#252388\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M49.752 26.4463H33.4893V10.2388L49.752 26.4463Z\",\n    fill: \"#4846AE\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M38.4054 36.0681H11.4578V39.8981H38.4054V36.0681Z\",\n    fill: \"white\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M38.4054 45.6899H11.4578V49.5198H38.4054V45.6899Z\",\n    fill: \"white\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M34.9068 55.4049H11.4578V58.6742H34.9068V55.4049Z\",\n    fill: \"white\"\n  }))), _defs || (_defs = /*#__PURE__*/React.createElement(\"defs\", null, /*#__PURE__*/React.createElement(\"clipPath\", {\n    id: \"clip0\"\n  }, /*#__PURE__*/React.createElement(\"rect\", {\n    width: 70,\n    height: 77.7778,\n    fill: \"white\"\n  })))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgLogo);\nexport default __webpack_public_path__ + \"static/media/logo.5139c054.svg\";\nexport { ForwardRef as ReactComponent };","var _path, _path2, _path3, _path4;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgMissingWord(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    id: \"Capa_2\",\n    \"data-name\": \"Capa 2\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 42 16\",\n    stroke: \"currentColor\",\n    fill: \"currentColor\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M16.14,13.06c-.39,0-.74-.5-1-1.51a19.28,19.28,0,0,1-.42-2c-.43.06-1,.17-1.71.32l-1.69.35c-.22.56-.58,1.38-1.1,2.45a.61.61,0,0,1-.55.36.7.7,0,0,1-.46-.19.61.61,0,0,1-.2-.46A11.73,11.73,0,0,1,10,10a.7.7,0,0,1-.1-.38c0-.35.2-.57.62-.67.49-.91,1.1-2,1.84-3.14,1-1.61,1.64-2.42,1.89-2.42s.56.23.69.7l.4,2.15.95,4.44.36,1a2.39,2.39,0,0,1,.19.69.63.63,0,0,1-.2.46A.64.64,0,0,1,16.14,13.06Zm-2.26-7.3-1.82,3q.76-.21,2.34-.48Z\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    className: \"cls-1\",\n    d: \"M23.38,12.61a10.06,10.06,0,0,1-3.67.57.71.71,0,0,1-.52-.26.77.77,0,0,1-.25-.54V10.53q0-.91.12-2.61c.08-1.22.13-2.1.14-2.64s0-1,.07-1.75a.57.57,0,0,1,.21-.43,7,7,0,0,1,2-.26,3.58,3.58,0,0,1,2.16.76A2.65,2.65,0,0,1,24.8,5.78a3.05,3.05,0,0,1-1.27,2.59,4.4,4.4,0,0,1,1.43.9,1.57,1.57,0,0,1,.48,1.09,2,2,0,0,1-.84,1.49A4.11,4.11,0,0,1,23.38,12.61ZM22.17,9.25l-.68-.1H21a4.84,4.84,0,0,1-.74-.05c0,.53,0,1,0,1.43v1.33a8.26,8.26,0,0,0,2.73-.48,2.71,2.71,0,0,0,.86-.53c.26-.22.39-.39.39-.5s-.28-.43-.82-.68A7.17,7.17,0,0,0,22.17,9.25Zm-.72-5.11a7.5,7.5,0,0,0-1,0V5.3l-.13,2.47c.61.05.93.08,1,.07a2.67,2.67,0,0,0,1.58-.6,1.83,1.83,0,0,0,.66-1.46,1.45,1.45,0,0,0-.67-1.12A2.27,2.27,0,0,0,21.45,4.14Z\"\n  })), _path3 || (_path3 = /*#__PURE__*/React.createElement(\"path\", {\n    className: \"cls-1\",\n    d: \"M33,5.7a.67.67,0,0,1-.62-.48,1.11,1.11,0,0,0-.33-.49,1.76,1.76,0,0,0-.66-.07c-.62,0-1.31.47-2.06,1.41a5.9,5.9,0,0,0-1.53,3.61,2,2,0,0,0,.53,1.42,1.68,1.68,0,0,0,1.31.61A2.85,2.85,0,0,0,31,11.37a8.66,8.66,0,0,0,1.14-.75,1.09,1.09,0,0,1,.54-.27.57.57,0,0,1,.46.21.65.65,0,0,1,.19.46.68.68,0,0,1-.24.51A5.19,5.19,0,0,1,29.66,13a2.92,2.92,0,0,1-2.24-1,3.37,3.37,0,0,1-.88-2.33,7.19,7.19,0,0,1,1.81-4.44,4.12,4.12,0,0,1,3.06-1.89,4.86,4.86,0,0,1,.56,0,1.9,1.9,0,0,1,.44.09A.67.67,0,0,1,33,3.14c.29,0,.48.2.56.58A7.52,7.52,0,0,1,33.65,5a.78.78,0,0,1-.14.46A.56.56,0,0,1,33,5.7Z\"\n  })), _path4 || (_path4 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M39.8,0H2.2a2,2,0,0,0-2,2V14a2,2,0,0,0,2,2H39.8a2,2,0,0,0,2-2V2A2,2,0,0,0,39.8,0Zm-.65,14.26H2.86A.91.91,0,0,1,2,13.35V2.7a1,1,0,0,1,1-1h36a1,1,0,0,1,1.13,1.07V3a.68.68,0,0,1,0,.12h0v10.2A.9.9,0,0,1,39.15,14.26Z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgMissingWord);\nexport default __webpack_public_path__ + \"static/media/missingWord.646310c6.svg\";\nexport { ForwardRef as ReactComponent };","var _rect, _rect2, _rect3, _path, _path2;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgWordOrder(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 16,\n    height: 16,\n    viewBox: \"0 0 16 16\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _rect || (_rect = /*#__PURE__*/React.createElement(\"rect\", {\n    x: 12,\n    y: 6,\n    width: 4,\n    height: 4,\n    rx: 0.5,\n    fill: \"#4846AE\"\n  })), _rect2 || (_rect2 = /*#__PURE__*/React.createElement(\"rect\", {\n    x: 6,\n    y: 6,\n    width: 4,\n    height: 4,\n    rx: 0.5,\n    fill: \"#4846AE\"\n  })), _rect3 || (_rect3 = /*#__PURE__*/React.createElement(\"rect\", {\n    y: 6,\n    width: 4,\n    height: 4,\n    rx: 0.5,\n    fill: \"#4846AE\"\n  })), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12.5218 11.5161C12.0215 12.0161 11.5219 12.5161 10.9268 12.8914C10.0216 13.5162 8 13.5 6.99997 13.5C5.98032 13.4885 4.99928 13.0089 3.99992 12.5\",\n    stroke: \"#616161\",\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M4.32786 13.9956C4.10086 13.6319 4.02894 13.2646 3.80915 12.8979C3.72803 12.7626 3.64479 12.6383 3.57362 12.5089C3.41056 12.2124 3.5 12 3.78875 12.0797C3.2496 12.0797 4.5 11.9506 5.07287 11.9506C5.44509 11.9511 6 11.9075 6.13559 11.9075\",\n    stroke: \"#616161\",\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgWordOrder);\nexport default __webpack_public_path__ + \"static/media/wordOrder.45b7dea5.svg\";\nexport { ForwardRef as ReactComponent };","import React from 'react'\r\nimport PropTypes from \"prop-types\";\r\nimport { Button, Text, Icon } from \"@chakra-ui/react\"\r\nimport { Logo as LogoIcon } from \"../svgs\"\r\n\r\nconst getIconSize = (size) => {\r\n    switch (size) {\r\n        case \"sm\":\r\n            return { w: \"1em,\", h: \"1em\" };\r\n        case \"lg\":\r\n            return { w: \"3em\", h: \"3m\" };\r\n        //Return md values as default\r\n        default:\r\n            return { w: \"2.5em\", h: \"2.5em\" };\r\n    }\r\n}\r\n\r\nconst Logo = ({ withIcon, size }) => {\r\n\r\n    const iconSize = getIconSize(size);\r\n    return (\r\n        <Button variant=\"unstyled\" display=\"flex\" as=\"a\" href=\"/\">\r\n            {withIcon && <Icon mr=\"2\" {...iconSize} as={LogoIcon} title=\"LangSheets\" />}\r\n            <Text fontFamily=\"cursive\" fontSize=\"large\" fontWeight=\"semibold\" color=\"brand.500\" mr=\"2\">LangSheets</Text>\r\n        </Button>\r\n    )\r\n}\r\n\r\nLogo.defaultProps = {\r\n    withIcon: true,\r\n    size: \"md\"\r\n}\r\n\r\nLogo.propTypes = {\r\n    withIcon: PropTypes.bool.isRequired,\r\n    size: PropTypes.oneOf([\"sm\", \"md\", \"lg\"]),\r\n}\r\n\r\nexport default Logo\r\n","import React, { Fragment } from 'react'\r\nimport PropTypes from \"prop-types\";\r\nimport { Flex, Spacer, Icon, Menu, MenuList, MenuButton, Button, useMediaQuery } from \"@chakra-ui/react\"\r\nimport { HiMenuAlt4 } from \"react-icons/hi\";\r\nimport Logo from \"./Logo\";\r\n\r\n\r\nfunction Navbar({ leftActions, rightActions, withIcon, sm }) {\r\n    const [isTabletOrLower] = useMediaQuery([\"(max-width:900px)\"]);\r\n    return (\r\n        <Flex px=\"10\" background=\"white\" py=\"2\" shadow=\"sm\"\r\n            sx={{\r\n                \"@media print\": {\r\n                    display: \"none\",\r\n                }\r\n            }}\r\n        >\r\n            <Logo {...withIcon} />\r\n\r\n            {\r\n                isTabletOrLower\r\n                    ? (\r\n                        sm && <Fragment>\r\n                            <Spacer />\r\n                            <Menu>\r\n                                <MenuButton colorScheme=\"purple\" variant=\"ghost\" as={Button} children={<Icon as={HiMenuAlt4} />} />\r\n                                <MenuList zIndex=\"dropdown\">\r\n                                    {sm}\r\n                                </MenuList>\r\n                            </Menu>\r\n                        </Fragment>\r\n                    )\r\n                    : (\r\n                        <Fragment>\r\n\r\n                            {leftActions}\r\n                            <Spacer />\r\n                            {rightActions}\r\n                        </Fragment>\r\n                    )\r\n            }\r\n\r\n        </Flex>\r\n    )\r\n};\r\n\r\nNavbar.defaultProps = {\r\n    withIcon: true\r\n}\r\n\r\nNavbar.propTypes = {\r\n    sm: PropTypes.node,\r\n    leftActions: PropTypes.node,\r\n    rightActions: PropTypes.node,\r\n    withIcon: PropTypes.bool.isRequired,\r\n}\r\n\r\nexport default Navbar\r\n","import { useEffect } from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nconst useDocumentTitle = title => {\r\n    useEffect(() => {\r\n        document.title = title\r\n    }, [title]);\r\n}\r\n\r\nuseDocumentTitle.propTypes = {\r\n    title: PropTypes.string.isRequired,\r\n}\r\n\r\nexport default useDocumentTitle\r\n","export function isFullscreen() {\r\n    return (\r\n        document.fullscreen ||\r\n        document.mozFullScreen ||\r\n        document.webkitIsFullScreen ||\r\n        document.msFullscreenElement);\r\n};\r\n\r\nexport function parseWorksheets(worksheets) {\r\n    return worksheets.map(parseWorksheet);\r\n}\r\n\r\nexport function stringifyWorkshet(worksheet) {\r\n    const updatedWorksheet = { ...worksheet };\r\n    updatedWorksheet.content = JSON.stringify(worksheet.content);\r\n    return updatedWorksheet;\r\n}\r\n\r\nexport function parseWorksheet(worksheet) {\r\n    const updatedWorksheet = { ...worksheet };\r\n    updatedWorksheet.content = JSON.parse(worksheet.content);\r\n    return updatedWorksheet;\r\n}","import React, { useEffect, Fragment, useReducer } from 'react'\r\nimport { useHistory } from \"react-router-dom\"\r\n\r\nimport { Grid, Container, Text, Flex, Icon, Button, Skeleton, Alert, AlertDescription, AlertIcon, Progress, useToast } from \"@chakra-ui/react\"\r\n\r\nimport WorksheetCard from \"../components/WorksheetCard\";\r\n\r\nimport { HiDocumentAdd } from \"react-icons/hi\";\r\nimport useBodyBackground from '../hooks/useBodyBackground';\r\nimport Navbar from '../components/Navbar';\r\nimport useDocumentTitle from '../hooks/useDocumentTitle';\r\nimport { parseWorksheets } from '../utils';\r\n\r\n// const examples = [\r\n//     {\r\n//         \"id\": \"67e10aff-5431-4c51-8639-06768ebdf48f\",\r\n//         \"title\": \"Frases Mexicanas\",\r\n//         \"content\": \"[{\\\"type\\\":\\\"heading 2xl\\\",\\\"children\\\":[{\\\"text\\\":\\\"Instrucciones : \\\"},{\\\"text\\\":\\\"Rellena \\\",\\\"bold\\\":true},{\\\"text\\\":\\\"los \\\"},{\\\"text\\\":\\\"espacios \\\",\\\"italic\\\":true},{\\\"text\\\":\\\"vacíos como corresponda usando las palabras a continuación\\\"}],\\\"textAlign\\\":\\\"left\\\"},{\\\"type\\\":\\\"subtitle\\\",\\\"children\\\":[{\\\"text\\\":\\\"\\\"}]},{\\\"type\\\":\\\"heading xl\\\",\\\"children\\\":[{\\\"text\\\":\\\"Toluca , nieto ,tortas, pelos, taco, corrió.\\\",\\\"bold\\\":true,\\\"italic\\\":true}],\\\"textAlign\\\":\\\"center\\\"},{\\\"type\\\":\\\"paragraph\\\",\\\"textAlign\\\":\\\"left\\\",\\\"children\\\":[{\\\"text\\\":\\\"\\\"}]},{\\\"type\\\":\\\"paragraph\\\",\\\"textAlign\\\":\\\"left\\\",\\\"children\\\":[{\\\"text\\\":\\\"\\\"}]},{\\\"type\\\":\\\"exercise-block\\\",\\\"exerciseType\\\":\\\"missing-word\\\",\\\"children\\\":[{\\\"type\\\":\\\"exercise-list-items\\\",\\\"children\\\":[{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"1. De lengua me hecho un \\\"},{\\\"text\\\":\\\"taco\\\",\\\"missingWord\\\":true},{\\\"text\\\":\\\" .\\\"}]},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"\\\"}],\\\"textAlign\\\":\\\"left\\\"},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"\\\"}],\\\"textAlign\\\":\\\"left\\\"},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"2. ¿Qué Pachuca por \\\"},{\\\"text\\\":\\\"Toluca\\\",\\\"missingWord\\\":true},{\\\"text\\\":\\\" ?\\\"}],\\\"textAlign\\\":\\\"left\\\"},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"\\\"}],\\\"textAlign\\\":\\\"left\\\"},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"\\\"}],\\\"textAlign\\\":\\\"left\\\"},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"3. Mejor aquí \\\"},{\\\"text\\\":\\\"corrió\\\",\\\"missingWord\\\":true},{\\\"text\\\":\\\" que aquí quedó… \\\"}],\\\"textAlign\\\":\\\"left\\\"},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"\\\"}],\\\"textAlign\\\":\\\"left\\\"},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"\\\"}],\\\"textAlign\\\":\\\"left\\\"},{\\\"type\\\":\\\"paragraph\\\",\\\"textAlign\\\":\\\"left\\\",\\\"children\\\":[{\\\"text\\\":\\\"4. Abuelita soy tu \\\"},{\\\"text\\\":\\\"nieto\\\",\\\"missingWord\\\":true},{\\\"text\\\":\\\" !\\\"}]},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"\\\"}],\\\"textAlign\\\":\\\"left\\\"},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"\\\"}],\\\"textAlign\\\":\\\"left\\\"},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"5. Hablar sin \\\"},{\\\"text\\\":\\\"pelos\\\",\\\"missingWord\\\":true},{\\\"text\\\":\\\" en la lengua.\\\"}],\\\"textAlign\\\":\\\"left\\\"},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"\\\"}],\\\"textAlign\\\":\\\"left\\\"},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"\\\"}],\\\"textAlign\\\":\\\"left\\\"},{\\\"type\\\":\\\"paragraph\\\",\\\"textAlign\\\":\\\"left\\\",\\\"children\\\":[{\\\"text\\\":\\\"6. Me quedé como el perro de las dos \\\"},{\\\"text\\\":\\\"tortas\\\",\\\"missingWord\\\":true},{\\\"text\\\":\\\" .\\\"}]}]}]},{\\\"type\\\":\\\"paragraph\\\",\\\"textAlign\\\":\\\"left\\\",\\\"children\\\":[{\\\"text\\\":\\\"\\\"}]},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"\\\"}]}]\",\r\n//         \"createdAt\": \"2021-04-24T01:50:11.979Z\",\r\n//         \"lang\": \"es\",\r\n//         \"isPublic\": false\r\n//     },\r\n//     {\r\n//         \"id\": \"1ee461c0-6a59-4092-9832-c2181cb5c402\",\r\n//         \"title\": \"El presente de Indicativo\",\r\n//         \"content\": \"[{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"El Presente de Indicativo\\\",\\\"bold\\\":true},{\\\"text\\\":\\\", en español indica que la acción expresada por el verbo se da en el mismo momento en el que se habla. El presente de indicativo es uno de  los tiempos verbales más utilizados y versátiles del español. Por esta misma razón puede ser utilizado en muchos contextos diferentes. \\\"}]},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"\\\"}]},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"Este tiempo verbal no tiene por qué estar ligado únicamente al presente (ahora) sino que puede estar desligado del tiempo o referirse al pasado o al futuro.  \\\"}]},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"\\\"}]},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"Es un tiempo verbal muy versátil que nos sirve tanto para hablar del presente (\\\"},{\\\"text\\\":\\\"“¿Dónde vives?”\\\",\\\"italic\\\":true},{\\\"text\\\":\\\"), como del futuro (\\\"},{\\\"text\\\":\\\"“Este verano voy a Sicilia”\\\",\\\"italic\\\":true},{\\\"text\\\":\\\"), del pasado (\\\"},{\\\"text\\\":\\\"“Cervantes publica la primera parte del Quijote en 1605”\\\",\\\"italic\\\":true},{\\\"text\\\":\\\") y de verdades inmutables (\\\"},{\\\"text\\\":\\\"“Dos y dos son cuatro”/ “Lo que no mata, engorda” / “El aceite flota en el agua\\\",\\\"italic\\\":true},{\\\"text\\\":\\\"”).\\\"}]},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"\\\"}]},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"Además, usamos el presente para hablar de:\\\"}]},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"\\\"}]},{\\\"text\\\":\\\"–    Cualidades de las cosas\\\",\\\"bold\\\":true},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"\\\",\\\"italic\\\":true}]},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"Es una casa antigua y tiene un patio grande\\\",\\\"italic\\\":true}]},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"Ese libro vale 20 euros\\\",\\\"italic\\\":true}]},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"\\\"}]},{\\\"text\\\":\\\"–    Situaciones regulares\\\",\\\"bold\\\":true},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"\\\",\\\"italic\\\":true}]},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"Pedro normalmente 8 horas al día\\\",\\\"italic\\\":true}]},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"Juan vive en Motril y trabaja en Granada\\\",\\\"italic\\\":true}]},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"\\\"}]},{\\\"text\\\":\\\"–    Situaciones momentáneas\\\",\\\"bold\\\":true},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"\\\",\\\"italic\\\":true}]},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"Mi novio esta semana está en Madrid\\\",\\\"italic\\\":true}]},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"Hoy no puedo trabajar\\\",\\\"italic\\\":true}]},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"\\\"}]},{\\\"text\\\":\\\"–    Cosas que no cambian\\\",\\\"bold\\\":true},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"\\\"}]},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"Los gatos comen ratones\\\",\\\"italic\\\":true}]},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"En verano hace calor\\\",\\\"italic\\\":true}]},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"\\\"}]},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"\\\"}]},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"El presente del indicativo también se usa para describir:\\\"}]},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"\\\"}]},{\\\"text\\\":\\\"    \\\"},{\\\"text\\\":\\\"* Acciones habituales\\\",\\\"bold\\\":true},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"\\\",\\\"bold\\\":true}]},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"Cuando una acción se repite en el presente, el pasado y el futuro, normalmente se emplea el presente del indicativo  para describirla.\\\"}]},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"\\\"}]},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"Ejemplo:    \\\"},{\\\"text\\\":\\\" Siempre leo en voz alta.\\\",\\\"italic\\\":true}]},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"\\\"}]},{\\\"text\\\":\\\"* Acciones futuras\\\",\\\"bold\\\":true},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"\\\"}]},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"A veces se describen acciones del futuro empleando el presente para darles más énfasis, color y vida.\\\"}]},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"\\\"}]},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"Ejemplos:    \\\"}]},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"La fiesta empieza a las nueve.\\\",\\\"italic\\\":true}]},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"La semana que viene hay un eclipse del sol.\\\",\\\"italic\\\":true}]},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"Si abres la boca, ¡estás muerto!\\\",\\\"italic\\\":true}]},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"\\\"}]},{\\\"text\\\":\\\"* El futuro perifrástico\\\",\\\"bold\\\":true},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"\\\"}]},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"Se forma el futuro perifrástico con el verbo ir o venir conjugado en el presente.\\\"}]},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"\\\"}]},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"Ejemplos:     \\\"}]},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"Vamos a ir con ellos mañana.\\\",\\\"italic\\\":true}]},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"Mi padre viene el mes próximo.\\\",\\\"italic\\\":true}]},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"\\\"}]},{\\\"text\\\":\\\"* Acciones del pasado\\\",\\\"bold\\\":true},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"\\\"}]},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"Acciones reportadas en los periódicos, revistas, etc., a menudo emplean el presente para hacerlas más vivas.\\\"}]},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"\\\"}]},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"Ejemplos:   \\\"},{\\\"text\\\":\\\" \\\",\\\"italic\\\":true}]},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"El robo tiene lugar el 18 de febrero de 1868. \\\",\\\"italic\\\":true}]},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"Tres hombres enmascarados entran en el banco, sacan sus pistolas y piden a los empleados que estén tranquilos.\\\",\\\"italic\\\":true}]}]\",\r\n//         \"createdAt\": \"2021-04-24T02:42:29.794Z\",\r\n//         \"lang\": \"es\",\r\n//         \"isPublic\": true\r\n//     },\r\n//     {\r\n//         \"id\": \"b9e5b43d-63ae-4879-8f40-7280d8432a74\",\r\n//         \"title\": \"Vocabulary B1-B2: Health\",\r\n//         \"content\": \"[{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"Complete the sentences using the words below.\\\",\\\"bold\\\":true}]},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"\\\",\\\"bold\\\":true}]},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"x-ray, medicine, ambulance, dentist, nurse, bandage\\\",\\\"italic\\\":true}],\\\"textAlign\\\":\\\"center\\\"},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"\\\"}]},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"\\\"}]},{\\\"type\\\":\\\"exercise-block\\\",\\\"exerciseType\\\":\\\"missing-word\\\",\\\"children\\\":[{\\\"type\\\":\\\"exercise-list-items\\\",\\\"children\\\":[{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"A \\\"},{\\\"text\\\":\\\"nurse\\\",\\\"missingWord\\\":true},{\\\"text\\\":\\\" helps a doctor. They can also help patients who don't have a serious condition.\\\"}]},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"\\\"}]},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"\\\"}]},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\" \\\"},{\\\"text\\\":\\\" Medicine\\\",\\\"missingWord\\\":true},{\\\"text\\\":\\\" makes us feel better or helps us get better. It comes in many forms.\\\"}]},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"\\\"}]},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"\\\"}]},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"We can put a \\\"},{\\\"text\\\":\\\"bandage\\\",\\\"missingWord\\\":true},{\\\"text\\\":\\\" around an injury or body part that hurts.\\\"}]},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"\\\"}]},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"\\\"}]},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\" An \\\"},{\\\"text\\\":\\\"X-ray\\\",\\\"missingWord\\\":true},{\\\"text\\\":\\\" is a picture of our bones.\\\"}]},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"\\\"}]},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"\\\"}]},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"An \\\"},{\\\"text\\\":\\\"ambulance\\\",\\\"missingWord\\\":true},{\\\"text\\\":\\\" takes people to the hospital quickly.\\\"}]},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"\\\"}]},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"\\\"}]},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"A \\\"},{\\\"text\\\":\\\"dentist\\\",\\\"missingWord\\\":true},{\\\"text\\\":\\\" checks our teeth.\\\"}]}]}]},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"\\\"}]},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"\\\"}]},{\\\"type\\\":\\\"paragraph\\\",\\\"children\\\":[{\\\"text\\\":\\\"\\\"}]}]\",\r\n//         \"createdAt\": \"2021-04-24T22:18:44.365Z\",\r\n//         \"lang\": \"en\",\r\n//         \"isPublic\": true\r\n//     }\r\n// ]\r\n\r\nconst initialState = {\r\n    error: undefined,\r\n    loading: true,\r\n    worksheets: undefined,\r\n}\r\n\r\nfunction reducer(state, action) {\r\n    switch (action.type) {\r\n        case 'call-api':\r\n            return {\r\n                ...state,\r\n                loading: true\r\n            };\r\n        case 'api-call-ended':\r\n            return {\r\n                ...state,\r\n                loading: false\r\n            }\r\n        case 'update-worksheets':\r\n            return {\r\n                ...state,\r\n                loading: false,\r\n                worksheets: action.payload.worksheets\r\n            }\r\n\r\n        case 'api-error':\r\n            return {\r\n                ...state,\r\n                loading: false,\r\n                error: action.payload.error\r\n            }\r\n        default:\r\n            console.warn(\"The action type given did not match any posible action\", action)\r\n            return state;\r\n    }\r\n}\r\n\r\nconst Home = () => {\r\n    const history = useHistory();\r\n    const toast = useToast();\r\n\r\n    const [state, dispatch] = useReducer(reducer, initialState)\r\n    const { error, loading, worksheets } = state;\r\n\r\n    useEffect(() => {\r\n\r\n        async function getWorksheets() {\r\n            dispatch({ type: 'call-api' });\r\n\r\n            const response = await fetch(\"/api/activities\");\r\n            const json = await response.json();\r\n\r\n            if (response.ok) {\r\n                dispatch({ type: 'update-worksheets', payload: { worksheets: parseWorksheets(json) } });\r\n                return;\r\n            }\r\n            dispatch({ type: 'api-error', payload: { error: json } })\r\n\r\n        }\r\n\r\n        getWorksheets()\r\n\r\n    }, [])\r\n\r\n    async function handleCreateWorksheet() {\r\n\r\n        dispatch({ type: 'call-api' });\r\n\r\n        const newWorksheet = {\r\n            title: \"Actividad sin título\",\r\n            lang: \"es\",\r\n            published: false,\r\n            content: JSON.stringify([{\r\n                type: 'paragraph',\r\n                children: [{ text: '' }]\r\n            }]),\r\n            createdAt: new Date()\r\n        }\r\n\r\n        const response = await fetch(\"/api/activities\", {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify(newWorksheet)\r\n        })\r\n\r\n        const json = await response.json();\r\n\r\n        dispatch({ type: 'api-call-ended' });\r\n\r\n        if (response.ok) {\r\n            //Redirect to the form page with the id of the document created\r\n            history.push(`/worksheets/${json._id}/edit`);\r\n            return;\r\n        }\r\n\r\n        dispatch({ type: 'api-error', payload: { error: json } });\r\n    }\r\n\r\n    async function handleDeleteWorksheet(id) {\r\n        dispatch({ type: 'call-api' });\r\n\r\n        const response = await fetch(`/api/activities/${id}`, {\r\n            method: \"DELETE\"\r\n        })\r\n\r\n        const json = response.json();\r\n\r\n        if (response.ok) {\r\n\r\n            const updatedWorksheets = [...worksheets].filter(worksheet => worksheet._id !== id);\r\n\r\n            dispatch({ type: 'update-worksheets', payload: { worksheets: updatedWorksheets } });\r\n\r\n            toast({\r\n                title: \"Actividad Eliminada\",\r\n                description: \"La actividad fue eliminada exitósamente\",\r\n                status: \"info\",\r\n                durarion: 5000,\r\n                isClosable: true\r\n            })\r\n            return;\r\n        }\r\n\r\n        dispatch({ type: 'api-error', payload: { error: json } });\r\n    }\r\n\r\n    const worksheetsHandler = {\r\n        createSheet: handleCreateWorksheet,\r\n        deleteSheet: handleDeleteWorksheet,\r\n    }\r\n\r\n    useBodyBackground(\"var(--chakra-colors-gray-100)\")\r\n    useDocumentTitle(`LangSheets | Mis actividades`);\r\n    return (\r\n        <Fragment>\r\n\r\n            <Navbar />\r\n            { loading &&\r\n                <Progress size=\"xs\" isIndeterminate\r\n                    sx={{\r\n                        \"& > div\": {\r\n                            background: \"var(--chakra-colors-brand-300)\"\r\n                        }\r\n                    }}\r\n                />\r\n            }\r\n            { error &&\r\n                <Alert status=\"error\">\r\n                    <AlertIcon />\r\n                    <AlertDescription>{error.message}</AlertDescription>\r\n                </Alert>\r\n            }\r\n\r\n            <Container maxW=\"container.lg\" >\r\n                <Text fontSize=\"xx-large\" fontWeight=\"semibold\" my=\"5\" textAlign={[\"center\", \"left\"]}> Mis Worksheets </Text>\r\n\r\n\r\n                <Grid\r\n                    mx={{ md: \"7\", lg: \"0\" }}\r\n                    gap=\"5\"\r\n                    justifyContent=\"center\"\r\n                    placeItems=\"center\"\r\n                    templateColumns={{ base: \"\", md: \"repeat(2, var(--chakra-sizes-72))\", lg: \"repeat(3, minmax(var(--chakra-sizes-72),var(--chakra-sizes-80)))\" }}\r\n                >\r\n                    {!!worksheets && worksheets.map(worksheet => (\r\n                        <Skeleton key={worksheet._id} isLoaded={!loading} >\r\n                            <WorksheetCard\r\n                                {...{ ...worksheet, ...worksheetsHandler }}\r\n                            />\r\n                        </Skeleton>\r\n                    ))\r\n                    }\r\n                    <Flex width=\"full\" as={Button} colorScheme=\"brand\" variant=\"ghost\" background=\"white\" onClick={worksheetsHandler.createSheet} leftIcon={<Icon as={HiDocumentAdd} />} size=\"lg\" boxShadow=\"base\" height=\"40\" borderRadius=\"xl\">\r\n                        Crear Nueva actividad\r\n                        </Flex>\r\n                </Grid>\r\n\r\n            </Container>\r\n        </Fragment>\r\n\r\n    )\r\n}\r\n\r\n\r\nexport default Home\r\n","import Icon from '@chakra-ui/icon'\r\nimport { Box, Flex } from '@chakra-ui/layout'\r\nimport { Tooltip } from '@chakra-ui/tooltip'\r\nimport React, { Fragment } from 'react'\r\nimport { FaChalkboardTeacher, FaPrint } from 'react-icons/fa'\r\nimport { Logo } from '../../svgs'\r\n\r\n\r\nconst Navbar = (props) => {\r\n    return (\r\n        <Fragment>\r\n            <Flex flexDirection=\"column\" alignItems=\"center\">\r\n\r\n                <Box px=\"4\" variant=\"unstyled\" _focus={{ outline: \"none\" }} as=\"a\" href=\"/\">\r\n                    <Logo width=\"70px\" />\r\n                </Box>\r\n\r\n                <Flex mt=\"40\" flexDirection=\"column\" flexGrow=\"1\" width=\"full\">\r\n\r\n                    <Tooltip hasArrow arrowSize=\"5\" placement=\"auto-start\" label=\"Previsualizar actividad\">\r\n                        <Box\r\n                            as=\"a\" target=\"_blank\" referrerPolicy=\"no-referrer\" href={`/worksheets/${props.id}/practice`}\r\n                            sx={{\r\n                                \"&\": {\r\n                                    transition: \"all ease 300ms\",\r\n                                    color: \"white\",\r\n                                    cursor: \"pointer\",\r\n                                    textAlign: \"center\",\r\n                                    borderRadius: \"none\"\r\n                                },\r\n                                \"&:hover, &:active\": {\r\n                                    background: \"#252388\"\r\n                                }\r\n                            }}\r\n                        >\r\n                            <Icon m=\"4\" w={8} h={8} as={FaChalkboardTeacher} />\r\n                        </Box>\r\n                    </Tooltip>\r\n\r\n                    <Tooltip hasArrow arrowSize=\"5\" placement=\"auto-start\" label=\"Imprimir actividad\">\r\n                        <Box\r\n                            onClick={props.handlePrint}\r\n                            sx={{\r\n                                \"&\": {\r\n                                    transition: \"all ease 300ms\",\r\n                                    color: \"white\",\r\n                                    cursor: \"pointer\",\r\n                                    textAlign: \"center\",\r\n                                    borderRadius: \"none\"\r\n                                },\r\n                                \"&:hover, &:active\": {\r\n                                    background: \"#252388\"\r\n                                }\r\n                            }}\r\n                        >\r\n                            <Icon m=\"4\" w={8} h={8} as={FaPrint} />\r\n                        </Box>\r\n                    </Tooltip>\r\n\r\n                </Flex>\r\n\r\n            </Flex>\r\n        </Fragment>\r\n    )\r\n}\r\n\r\n\r\nexport default Navbar\r\n","import React, { useRef } from 'react'\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport { Editable, EditablePreview, EditableInput, Box } from \"@chakra-ui/react\"\r\n\r\n\r\nfunction WorksheetTitle({ title, dispatch }) {\r\n    const textRef = useRef();\r\n    return (\r\n        <Box\r\n            onClick={() => textRef.current.focus()}\r\n            sx={{\r\n                \"@media print\": {\r\n                    textAlign: \"center\",\r\n                }\r\n            }}\r\n        >\r\n            <Editable\r\n                fontSize=\"x-large\"\r\n                required\r\n                id=\"title\"\r\n                value={title}\r\n                onChange={newValue => dispatch({ type: \"change-worksheet-prop\", payload: { property: \"title\", value: newValue } })}\r\n                type=\"text\"\r\n                placeholder=\"Escribe un tílulo aquí...\"\r\n            >\r\n                <EditablePreview ref={textRef} />\r\n                <EditableInput />\r\n            </Editable>\r\n        </Box>\r\n    )\r\n}\r\n\r\nWorksheetTitle.propTypes = {\r\n    title: PropTypes.string.isRequired,\r\n    dispatch: PropTypes.func.isRequired,\r\n}\r\n\r\nexport default WorksheetTitle\r\n","import React from 'react'\r\nimport { Box } from '@chakra-ui/layout'\r\nimport { Editable } from \"slate-react\";\r\n\r\nconst CustomEditable = ({ decorate, renderElement, renderLeaf, readOnly, placeholder }) => (\r\n    <Box\r\n        background=\"white\"\r\n        p=\"5\"\r\n        as={Editable}\r\n        {...{\r\n            decorate,\r\n            renderElement,\r\n            renderLeaf,\r\n            readOnly,\r\n            placeholder,\r\n        }}\r\n    />\r\n)\r\n\r\nexport default CustomEditable\r\n","import React from 'react'\r\nimport PropTypes from \"prop-types\";\r\nimport { Select, Box, Text } from '@chakra-ui/react';\r\n\r\nconst LanguagePicker = ({ dispatch, lang }) => {\r\n    return (\r\n        <Box my=\"4\">\r\n            <Text my=\"2\">Idioma</Text>\r\n            <Select\r\n                background=\"white\"\r\n                required\r\n                value={lang}\r\n                onChange={e => dispatch({ type: \"change-worksheet-prop\", payload: { property: \"lang\", value: e.target.value } })}\r\n            >\r\n                <option value=\"\"></option>\r\n                <option value=\"de\">Alemán</option>\r\n                <option value=\"es\">Español</option>\r\n                <option value=\"fr\">Francés</option>\r\n                <option value=\"en\">Inglés</option>\r\n                <option value=\"ru\">Ruso</option>\r\n                <option value=\"zh\">Chino</option>\r\n                <option value=\"ja\">Japonés</option>\r\n            </Select>\r\n        </Box>\r\n    )\r\n}\r\n\r\nLanguagePicker.defaultProps = {\r\n    lang: \"\",\r\n}\r\n\r\nLanguagePicker.propTypes = {\r\n    dispatch: PropTypes.func.isRequired,\r\n    lang: PropTypes.string.isRequired,\r\n}\r\n\r\nexport default LanguagePicker\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { Box, Text } from '@chakra-ui/layout'\r\nimport { Tooltip, Switch } from '@chakra-ui/react'\r\n\r\nconst PublicSwitch = ({ dispatch, isPublic }) => {\r\n    return (\r\n        <Box my=\"4\">\r\n            <Tooltip label=\"Si la actividad es pública, será listada en la página global de actividades\">\r\n                <Text my=\"2\" >Actividad Pública <Switch colorScheme=\"brand\" ml=\"4\" onChange={(e) => dispatch({ type: \"change-worksheet-prop\", payload: { property: \"isPublic\", value: !isPublic } })} isChecked={isPublic} /> </Text>\r\n            </Tooltip>\r\n        </Box>\r\n    )\r\n}\r\n\r\nPublicSwitch.defaultProps = {\r\n    isPublic: true\r\n}\r\n\r\nPublicSwitch.propTypes = {\r\n    dispatch: PropTypes.func.isRequired,\r\n    isPublic: PropTypes.bool.isRequired,\r\n}\r\n\r\nexport default PublicSwitch\r\n","import { Editor, Transforms } from 'slate';\r\n\r\nconst withTextAlignment = (editor) => {\r\n\tconst { normalizeNode } = editor;\r\n\r\n\teditor.normalizeNode = (entry) => {\r\n\t\tconst [node, path] = entry;\r\n\t\t// make sure, every block has a standard alignment of 'left'\r\n\t\tif (Editor.isBlock(node) && !node.alignment) {\r\n\t\t\tTransforms.setNodes(editor, { textAlign: 'left' }, { at: path });\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t//Default Behaviour\r\n\t\tnormalizeNode(entry);\r\n\t};\r\n\treturn editor;\r\n};\r\nexport default withTextAlignment;\r\n","import { Transforms, Node, Path } from 'slate';\r\n\r\nconst withExerciseBlock = (editor) => {\r\n    const { normalizeNode } = editor;\r\n\r\n    editor.normalizeNode = entry => {\r\n        const [node, path] = entry;\r\n        if (node.type === 'exercise-block') {\r\n\r\n            //Add a paragraph below if there's not a block below the exercise block \r\n            if (!Node.has(editor, Path.next(path))) {\r\n                return Transforms.insertNodes(editor, { type: \"paragraph\", children: [{ text: \"\" }] }, { at: Path.next(path) });\r\n            }\r\n\r\n            //Add a paragraph before if there's not a block \r\n            if (!Node.has(editor, Path.previous(path))) {\r\n                console.log(\"Paragraph inserted\");\r\n                return Transforms.insertNodes(editor, { type: \"paragraph\", children: [{ text: \"\" }] }, { at: Path.previous(path) });\r\n            }\r\n\r\n        }\r\n        normalizeNode(entry);\r\n    }\r\n    return editor;\r\n};\r\n\r\n\r\nexport default withExerciseBlock;\r\n","import { Node, Element, Transforms, Path, Editor } from 'slate';\r\n\r\nconst withMissingWordExercise = (editor) => {\r\n\r\n    const { normalizeNode } = editor;\r\n\r\n    editor.normalizeNode = entry => {\r\n        const [node, path] = entry;\r\n\r\n        //Check whethert the block is a paragraph or a paragraph-with-missing-word\r\n        if (Editor.isBlock(editor, node) && [\"paragraph\", \"paragraph-with-missing-word\"].includes(node.type)) {\r\n\r\n            let hasMissingWords = false;\r\n\r\n            //Loock for missing word items inside the paragraph\r\n            for (const [child] of Node.descendants(node)) {\r\n                if (child.missingWord) {\r\n                    hasMissingWords = true;\r\n                }\r\n            }\r\n\r\n            //Make sure the type of paragraph corresponds \r\n            //to whether or nor they have a missing word item inside of them\r\n\r\n            if (hasMissingWords) {\r\n                if (node.type !== \"paragraph-with-missing-word\") {\r\n                    return Transforms.setNodes(editor, { type: \"paragraph-with-missing-word\" }, { at: path });\r\n                };\r\n            } else {\r\n                if (node.type === \"paragraph-with-missing-word\") {\r\n                    return Transforms.setNodes(editor, { type: \"paragraph\" }, { at: path });\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n        if (Node.isNode(node) && Element.isElement(node)) {\r\n            const firstNodePath = Node.first(editor, path)[1];\r\n            const lastNodePath = Node.last(editor, path)[1];\r\n\r\n            for (const [child, childPath] of Node.children(editor, path)) {\r\n\r\n                if (child.missingWord === true) {\r\n                    // If the node is the last child, \r\n                    // insert child with an space after it\r\n                    if (Path.equals(childPath, lastNodePath)) {\r\n                        return Transforms.insertNodes(editor, { text: \" \" }, {\r\n                            at: Path.next(childPath),\r\n                            select: true,\r\n                            hanging: true\r\n                        })\r\n                    }\r\n\r\n                    // If the node is the first child, insert an empty node before\r\n                    if (Path.equals(childPath, firstNodePath)) {\r\n                        return Transforms.insertNodes(editor, { text: ' ' },\r\n                            {\r\n                                at: childPath,\r\n                                select: true,\r\n                                hanging: true\r\n                            }\r\n                        );\r\n                    }\r\n\r\n                    //If the blank space has a next sibling with no space , insert one\r\n                    if (Node.has(editor, Path.next(childPath))) {\r\n                        let { text } = Node.get(editor, Path.next(childPath));\r\n                        if (text[0] !== ' ') {\r\n                            return Transforms.insertText(editor, ' ', {\r\n                                at: { path: Path.next(childPath), offset: 0 }\r\n                            });\r\n                        }\r\n                    }\r\n\r\n                }\r\n            }\r\n        }\r\n        normalizeNode(entry);\r\n    }\r\n    return editor;\r\n}\r\n\r\nexport default withMissingWordExercise;","import { Node, Transforms, Editor } from 'slate';\r\n\r\nconst withWordOrderExercise = (editor) => {\r\n\r\n    const { normalizeNode } = editor;\r\n\r\n    editor.normalizeNode = entry => {\r\n        const [node, path] = entry;\r\n\r\n        let isIntoAnExerciseBlock = false;\r\n\r\n        for (const [ancerstorNode] of Node.ancestors(editor, path)) {\r\n            if (ancerstorNode.type === \"exercise-block\") {\r\n                isIntoAnExerciseBlock = true;\r\n            }\r\n        }\r\n\r\n        //Check whether the block is a paragraph or a word-order-exercise-paragraph\r\n        if (Editor.isBlock(editor, node) && [\"paragraph\", \"word-order-exercise-paragraph\"].includes(node.type) && isIntoAnExerciseBlock) {\r\n\r\n            let hasDivisions = false;\r\n\r\n            const nodeString = Node.string(node);\r\n            const divisions = nodeString.split(\"/\");\r\n\r\n            if (divisions.length > 1) {\r\n                hasDivisions = true;\r\n            }\r\n\r\n            //Make sure the type of paragraph corresponds \r\n            //to whether or nor they have divisions inside of them\r\n\r\n            if (hasDivisions) {\r\n                if (node.type !== \"word-order-exercise-paragraph\") {\r\n                    return Transforms.setNodes(editor, { type: \"word-order-exercise-paragraph\" }, { at: path });\r\n                };\r\n            } else {\r\n                if (node.type === \"word-order-exercise-paragraph\") {\r\n                    return Transforms.setNodes(editor, { type: \"paragraph\" }, { at: path });\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n        normalizeNode(entry);\r\n    }\r\n    return editor;\r\n}\r\n\r\nexport default withWordOrderExercise;","import { useMemo } from 'react'\r\nimport { createEditor } from 'slate';\r\nimport { withReact } from 'slate-react';\r\nimport { withHistory } from \"slate-history\";\r\n\r\n//slate Custom plugins\r\nimport { withMissingWordExercise, withTextAlignment, withExerciseBlock, withWordOrderExercise } from \"../components/Slate/plugins\";\r\n\r\nfunction useSlateEditor() {\r\n    const editor = useMemo(() =>\r\n        withTextAlignment(\r\n            withWordOrderExercise(\r\n                withExerciseBlock(\r\n                    withMissingWordExercise(\r\n                        withHistory(\r\n                            withReact(createEditor())\r\n                        )\r\n                    )\r\n                )\r\n            )\r\n        )\r\n        , [])\r\n    return editor;\r\n}\r\n\r\nexport default useSlateEditor\r\n","export function shuffleArray(array) {\r\n    if (!array.length || !array) throw new Error(\"Expected an array wit items and got\", JSON.stringify(array));\r\n\r\n    let result = [...array];\r\n    let currentIndex = result.length, temporaryValue, randomIndex;\r\n\r\n    // While there remain elements to shuffle...\r\n    while (0 !== currentIndex) {\r\n\r\n        // Pick a remaining element...\r\n        randomIndex = Math.floor(Math.random() * currentIndex);\r\n        currentIndex -= 1;\r\n\r\n        // And swap it with the current element.\r\n        temporaryValue = result[currentIndex];\r\n        result[currentIndex] = result[randomIndex];\r\n        result[randomIndex] = temporaryValue;\r\n    }\r\n\r\n    if (array[0] === result[0]) {\r\n        return shuffleArray(result);\r\n    }\r\n\r\n    return result;\r\n}","import { nanoid } from \"nanoid\";\r\nimport { Node } from \"slate\";\r\nimport { shuffleArray } from \"./objects\";\r\n\r\n\r\nexport function getExerciseBlockProps(editor, path) {\r\n    if (!editor || !path) throw new Error('Slate editor and path are required');\r\n    let showAnswers;\r\n    let checkExercise;\r\n    for (const [node] of Node.ancestors(editor, path)) {\r\n        if (node.type === \"exercise-block\") {\r\n            showAnswers = node.showAnswers;\r\n            checkExercise = node.checkExercise;\r\n        }\r\n    }\r\n\r\n    return {\r\n        showAnswers,\r\n        checkExercise\r\n    }\r\n}\r\n\r\n\r\n//Word order exercise functions\r\n\r\n//turns a string into an array of words\r\nexport function getDivisions(string, config) {\r\n    let words = string.split(\"/\");\r\n\r\n    let withIDs = words.map(word => ({ word, id: nanoid(), isCorrect: false }));\r\n\r\n    return config.shuffle ? shuffleArray(withIDs) : withIDs;\r\n\r\n}","import { createContext } from \"react\";\r\nimport { io } from \"socket.io-client\";\r\n\r\nexport const socket = io({ autoConnect: false });\r\n\r\n\r\nexport const SocketContext = createContext(socket);","import { ReactEditor, useSlate } from \"slate-react\"\r\nimport { Transforms } from \"slate\"\r\nimport { Box, Text } from \"@chakra-ui/layout\";\r\nimport { Input, InputGroup, InputRightElement } from \"@chakra-ui/input\";\r\nimport Icon from \"@chakra-ui/icon\";\r\nimport { FaCheck, FaTimes } from \"react-icons/fa\";\r\nimport { useMediaQuery } from \"@chakra-ui/media-query\";\r\nimport { getExerciseBlockProps } from \"../../../utils/exerciseBlocks\";\r\nimport { SocketContext } from \"../../../context/socket\";\r\nimport { useContext } from \"react\";\r\nimport { Tooltip } from \"@chakra-ui/tooltip\";\r\n\r\n\r\nconst Mark = ({ isCorrect, checkExercise, showAnswers }) => {\r\n    //if the exercises is not checked or the answers are shown, render nothing\r\n    if (!checkExercise || showAnswers) return null;\r\n    //render correct mark\r\n    if (isCorrect) {\r\n        return <InputRightElement as=\"span\" children={<Icon as={FaCheck} color=\"green.400\" />} />\r\n    }\r\n    //render wrong mark\r\n    return <InputRightElement as=\"span\" children={<Icon as={FaTimes} color=\"red.400\" />} />\r\n}\r\n\r\nexport const MissingWordInput = (props) => {\r\n\r\n    const socket = useContext(SocketContext);\r\n\r\n    const { text: correctAnswer, userAnswer = \"\", isCorrect = false, focused = false, user } = props.leaf;\r\n\r\n    const editor = useSlate();\r\n    const path = ReactEditor.findPath(editor, props.text);\r\n\r\n    const { showAnswers, checkExercise } = getExerciseBlockProps(editor, path)\r\n\r\n    function handleOnFocus({ event, focus = true }) {\r\n\r\n        if (focus) {\r\n            socket.emit(\"action\", {\r\n                type: 'input-focused',\r\n                user: {\r\n                    username: socket.auth.username,\r\n                    userID: socket.id\r\n                },\r\n                path\r\n            });\r\n            return;\r\n        }\r\n        event.target.blur();\r\n    }\r\n\r\n    function setLeafProps(properties) {\r\n        //send the action to the server so it is broadcasted to every client\r\n        socket.emit(\"action\", { type: \"set-leaf-props\", props: properties, path })\r\n        //Apply the action locally\r\n        Transforms.setNodes(editor, properties, { at: path })\r\n    }\r\n\r\n    function handleOnChange(e) {\r\n        const value = e.target.value;\r\n        setLeafProps({\r\n            isAnswered: value.trim().length > 0,\r\n            isCorrect: handleIsCorrect(value),\r\n            userAnswer: value\r\n        });\r\n    }\r\n\r\n    function handleOnBlur() {\r\n        socket.emit(\"action\", {\r\n            type: 'input-blured',\r\n            path\r\n        });\r\n    }\r\n\r\n    function handleIsCorrect(userAnswer) {\r\n        //remove all the spaces around the words and compare them in a non sensitive case\r\n        return userAnswer.toLowerCase().trim() === correctAnswer.toLowerCase().trim();\r\n    }\r\n\r\n    const inputValue = showAnswers ? correctAnswer : userAnswer;\r\n\r\n    return (\r\n        <InputGroup w=\"32\" as=\"span\" display=\"inline-block\" position=\"relative\">\r\n            { focused\r\n                ? (\r\n                    <Tooltip label={<UserLabel user={user} />}>\r\n                        <Input cursor=\"not-allowed\" variant=\"filled\" bg=\"brand.200\" transition=\"all ease 300ms\" _hover={{ background: \"var(--chakra-colors-brand-200)\" }} readOnly={checkExercise} value={inputValue} onFocus={event => handleOnFocus({ event, focus: false })} onChange={handleOnChange} />\r\n                    </Tooltip>\r\n                )\r\n                : (\r\n                    <Input variant=\"filled\" readOnly={checkExercise} value={inputValue} onFocus={handleOnFocus} onBlur={handleOnBlur} onChange={handleOnChange} />\r\n                )}\r\n            <Mark {...{ isCorrect, checkExercise, showAnswers }} />\r\n        </InputGroup >\r\n    )\r\n\r\n}\r\n\r\n\r\nconst UserLabel = props => {\r\n    return (\r\n        <Text as=\"span\">\r\n            {props.user.username} esta escribiendo <DotAnimation />\r\n        </Text>\r\n    )\r\n}\r\n\r\nconst DotAnimation = props => (\r\n    <Text as=\"span\" id=\"wave\" position=\"relative\">\r\n        <Text as=\"span\" className=\"dot\"></Text>\r\n        <Text as=\"span\" className=\"dot\"></Text>\r\n        <Text as=\"span\" className=\"dot\"></Text>\r\n    </Text>\r\n)\r\n\r\nexport const MissingWordEditable = props => {\r\n\r\n    const [isPrinting] = useMediaQuery([\"print\"])\r\n\r\n    //If printing preview is active duplicate the content of the element using the text property of leaf \r\n    //so the missing word space in the printing view is larger\r\n    //In normal mode use the children property to render the text in the leaf\r\n    const children = isPrinting\r\n        ? props.leaf.text + props.leaf.text\r\n        : props.children;\r\n\r\n    return (\r\n        <Box as=\"span\"\r\n            color={isPrinting ? \"transparent\" : \"\"}\r\n            borderRadius=\"sm\"\r\n            px=\"1\"\r\n            background=\"brand.200\"\r\n            {...props.attributes}\r\n            sx={{\r\n                \"@media print\": {\r\n                    background: \"none\",\r\n                    borderBottom: \"solid black 1px\",\r\n                    color: \"transparent\",\r\n                }\r\n            }}\r\n        >\r\n            {children}\r\n        </Box>\r\n    )\r\n}\r\n\r\n","import { Text } from \"@chakra-ui/layout\";\r\nimport { useReadOnly } from \"slate-react\"\r\nimport { MissingWordEditable, MissingWordInput } from \"./MissingWord\";\r\nconst Leaf = (props) => {\r\n    let { leaf, children, attributes } = props\r\n    const isReadOnly = useReadOnly();\r\n    const isMissingWord = leaf.missingWord === true;\r\n\r\n    if (isMissingWord) {\r\n        //If the editor is in readOnly mode render an input to be answered by a student\r\n        if (isReadOnly) {\r\n            return <MissingWordInput {...props} />\r\n        }\r\n        return <MissingWordEditable {...props} />\r\n    }\r\n\r\n    if (leaf.division) {\r\n        children = <Text as=\"span\" fontWeight=\"black\" color=\"brand.500\">{children}</Text>\r\n    }\r\n\r\n    if (leaf.bold) {\r\n        children = <strong>{children}</strong>\r\n    }\r\n    if (leaf.italic) {\r\n        children = <em>{children}</em>\r\n    }\r\n\r\n    if (leaf.underline) {\r\n        children = <u>{children}</u>\r\n    }\r\n\r\n    if (leaf.strike) {\r\n        children = <s>{children}</s>\r\n    }\r\n\r\n    //Default text element\r\n    return (\r\n        <span {...attributes}>{children}</span>\r\n    )\r\n};\r\n\r\nexport default Leaf\r\n","import { Text } from '@chakra-ui/layout';\r\n\r\nconst DefaultElement = (props) => {\r\n    const { children, element, attributes } = props;\r\n    const { textAlign } = element;\r\n    return (\r\n        <Text textAlign={textAlign} {...attributes}>\r\n            {children}\r\n        </Text>\r\n    )\r\n}\r\n\r\n\r\nexport default DefaultElement\r\n","import React from 'react'\r\n\r\nconst MissingWordExerciseParagraph = (props) => {\r\n    const { attributes, children } = props;\r\n    return (\r\n        <div {...attributes}>{children}</div>\r\n    )\r\n}\r\n\r\nexport default MissingWordExerciseParagraph\r\n","import React, { useRef } from 'react'\r\nimport { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd';\r\nimport { ReactEditor, useReadOnly, useSlate } from 'slate-react';\r\n\r\nimport { Flex } from '@chakra-ui/layout';\r\nimport { Text } from '@chakra-ui/layout';\r\nimport { Node, Transforms } from 'slate';\r\nimport { getDivisions, getExerciseBlockProps } from '../../../utils/exerciseBlocks';\r\n\r\nconst WordOrderExerciseParagraph = (props) => {\r\n    const isReadOnly = useReadOnly();\r\n\r\n    if (isReadOnly)\r\n        return <WordOrderPractice {...props} />\r\n\r\n    return <Editable {...props} />\r\n}\r\n\r\nconst WordOrderPractice = props => {\r\n    const editor = useSlate();\r\n    const { element } = props;\r\n\r\n    const path = ReactEditor.findPath(editor, element);\r\n    const { showAnswers, checkExercise } = getExerciseBlockProps(editor, path)\r\n\r\n    const textContent = Node.string(element);\r\n    //save the shuffled words in a ref to prevent them from being shuffled on each render\r\n    const userAnswersRef = useRef(getDivisions(textContent, { shuffle: true }));\r\n    const { userAnswers = userAnswersRef.current } = element;\r\n\r\n    const correctAnswers = getDivisions(textContent, { shuffle: false });\r\n\r\n    function handleOnDragEnd(result) {\r\n        // `destination` is `undefined` if the item was dropped outside the list\r\n        // In this case, do nothing\r\n        if (!result.destination) {\r\n            return\r\n        }\r\n\r\n        const items = reorder(\r\n            userAnswers,\r\n            result.source.index,\r\n            result.destination.index\r\n        );\r\n\r\n        const path = ReactEditor.findPath(editor, element);\r\n        Transforms.setNodes(editor, { userAnswers: checkAnswers(items, correctAnswers) }, { at: path })\r\n    }\r\n\r\n    if (showAnswers) {\r\n        return (\r\n            <Flex flexWrap=\"wrap\" alignItems=\"center\" my=\"4\" p=\"4\" borderRadius=\"base\" border=\"2px var(--chakra-colors-purple-600) solid\">\r\n                {\r\n                    correctAnswers.map((word) => (\r\n                        <WordComponent key={word.id} {...{ ...word, isCorrect: true, }} />\r\n                    ))\r\n                }\r\n            </Flex>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <DragDropContext onDragEnd={handleOnDragEnd} >\r\n            <Droppable droppableId=\"droppable\" direction=\"horizontal\">\r\n                {(provided, snapshot) => (\r\n                    <Flex flexWrap=\"wrap\" alignItems=\"center\" my=\"4\" p=\"4\" borderRadius=\"base\" border=\"2px var(--chakra-colors-purple-600) solid\"\r\n                        ref={provided.innerRef}\r\n                        {...provided.droppableProps}\r\n                        className={`${snapshot.isDraggingOver && 'draggingOver'}`}\r\n                    >\r\n                        {userAnswers.map((word, index) => (\r\n                            <DraggableWordComponent key={word.id} {...{ ...word, index, checkExercise }} />\r\n                        ))}\r\n                        {provided.placeholder}\r\n                    </Flex>\r\n                )}\r\n            </Droppable>\r\n        </DragDropContext>\r\n    )\r\n}\r\n\r\nconst WordComponent = (props) => {\r\n    return (\r\n        <Text\r\n            m=\"1\" px=\"2\"\r\n            py=\"1\"\r\n            bg={props.isCorrect ? \"green.500\" : \"yellow.300\"}\r\n            color={props.isCorrect ? \"white\" : \"black\"}\r\n            borderRadius=\"base\"\r\n            as=\"span\"\r\n            fontWeight=\"medium\"\r\n            transition=\"all ease 300\"\r\n            cursor=\"default\"\r\n        >\r\n            {props.word}\r\n        </Text>\r\n    )\r\n}\r\n\r\nconst DraggableWordComponent = ({ id, word, index, checkExercise, isCorrect }) => {\r\n\r\n    function getBg(snapshot) {\r\n\r\n        if (snapshot.isDragging) {\r\n            return \"purple.600\"\r\n        }\r\n\r\n        if (checkExercise) {\r\n            if (isCorrect)\r\n                return \"green.300\"\r\n\r\n            return \"yellow.300\"\r\n        }\r\n\r\n        return \"purple.500\"\r\n    }\r\n\r\n    function getColor() {\r\n        if (checkExercise && !isCorrect) {\r\n            return \"black\"\r\n        }\r\n        return \"white\"\r\n    }\r\n\r\n    return (\r\n        <Draggable key={id} draggableId={id} index={index}>\r\n            {(provided, snapshot) => (\r\n                <Text\r\n                    userSelect=\"none\"\r\n                    m=\"1\"\r\n                    px=\"2\"\r\n                    py=\"1\"\r\n                    borderRadius=\"base\"\r\n                    as=\"span\"\r\n                    cursor=\"move\"\r\n                    fontWeight=\"medium\"\r\n                    color={getColor()}\r\n                    transition=\"all ease 300\"\r\n                    bg={getBg(snapshot)}\r\n                    style={provided.draggableProps.style}\r\n                    ref={provided.innerRef}\r\n                    {...provided.draggableProps}\r\n                    {...provided.dragHandleProps}\r\n                >\r\n                    {word}\r\n                </Text>\r\n            )}\r\n        </Draggable>\r\n    )\r\n}\r\n\r\nconst Editable = (props) => {\r\n    const { attributes, children } = props;\r\n    return (\r\n        <div {...attributes}>\r\n            {children}\r\n        </div>\r\n    )\r\n}\r\n\r\nfunction checkAnswers(userAnswers, correctAnswers) {\r\n\r\n    return userAnswers.map((answer, index) => {\r\n        return {\r\n            ...answer,\r\n            isCorrect: answer.word === correctAnswers[index].word\r\n        };\r\n\r\n    })\r\n}\r\n\r\n\r\n\r\nfunction reorder(list, startIndex, endIndex) {\r\n    const result = Array.from(list);\r\n    const [removed] = result.splice(startIndex, 1);\r\n    result.splice(endIndex, 0, removed);\r\n\r\n    return result;\r\n};\r\n\r\n\r\n\r\n\r\nexport default WordOrderExerciseParagraph\r\n","import { Text } from '@chakra-ui/layout'\r\nimport React from 'react'\r\n\r\nfunction Heading({ element, children, attributes }) {\r\n    const { textAlign } = element;\r\n    const fontSize = element.type.split(\" \")[1];\r\n    return (\r\n        <Text textAlign={textAlign} fontSize={fontSize} {...attributes}>{children}</Text>\r\n    )\r\n}\r\n\r\nexport default Heading\r\n\r\n","import { Editor, Transforms } from \"slate\";\r\n\r\nfunction isBlockActive(key, format, editor) {\r\n    if (!editor) return false;\r\n    //get the node in the current selection that matches the format given\r\n    const [match] = Editor.nodes(editor, {\r\n        match: n => n[key] === format,\r\n    })\r\n    return !!match\r\n}\r\n\r\nfunction toggleBlock(key, format, editor) {\r\n    const isActive = isBlockActive(key, format, editor);\r\n    Transforms.setNodes(\r\n        editor,\r\n        { [key]: isActive ? null : format },\r\n        { match: n => Editor.isBlock(editor, n) }\r\n    );\r\n}\r\n\r\nfunction isMarkActive(format, editor) {\r\n    if (!editor) return false;\r\n    //get the marks (style marks) in the current selection\r\n    const marks = Editor.marks(editor);\r\n    if (!marks) return false\r\n    return marks[format] === true;\r\n}\r\n\r\nfunction toggleMark(format, editor) {\r\n    if (!editor) return\r\n    const isActive = isMarkActive(format, editor)\r\n\r\n    if (isActive) {\r\n        return Editor.removeMark(editor, format)\r\n    }\r\n\r\n    return Editor.addMark(editor, format, true)\r\n\r\n}\r\n\r\nexport {\r\n    isBlockActive,\r\n    toggleBlock,\r\n    isMarkActive,\r\n    toggleMark\r\n}","import { Button } from '@chakra-ui/button';\r\nimport { MenuItem } from '@chakra-ui/menu';\r\nimport { Tooltip } from '@chakra-ui/tooltip';\r\nimport PropTypes from \"prop-types\";\r\nimport React from 'react'\r\nimport { useSlate } from 'slate-react';\r\n\r\nimport { toggleBlock, toggleMark, isBlockActive, isMarkActive } from \"../../utils/slate\";\r\n\r\n\r\nconst ToolbarButton = ({ format, label, type, customOnClick, variant, icon, formatKey, ...rest }) => {\r\n\r\n    const editor = useSlate();\r\n\r\n    function handleClick() {\r\n        if (typeof customOnClick === \"function\") {\r\n            //run custom click function\r\n            return customOnClick.call()\r\n        }\r\n        if (type === \"mark\") {\r\n            return toggleMark(format, editor);\r\n        }\r\n        return toggleBlock(formatKey, format, editor);\r\n    }\r\n\r\n    function isActive() {\r\n        if (type === \"mark\") {\r\n            return isMarkActive(format, editor);\r\n        };\r\n        return isBlockActive(formatKey, format, editor);\r\n    }\r\n\r\n    if (variant === \"button\") {\r\n        return (\r\n            <Tooltip hasArrow label={label} fontSize=\"md\">\r\n                <Button size=\"sm\" {...rest} color={isActive() ? 'brand.500' : '#616161'} background={isActive() ? \"brand.100\" : \"\"} variant=\"ghost\" onClick={handleClick} >\r\n                    {icon}\r\n                </Button>\r\n            </Tooltip >\r\n        )\r\n    };\r\n\r\n    return (\r\n        <MenuItem color={isActive() ? \"brand.500\" : \"\"} background={isActive() ? \"brand.100\" : \"\"} onClick={handleClick} icon={icon} >\r\n            {label}\r\n        </MenuItem>\r\n    )\r\n\r\n}\r\n\r\nToolbarButton.defaultProps = {\r\n    customOnClick: undefined,\r\n    variant: \"button\",\r\n    formatKey: \"type\"\r\n}\r\n\r\nToolbarButton.propTypes = {\r\n    customOnClick: PropTypes.func,\r\n    formatKey: PropTypes.string.isRequired,\r\n    format: PropTypes.string.isRequired,\r\n    icon: PropTypes.node,\r\n    variant: PropTypes.oneOf([\"menuListItem\", \"button\"]).isRequired,\r\n    type: PropTypes.oneOf([\"mark\", \"block\"]).isRequired,\r\n    label: PropTypes.oneOfType([\r\n        PropTypes.string,\r\n        PropTypes.node\r\n    ]).isRequired,\r\n}\r\nexport default ToolbarButton\r\n","import { Button, ButtonGroup } from '@chakra-ui/button';\r\nimport React, { Fragment } from 'react'\r\nimport { Transforms } from 'slate';\r\nimport { ReactEditor, useSlate } from 'slate-react';\r\n\r\nconst ScoringSection = (props) => {\r\n\r\n    return (\r\n        <Fragment>\r\n            <ButtonsSection {...props} />\r\n        </Fragment>\r\n    )\r\n}\r\n\r\n\r\nconst ButtonsSection = (props) => {\r\n    const editor = useSlate();\r\n\r\n    const exerciseBlockPath = ReactEditor.findPath(editor, props.element);\r\n\r\n    function handleCheckAnswers() {\r\n        Transforms.setNodes(editor, { checkExercise: true }, { at: exerciseBlockPath });\r\n    }\r\n\r\n    function handleShowAnswers() {\r\n        Transforms.setNodes(editor, { showAnswers: true }, { at: exerciseBlockPath });\r\n    }\r\n\r\n    return (\r\n        <ButtonGroup display=\"flex\" flexWrap=\"wrap\" spacing={[\"0\", \"4\"]} justifyContent=\"center\" colorScheme=\"purple\" size=\"sm\">\r\n            <Button my=\"2\" variant=\"solid\"\r\n                onClick={handleCheckAnswers}\r\n            >\r\n                Calificar respuestas\r\n            </Button>\r\n            <Button my=\"2\" variant=\"outline\"\r\n                onClick={handleShowAnswers}\r\n            >\r\n                Ver respuestas\r\n            </Button>\r\n        </ButtonGroup>\r\n    )\r\n}\r\n\r\nexport default ScoringSection\r\n","import React, { Fragment } from \"react\";\r\nimport { useReadOnly, useSelected, useFocused, useSlate } from \"slate-react\";\r\nimport { Box, Collapse, Divider, Flex, Icon, IconButton, Input, Popover, PopoverBody, PopoverCloseButton, PopoverContent, PopoverHeader, PopoverTrigger, Text } from \"@chakra-ui/react\";\r\nimport ToolbarButton from \"../ToolbarButton\";\r\nimport ScoringSection from \"../../ScoringSection\";\r\nimport { Editor, Range } from \"slate\";\r\n\r\nimport { toggleMark } from \"../../../utils/slate\";\r\nimport { shuffleArray } from \"../../../utils/objects\";\r\n\r\nimport { MissingWord as MissingWordIcon } from \"../../../svgs\";\r\nimport { IoMdHelpCircleOutline } from \"react-icons/io\";\r\n\r\nconst EXERCISES_TYPES = {\r\n    'missing-word': \"Palabras faltantes\",\r\n    'word-order': \"Ordenar oraciones\"\r\n}\r\n\r\nconst EXERCISES_HELP_TEXT = {\r\n    \"missing-word\": <Fragment>\r\n        <Text my=\"2\">\r\n            Cada oración puede contener una o múltiple palabras faltantes.\r\n        </Text>\r\n        <Text my=\"2\">\r\n            Para añadir una palabra faltante seleccione la palabra(s) y presione el boton de añadir palabra faltante. <Icon color=\"brand.500\" w=\"2.5em\" as={MissingWordIcon} />\r\n        </Text>\r\n\r\n        <Text my=\"2\">\r\n            Cada palabra faltante lucirá con un fondo de color púrpura.\r\n        </Text>\r\n\r\n        <Text my=\"2\" color=\"brand.500\" fontWeight=\"semibold\">\r\n            Ejemplo:\r\n    </Text>\r\n        <Text my=\"2\">\r\n            <em>\r\n                Escribiendo la siguiente oración\r\n        </em>\r\n        </Text>\r\n        <Text my=\"2\" as=\"samp\">\r\n            Si quieres cambiar el <Text px=\"2\" as=\"span\" bg=\"brand.200\" borderRadius=\"base\" >mundo</Text>, cámbiate a ti mismo.\r\n    </Text>\r\n        <Text my=\"2\">\r\n            <em>\r\n                Se creara el siguiente ejercicio :\r\n        </em>\r\n        </Text>\r\n        <Flex alignItems=\"center\" flexWrap=\"wrap\">\r\n            Si quieres cambiar el <Input w=\"24\" bg=\"gray.100\" />, cámbiate a ti mismo.\r\n    </Flex>\r\n\r\n    </Fragment>,\r\n    \"word-order\": <Fragment>\r\n        <Text my=\"2\">\r\n            Cada oración tiene que ser dividida usando diagonales <Text as=\"kbd\" bg=\"brand.100\">/</Text>\r\n        </Text>\r\n        <Text my=\"2\" color=\"brand.500\" fontWeight=\"semibold\">\r\n            Ejemplo:\r\n        </Text>\r\n        <Text my=\"2\">\r\n            <em>\r\n                Escribiendo la siguiente oración\r\n            </em>\r\n        </Text>\r\n        <Text my=\"2\" as=\"samp\">\r\n            Si quieres <Text as=\"span\" color=\"brand.500\" fontSize=\"x-large\">/</Text> cambiar <Text as=\"span\" color=\"brand.500\" fontSize=\"x-large\">/</Text>el mundo, cámbiate<Text as=\"span\" color=\"brand.500\" fontSize=\"x-large\">/</Text> a ti mismo.\r\n        </Text>\r\n        <Text my=\"2\">\r\n            <em>\r\n                Se creara el siguiente ejercicio :\r\n            </em>\r\n        </Text>\r\n        <Flex flexWrap=\"wrap\">\r\n            {\r\n                shuffleArray([\"Si quieres\", \"cambiar\", \"el mundo, cámbiate\", \"a ti mismo.\"]).map((word, index) => (\r\n                    <Text key={`${word}-${index}`} as=\"span\" borderRadius=\"base\" m=\"1\" px=\"1\" py=\"2\" color=\"white\" bg=\"brand.500\">{word}</Text>\r\n                ))\r\n            }\r\n        </Flex>\r\n    </Fragment>\r\n}\r\n\r\nfunction handleCreateMissingWord(editor, node) {\r\n    //Make sure there's text selected\r\n    if (Range.isCollapsed(editor.selection)) {\r\n        alert(\"Para crear una palabra faltante , seleciona primero la palabra\")\r\n        return\r\n    }\r\n\r\n    //Asign the property missingWord into the selected text in the editor\r\n    toggleMark(\"missingWord\", editor)\r\n}\r\n\r\nconst Tools = (props) => {\r\n    const editor = useSlate();\r\n    switch (props.exerciseType) {\r\n        case 'missing-word':\r\n            return (\r\n                <Box w=\"full\">\r\n                    <ToolbarButton m=\"2\" colorScheme=\"brand\" type=\"mark\" customOnClick={() => handleCreateMissingWord(editor)} format=\"missingWord\" label=\"Añadir Palabra faltante\" icon={<Icon width=\"2.5em\" as={MissingWordIcon} />} />\r\n                    <Divider borderBottomWidth=\"2px\" opacity=\"1\" />\r\n                </Box>\r\n            )\r\n        case 'word-order':\r\n            return null\r\n        default:\r\n            return null;\r\n    }\r\n};\r\n\r\n\r\nexport const ExerciseBlock = (props) => {\r\n    const editor = useSlate();\r\n    const isReadOnly = useReadOnly();\r\n\r\n    const isFocused = useFocused();\r\n    const isSelected = useSelected();\r\n\r\n    function isActive() {\r\n        if (isFocused && isSelected) {\r\n            if (editor.selection) {\r\n                if (Range.isExpanded(editor.selection)) {\r\n                    const [element] = Editor.fragment(editor, editor.selection);\r\n                    if (element.exerciseType === \"missing-word\") {\r\n                        return true;\r\n                    }\r\n                    return false;\r\n                } else {\r\n                    return true;\r\n                }\r\n            }\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    if (isReadOnly) {\r\n        return (\r\n            <Fragment>\r\n                <Box {...props.attributes} borderBottomRadius=\"base\" py=\"4\" >\r\n                    {props.children}\r\n                </Box>\r\n                <ScoringSection {...props} />\r\n            </Fragment>\r\n        )\r\n    }\r\n    return (\r\n        <Box borderRadius=\"5px\" border={`${isActive() ? \"var(--chakra-colors-brand-100)\" : \"transparent\"} 1px solid`} {...props.attributes} transition=\"all ease 300ms\" position=\"relative\"  >\r\n\r\n            <Collapse in={isActive()} animateOpacity contentEditable={false}>\r\n                {!isReadOnly &&\r\n                    (<Box borderTopRadius=\"base\" w={[\"full\", \"full\", \"auto\"]} bg=\"brand.400\" px=\"4\" py=\"2\" color=\"white\">\r\n                        Actividad: <b> {EXERCISES_TYPES[props.element.exerciseType]} </b>\r\n\r\n                        {\r\n                            !!EXERCISES_HELP_TEXT[props.element.exerciseType] &&\r\n                            <Popover>\r\n                                <PopoverTrigger>\r\n                                    <IconButton variant=\"ghost\" colorScheme=\"white\" icon={<Icon as={IoMdHelpCircleOutline} />} />\r\n                                </PopoverTrigger>\r\n                                <PopoverContent>\r\n                                    <PopoverCloseButton />\r\n                                    <PopoverHeader color=\"black\">Ayuda</PopoverHeader>\r\n                                    <PopoverBody color=\"black\">\r\n                                        {EXERCISES_HELP_TEXT[props.element.exerciseType]}\r\n                                    </PopoverBody>\r\n                                </PopoverContent>\r\n                            </Popover>\r\n                        }\r\n\r\n\r\n                    </Box>)\r\n                }\r\n                <Tools isActive={isActive()} exerciseType={props.element.exerciseType} />\r\n            </Collapse>\r\n            <Box borderBottomRadius=\"base\" py=\"4\" px={isActive() && \"2\"}  >\r\n                {props.children}\r\n            </Box>\r\n        </Box >\r\n    )\r\n}\r\n\r\nexport const ExerciseList = (props) => {\r\n    return (\r\n        <Box {...props.attributes}>\r\n            {props.children}\r\n        </Box>\r\n    )\r\n}\r\n\r\nexport default ExerciseBlock;","import React, { useCallback } from 'react'\r\n//Slate elements\r\nimport Leaf from \"../components/Slate/Inline/Leaf\";\r\nimport DefaultElement from \"../components/Slate/Block/DefaultElement\";\r\nimport MissingWordExerciseParagraph from \"../components/Slate/Block/MissingWordExerciseParagraph\";\r\nimport WordOrderExerciseParagraph from \"../components/Slate/Block/WordOrderExerciseParagraph\";\r\nimport Heading from \"../components/Slate/Block/Heading\";\r\nimport { ExerciseList, ExerciseBlock } from '../components/Slate/Block/ExerciseBlock';\r\n\r\n\r\nconst useSlateRender = () => {\r\n    //method to render inline leaves in the slate editor\r\n    const renderLeaf = useCallback(props => {\r\n        return <Leaf {...props} />\r\n    }, [])\r\n    //method to render block/void elements in the slate editor\r\n    const renderElement = useCallback(props => {\r\n        const type = props.element.type;\r\n\r\n        if (type?.split(\" \")[0] === \"heading\") {\r\n            return <Heading {...props} />\r\n        }\r\n        switch (type) {\r\n            case 'exercise-block':\r\n                return <ExerciseBlock {...props} />\r\n            case 'exercise-list-items':\r\n                return <ExerciseList {...props} />\r\n            case 'missing-word-exercise-paragraph':\r\n                return <MissingWordExerciseParagraph {...props} />\r\n\r\n            case 'word-order-exercise-paragraph':\r\n                return <WordOrderExerciseParagraph {...props} />\r\n\r\n            default:\r\n                return <DefaultElement {...props} />\r\n        }\r\n    }, [])\r\n    return [renderLeaf, renderElement];\r\n}\r\n\r\nexport default useSlateRender\r\n","import { useState, useEffect } from \"react\"\r\nimport { isFullscreen } from \"../utils\";\r\n\r\nexport default function useIsFullscreen() {\r\n\r\n    const initialValue = isFullscreen();\r\n\r\n    const [value, setValue] = useState(initialValue);\r\n\r\n    function handler() {\r\n        setValue(isFullscreen());\r\n    }\r\n\r\n    useEffect(() => {\r\n        document.addEventListener('fullscreenchange', handler)\r\n\r\n        return () => {\r\n            document.removeEventListener('fullscreenchange', handler)\r\n        }\r\n    }, [])\r\n\r\n\r\n    return value;\r\n}","import { Node, Transforms } from \"slate\";\r\nimport { ReactEditor } from \"slate-react\";\r\n\r\nfunction createExercise(editor, { type }) {\r\n\r\n    const newNode = {\r\n        type: 'exercise-block',\r\n        exerciseType: type,\r\n        children: [\r\n            {\r\n                type: 'exercise-list-items',\r\n                children: [\r\n                    {\r\n                        type: 'paragraph',\r\n                        children: [\r\n                            {\r\n                                text: ''\r\n                            }\r\n                        ]\r\n                    }\r\n                ]\r\n            }\r\n        ]\r\n    }\r\n\r\n    if (editor.selection) {\r\n        const [node] = Node.fragment(editor, editor.selection);\r\n        //Prevent the user from creating embeded exercise-block s\r\n        if (node.type === \"exercise-block\") {\r\n            alert(\"No es posible crear un ejercicio dentro de otro ejercicio, selecciona una linea de texto vacía fuera del cuadro de ejercicio\");\r\n            return;\r\n        }\r\n    }\r\n\r\n    Transforms.insertNodes(editor, newNode, { select: true });\r\n    ReactEditor.focus(editor);\r\n\r\n}\r\n\r\nexport {\r\n    createExercise\r\n}","import Icon from '@chakra-ui/icon'\r\nimport { Menu, MenuButton, MenuGroup, MenuItem, MenuList } from '@chakra-ui/menu'\r\nimport React, { Fragment } from 'react'\r\nimport { BsFullscreen, BsFullscreenExit } from 'react-icons/bs'\r\nimport { FaFileUpload, FaPrint } from 'react-icons/fa'\r\nimport { RiDraftFill } from 'react-icons/ri'\r\nimport { useSlate } from 'slate-react'\r\nimport useIsFullscreen from '../../hooks/useIsFullscreen'\r\nimport { MissingWord as MissingWordIcon, WordOrderIcon } from '../../svgs'\r\nimport { isFullscreen } from '../../utils'\r\nimport { createExercise } from '../Slate/commands'\r\n\r\n\r\n\r\nconst ActionsMenu = ({ saveWorksheet }) => {\r\n    const editor = useSlate();\r\n    const isFullscreen = useIsFullscreen();\r\n\r\n    return (\r\n        <Fragment>\r\n            <Menu>\r\n                <MenuButton>Actividad</MenuButton>\r\n                <MenuList>\r\n                    <MenuItem onClick={saveWorksheet} icon={<Icon as={RiDraftFill} />} >Guardar Cambios</MenuItem>\r\n                    <MenuItem icon={<Icon as={FaFileUpload} />} >Publicar Actividad</MenuItem>\r\n                    <MenuItem icon={<Icon as={FaPrint} />} onClick={handlePrint}>Imprimir Actividad</MenuItem>\r\n                </MenuList>\r\n            </Menu>\r\n            <Menu>\r\n                <MenuButton mx=\"4\">Insertar</MenuButton>\r\n                <MenuList>\r\n                    <MenuGroup title=\"Ejercicios\">\r\n                        <MenuItem icon={<Icon w={8} h={8} as={MissingWordIcon} />} onClick={e => createExercise(editor, { type: \"missing-word\" })}>Palabras Faltantes</MenuItem>\r\n                        <MenuItem icon={<Icon w={8} h={8} as={WordOrderIcon} />} onClick={e => createExercise(editor, { type: \"word-order\" })}>Ordenar Oraciones</MenuItem>\r\n                    </MenuGroup>\r\n                </MenuList>\r\n            </Menu>\r\n            <Menu>\r\n                <MenuButton mx=\"4\">Ver</MenuButton>\r\n                <MenuList>\r\n                    {\r\n                        isFullscreen\r\n                            ? <MenuItem icon={<Icon as={BsFullscreenExit} />} onClick={handleCloseFullscreen}>Vista normal</MenuItem>\r\n                            : <MenuItem icon={<Icon as={BsFullscreen} />} onClick={handleOpenFullscreen}>Pantalla completa</MenuItem>\r\n                    }\r\n                </MenuList>\r\n            </Menu>\r\n        </Fragment>\r\n    )\r\n}\r\n\r\nfunction handlePrint(e) {\r\n    //set print preview scale to 100%\r\n    document.body.style.zoom = \"100%\";\r\n\r\n    //Deselect the button so the tooltip disappears\r\n    e.target.blur();\r\n\r\n    //Open the native print browser dialog\r\n    //with a delay to prevent the button tooltip apearing on the printing preview \r\n    setTimeout(() => {\r\n        window.print();\r\n    }, 500)\r\n}\r\n\r\nfunction handleOpenFullscreen() {\r\n\r\n    if (isFullscreen()) return;\r\n\r\n    let screen = document.documentElement;\r\n\r\n    if (screen.requestFullscreen) {\r\n        screen.requestFullscreen();\r\n    } else if (screen.mozRequestFullScreen) { /*Firefox*/\r\n        screen.mozRequestFullScreen();\r\n    } else if (screen.webkitRequestFullscreen) { /* Safari */\r\n        screen.webkitRequestFullscreen();\r\n    } else if (screen.msRequestFullscreen) { /* IE11 */\r\n        screen.msRequestFullscreen();\r\n    }\r\n}\r\n\r\nfunction handleCloseFullscreen() {\r\n\r\n    if (!isFullscreen()) return;\r\n\r\n    if (document.exitFullscreen) {\r\n        document.exitFullscreen();\r\n    } else if (document.mozCancelFullScreen) { /*Firefox */\r\n        document.mozCancelFullScreen();\r\n    } else if (document.webkitExitFullscreen) { /* Safari */\r\n        document.webkitExitFullscreen();\r\n    } else if (document.msExitFullscreen) { /* IE11 */\r\n        document.msExitFullscreen();\r\n    }\r\n}\r\n\r\n\r\n\r\nexport default ActionsMenu\r\n","import { Button } from '@chakra-ui/button'\r\nimport Icon from '@chakra-ui/icon'\r\nimport { Text } from '@chakra-ui/layout'\r\nimport { useMediaQuery } from '@chakra-ui/media-query'\r\nimport { Menu, MenuButton, MenuItem, MenuList } from '@chakra-ui/menu'\r\nimport { Tooltip } from '@chakra-ui/tooltip'\r\nimport React, { Fragment } from 'react'\r\nimport { FaAlignCenter, FaAlignJustify, FaAlignLeft, FaAlignRight, FaBold, FaHeading, FaItalic, FaStrikethrough, FaUnderline } from 'react-icons/fa'\r\nimport { HiViewGridAdd } from 'react-icons/hi'\r\nimport { useSlate } from 'slate-react'\r\nimport { MissingWord as MissingWordIcon, WordOrderIcon } from '../../svgs'\r\nimport { createExercise } from '../Slate/commands'\r\nimport ToolbarButton from '../Slate/ToolbarButton'\r\n\r\nconst DesktopToolbar = () => {\r\n\r\n    const editor = useSlate();\r\n    const [isDesktop] = useMediaQuery(\"(min-width: 1024px)\")\r\n    return (\r\n        <Fragment>\r\n\r\n            <Menu>\r\n                <MenuButton  {...isDesktop ? '' : { ...{ borderRadius: \"none\", height: \"full\" } }} flex=\"0 0 auto\" display=\"flex\" as={Button} size=\"sm\" colorScheme=\"brand\" variant=\"solid\">\r\n                    <Icon w={5} h={5} mr=\"2\" as={HiViewGridAdd} /> Insertar Ejercicio\r\n                </MenuButton>\r\n                <MenuList>\r\n                    <MenuItem icon={<Icon w={5} h={5} as={MissingWordIcon} />}\r\n                        onClick={e => createExercise(editor, { type: \"missing-word\" })}\r\n                    >Palabras faltantes</MenuItem>\r\n                    <MenuItem icon={<Icon w={5} h={5} as={WordOrderIcon} />}\r\n                        onClick={e => createExercise(editor, { type: \"word-order\" })}\r\n                    >Ordernar oraciones</MenuItem>\r\n                </MenuList>\r\n            </Menu>\r\n\r\n            <Menu>\r\n                <Tooltip hasArrow label=\"Estilos de tipografía\" fontSize=\"md\">\r\n                    <MenuButton\r\n                        as={Button}\r\n                        aria-label=\"Estilos de tipografía\"\r\n                        variant=\"ghost\"\r\n                        color=\"#616161\"\r\n                        size=\"sm\"\r\n                    >\r\n                        <Icon as={FaHeading} />\r\n                    </MenuButton>\r\n                </Tooltip>\r\n\r\n                <MenuList>\r\n                    <ToolbarButton variant=\"menuListItem\" type=\"block\" format=\"heading 4xl\" label={<Text fontSize=\"3xl\">Título 1</Text>} />\r\n                    <ToolbarButton variant=\"menuListItem\" type=\"block\" format=\"heading 3xl\" label={<Text fontSize=\"2xl\">Título 2</Text>} />\r\n                    <ToolbarButton variant=\"menuListItem\" type=\"block\" format=\"heading 2xl\" label={<Text fontSize=\"xl\">Subtítulo 1</Text>} />\r\n                    <ToolbarButton variant=\"menuListItem\" type=\"block\" format=\"heading xl\" label={<Text fontSize=\"lg\">Subtítulo 2</Text>} />\r\n                    <ToolbarButton variant=\"menuListItem\" type=\"block\" format=\"\" label={<Text fontSize=\"md\">Texto normal</Text>} />\r\n                </MenuList>\r\n            </Menu>\r\n\r\n            <ToolbarButton type=\"mark\" format=\"bold\" label=\"Negrita\" icon={<Icon as={FaBold} />} />\r\n            <ToolbarButton type=\"mark\" format=\"italic\" label=\"Cursiva\" icon={<Icon as={FaItalic} />} />\r\n            <ToolbarButton type=\"mark\" format=\"underline\" label=\"Subrayado\" icon={<Icon as={FaUnderline} />} />\r\n            <ToolbarButton type=\"mark\" format=\"strike\" label=\"Tachado\" icon={<Icon as={FaStrikethrough} />} />\r\n\r\n            <ToolbarButton type=\"block\" formatKey=\"textAlign\" format=\"left\" label=\"Alinear a la izquierda\" icon={<Icon as={FaAlignLeft} />} />\r\n            <ToolbarButton type=\"block\" formatKey=\"textAlign\" format=\"center\" label=\"Alinear al centro\" icon={<Icon as={FaAlignCenter} />} />\r\n            <ToolbarButton type=\"block\" formatKey=\"textAlign\" format=\"right\" label=\"Alinear a la derecha\" icon={<Icon as={FaAlignRight} />} />\r\n            <ToolbarButton type=\"block\" formatKey=\"textAlign\" format=\"justify\" label=\"Justificar\" icon={<Icon as={FaAlignJustify} />} />\r\n\r\n        </Fragment>\r\n    )\r\n}\r\n\r\nexport default DesktopToolbar\r\n","// @refresh reset\r\nimport React, { useEffect, Fragment, useReducer } from 'react'\r\nimport { useHistory, useParams } from \"react-router-dom\"\r\nimport { Slate } from \"slate-react\"\r\n\r\nimport Navbar from \"../components/Form/Navbar\";\r\nimport WorksheetTitle from \"../components/Form/WorksheetTitle\";\r\n\r\nimport { Box, Icon, IconButton, ButtonGroup, Text, Grid, GridItem, MenuItem, Flex, Menu, MenuButton, Button, MenuList, Divider, Switch, MenuGroup, useMediaQuery, Slide, MenuDivider, useToast, Skeleton, Progress } from \"@chakra-ui/react\";\r\n\r\nimport Editable from \"../components/Slate/Editable\";\r\nimport LanguagePicker from '../components/LanguagePicker';\r\nimport PublicSwitch from '../components/PublicSwitch';\r\nimport Logo from '../components/Logo';\r\n\r\nimport { FaArrowLeft, FaFileUpload, FaChalkboardTeacher, FaPrint, FaHome, FaChevronUp } from \"react-icons/fa\";\r\nimport { HiDotsVertical } from 'react-icons/hi';\r\nimport { RiDraftFill } from \"react-icons/ri\";\r\nimport { BsFullscreenExit, BsFullscreen } from \"react-icons/bs\";\r\nimport { MdKeyboardHide } from \"react-icons/md\";\r\n\r\nimport useSlateEditor from '../hooks/useSlateEditor';\r\nimport useSlateRender from '../hooks/useSlateRender';\r\nimport useDocumentTitle from \"../hooks/useDocumentTitle\";\r\nimport useIsFullscreen from \"../hooks/useIsFullscreen\";\r\n\r\nimport { Transforms } from 'slate';\r\nimport { isFullscreen, parseWorksheet, stringifyWorkshet } from '../utils';\r\nimport useSlateDecorate from '../hooks/useSlateDecorate';\r\nimport ActionsMenu from '../components/Form/ActionsMenu';\r\nimport Toolbar from '../components/Form/Toolbar';\r\n\r\n\r\nconst ACTIONS = {\r\n    SAVING_WORKSHEET: 'saving-worksheet',\r\n    TOGGLE_WRITTING_MODE: \"toggle-writting-mode\",\r\n    CHANGE_WORKSHEET_PROP: \"change-worksheet-prop\",\r\n    SET_WORKSHEET: \"set-worksheet\",\r\n    SUCESS: \"sucess\",\r\n    ERROR: \"error\",\r\n}\r\n\r\n\r\nfunction reducer(state, action) {\r\n\r\n    switch (action.type) {\r\n        case ACTIONS.TOGGLE_WRITTING_MODE:\r\n            return {\r\n                ...state,\r\n                isWritingMode: !state.isWritingMode\r\n            }\r\n        case ACTIONS.CHANGE_WORKSHEET_PROP: {\r\n            if (!action.payload.property) throw new Error(\"'property' is required but got undefined\");\r\n\r\n            //prevent user from updating content prop when being in preview mode\r\n            if (action.payload.property === \"content\" && !state.isWritingMode) {\r\n                console.log(\"Cannot update activity state in preview mode\");\r\n                return state;\r\n            }\r\n\r\n            const updatedWorksheet = { ...state.worksheet };\r\n            updatedWorksheet[action.payload.property] = action.payload.value;\r\n\r\n            return {\r\n                ...state,\r\n                worksheet: updatedWorksheet,\r\n            }\r\n        }\r\n        case ACTIONS.SAVING_WORKSHEET:\r\n            return {\r\n                ...state,\r\n                savingWorksheet: true,\r\n            }\r\n        case ACTIONS.SET_WORKSHEET:\r\n            return {\r\n                ...state,\r\n                savingWorksheet: false,\r\n                loading: false,\r\n                worksheet: action.payload.worksheet,\r\n                error: undefined\r\n            }\r\n        case ACTIONS.ERROR:\r\n            return {\r\n                ...state,\r\n                loading: false,\r\n                error: action.payload.error\r\n            }\r\n        default:\r\n            console.warn(\"Action provided did not matched\", action);\r\n            return state;\r\n    }\r\n}\r\n\r\nconst initialValue = {\r\n    isWritingMode: true,\r\n    loading: true,\r\n    error: \"\",\r\n    worksheet: undefined,\r\n    savingWorksheet: false\r\n}\r\n\r\nfunction handleOpenFullscreen() {\r\n\r\n    if (isFullscreen()) return;\r\n\r\n    let screen = document.documentElement;\r\n\r\n    if (screen.requestFullscreen) {\r\n        screen.requestFullscreen();\r\n    } else if (screen.mozRequestFullScreen) { /*Firefox*/\r\n        screen.mozRequestFullScreen();\r\n    } else if (screen.webkitRequestFullscreen) { /* Safari */\r\n        screen.webkitRequestFullscreen();\r\n    } else if (screen.msRequestFullscreen) { /* IE11 */\r\n        screen.msRequestFullscreen();\r\n    }\r\n}\r\n\r\nfunction handleCloseFullscreen() {\r\n\r\n    if (!isFullscreen()) return;\r\n\r\n    if (document.exitFullscreen) {\r\n        document.exitFullscreen();\r\n    } else if (document.mozCancelFullScreen) { /*Firefox */\r\n        document.mozCancelFullScreen();\r\n    } else if (document.webkitExitFullscreen) { /* Safari */\r\n        document.webkitExitFullscreen();\r\n    } else if (document.msExitFullscreen) { /* IE11 */\r\n        document.msExitFullscreen();\r\n    }\r\n}\r\n\r\nconst Form = () => {\r\n    const history = useHistory();\r\n    const toast = useToast();\r\n    //Get the id of the worksheet from the url \r\n    const { id } = useParams();\r\n    //Slate editor component\r\n    const editor = useSlateEditor();\r\n\r\n    //Slate editor render functions\r\n    const [renderLeaf, renderElement] = useSlateRender();\r\n    const decorate = useSlateDecorate(editor);\r\n\r\n    const [state, dispatch] = useReducer(reducer, initialValue);\r\n    const { worksheet, loading, error, isWritingMode, savingWorksheet } = state;\r\n\r\n    const isFullscreen = useIsFullscreen();\r\n\r\n    useEffect(() => {\r\n        async function getWorksheet() {\r\n            const response = await fetch(`/api/activities/${id}`);\r\n            const json = await response.json();\r\n\r\n            if (response.status === 404) {\r\n                history.push(`/worksheets/404`);\r\n                return;\r\n            }\r\n\r\n            if (response.ok) {\r\n                dispatch({ type: ACTIONS.SET_WORKSHEET, payload: { worksheet: parseWorksheet(json) } })\r\n                return;\r\n            }\r\n\r\n            toast({\r\n                description: json.message,\r\n                status: 'error',\r\n                isClosable: true\r\n            })\r\n\r\n            // dispatch({ type: ACTIONS.ERROR, payload: { error: json } });\r\n\r\n        }\r\n\r\n        getWorksheet();\r\n\r\n    }, [id, toast, history]);\r\n\r\n    async function saveWorksheet() {\r\n\r\n        if (state.loading) {\r\n            return console.log(\"Cannot save changes when page is loading\");\r\n        }\r\n\r\n        dispatch({ type: ACTIONS.SAVING_WORKSHEET });\r\n\r\n        const response = await fetch(`/api/activities/${id}`, {\r\n            method: 'PUT',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify(stringifyWorkshet(worksheet))\r\n        })\r\n\r\n        const json = await response.json();\r\n        if (response.ok) {\r\n\r\n            dispatch({ type: ACTIONS.SET_WORKSHEET, payload: { worksheet: parseWorksheet(json) } });\r\n            toast({\r\n                position: isDesktop ? 'top-right' : 'bottom',\r\n                title: \"Actividad Guardada\",\r\n                description: \"La actividad fue guardada exitósamente\",\r\n                status: \"success\",\r\n                duration: 5000,\r\n                isClosable: true\r\n            })\r\n            return;\r\n        }\r\n\r\n        dispatch({ type: ACTIONS.ERROR, payload: { error: json } });\r\n    }\r\n\r\n    function handlePrint(e) {\r\n        //set print preview scale to 100%\r\n        document.body.style.zoom = \"100%\";\r\n\r\n        //Deselect the button so the tooltip disappears\r\n        e.target.blur();\r\n\r\n        //Open the native print browser dialog\r\n        //with a delay to prevent the button tooltip apearing on the printing preview \r\n        setTimeout(() => {\r\n            window.print();\r\n        }, 500)\r\n    }\r\n\r\n    const title = !!state?.worksheet?.title\r\n        ? `LangSheets | ${state?.worksheet?.title}`\r\n        : \"LangSheets\";\r\n    useDocumentTitle(title);\r\n\r\n    const host = window.location.host;\r\n\r\n    const [isDesktop] = useMediaQuery(\"(min-width: 1024px)\")\r\n\r\n\r\n    function handleHideKeyboard() {\r\n        Transforms.deselect(editor);\r\n    }\r\n    return (\r\n        <Slate\r\n            {...{\r\n                editor,\r\n                value: loading\r\n                    ? [{ children: [{ text: 'Cargando...' }] }]\r\n                    : error\r\n                        ? [{ children: [{ text: '' }] }]\r\n                        : worksheet.content,\r\n                onChange: newContent => dispatch({ type: ACTIONS.CHANGE_WORKSHEET_PROP, payload: { property: \"content\", value: newContent } })\r\n            }}\r\n        >\r\n            { isDesktop\r\n                ? (\r\n\r\n                    <Grid h=\"100vh\" templateColumns=\"repeat(12, 1fr)\" templateRows=\"auto 1fr\">\r\n\r\n                        <GridItem rowSpan={2} colSpan={1} bg=\"#05043E\" py=\"10\" position=\"sticky\" top=\"0\" zIndex=\"docked\" sx={{\r\n                            \"@media print\": {\r\n                                display: \"none\",\r\n                            }\r\n                        }}>\r\n                            <Navbar {...{ handlePrint, id }} />\r\n                        </GridItem>\r\n\r\n\r\n                        <GridItem rowSpan={1} colSpan={11} sx={{\r\n                            \"@media print\": {\r\n                                display: \"none\",\r\n                            }\r\n                        }} >\r\n                            {loading &&\r\n                                <Progress size=\"sm\" isIndeterminate\r\n                                    sx={{\r\n                                        \"& > div\": {\r\n                                            background: \"var(--chakra-colors-brand-300)\"\r\n                                        }\r\n                                    }}\r\n                                />\r\n                            }\r\n\r\n                            <Grid gridTemplateRows=\"auto auto auto\" gridTemplateColumns=\"50px 1fr auto\" h=\"full\" bg=\"white\">\r\n\r\n                                <GridItem rowSpan=\"1\" colSpan=\"1\" display=\"grid\" placeItems=\"center\" >\r\n                                    <Box as=\"a\" href=\"/\" mx=\"4\">\r\n                                        <Icon as={FaArrowLeft} />\r\n                                    </Box>\r\n                                </GridItem>\r\n\r\n                                <GridItem rowSpan=\"1\" display=\"flex\" flexDirection=\"row\" alignItems=\"center\" pt=\"2\">\r\n                                    <Skeleton isLoaded={!loading} >\r\n                                        <WorksheetTitle {...{ dispatch, title: worksheet ? worksheet.title : \"\" }} />\r\n                                    </Skeleton>\r\n                                </GridItem>\r\n\r\n                                <GridItem display=\"flex\" alignItems=\"center\" px=\"4\" colStart={3} rowSpan={2}>\r\n                                    <ButtonGroup>\r\n                                        <Button isLoading={savingWorksheet} onClick={saveWorksheet} colorScheme=\"brand\" variant=\"ghost\">\r\n                                            <Icon as={RiDraftFill} mr=\"2\" />\r\n                                        Guardar Cambios\r\n                                    </Button>\r\n                                        <Button colorScheme=\"brand\">\r\n                                            <Icon as={FaFileUpload} mr=\"2\" />\r\n                                        Publicar\r\n                                    </Button>\r\n                                    </ButtonGroup>\r\n                                </GridItem>\r\n\r\n                                <GridItem py=\"2\" colStart={2} rowSpan=\"1\" display=\"inline-flex\" alignItems=\"center\">\r\n                                    <ActionsMenu {...{ saveWorksheet }} />\r\n                                </GridItem>\r\n                                <GridItem py=\"2\" px=\"5\" colSpan={3} width=\"full\" borderTop=\"2px solid var(--chakra-colors-gray-100)\">\r\n                                    <ButtonGroup as={Flex} alignItems=\"center\">\r\n                                        <Toolbar />\r\n                                    </ButtonGroup>\r\n                                </GridItem>\r\n                            </Grid>\r\n\r\n                        </GridItem>\r\n\r\n\r\n                        <GridItem rowSpan={1} colSpan={8} p=\"12\" bg=\"gray.100\" sx={{\r\n                            \"@media print\": {\r\n                                gridColumn: \"span 12/span 12\",\r\n                                gridRow: \"span 2/span 2\"\r\n                            }\r\n                        }}>\r\n                            <Skeleton isLoaded={!loading}>\r\n                                <Editable\r\n                                    {...{\r\n                                        decorate,\r\n                                        renderElement,\r\n                                        renderLeaf,\r\n                                        readOnly: !isWritingMode,\r\n                                        placeholder: \"Escribe aquí...\"\r\n                                    }}\r\n                                />\r\n                            </Skeleton>\r\n                        </GridItem>\r\n\r\n                        <GridItem rowSpan={1} colSpan={3}\r\n                            sx={{\r\n                                \"@media print\": {\r\n                                    display: \"none\",\r\n                                }\r\n                            }}>\r\n                            <Divider />\r\n                            <Box p=\"4\">\r\n                                <Text fontWeight=\"semibold\" fontSize=\"lg\">Detalles de la actividad</Text>\r\n                                {\r\n                                    !loading && !error &&\r\n                                    <Fragment>\r\n                                        <LanguagePicker {...{ dispatch, lang: worksheet.lang }} />\r\n                                        <PublicSwitch {...{ dispatch, isPublic: worksheet.isPublic }} />\r\n\r\n                                    </Fragment>\r\n                                }\r\n                            </Box>\r\n\r\n                            <Divider />\r\n                            <Box p=\"4\">\r\n                                <Text fontWeight=\"semibold\" fontSize=\"lg\">Ajustes</Text>\r\n                                <Text my=\"2\" >\r\n                                    Modo de edición: <Switch colorScheme=\"brand\" ml=\"4\" isChecked={isWritingMode} onChange={() => dispatch({ type: \"toggle-writting-mode\" })} />\r\n                                </Text>\r\n                            </Box>\r\n\r\n                        </GridItem>\r\n\r\n                    </Grid>\r\n                )\r\n                : (\r\n                    <Flex flexDir=\"column\" minH=\"100vh\">\r\n                        {loading &&\r\n                            <Progress size=\"sm\" isIndeterminate\r\n                                sx={{\r\n                                    \"& > div\": {\r\n                                        background: \"var(--chakra-colors-brand-300)\"\r\n                                    }\r\n                                }}\r\n                            />\r\n                        }\r\n                        <Flex py=\"2\" px=\"4\" alignItems=\"center\">\r\n\r\n                            <Box flexGrow=\"1\">\r\n                                <Skeleton isLoaded={!loading} >\r\n                                    <WorksheetTitle {...{ dispatch, title: worksheet ? worksheet.title : \"\" }} />\r\n                                </Skeleton>\r\n                            </Box>\r\n\r\n                            <Menu>\r\n                                <MenuButton variant=\"ghost\" colorScheme=\"brand\" icon={<Icon as={HiDotsVertical} />} as={IconButton} />\r\n                                <MenuList>\r\n                                    <MenuGroup title=\"Actividad\">\r\n                                        <MenuItem onClick={saveWorksheet} icon={<Icon color=\"brand.500\" as={RiDraftFill} />} >Guardar Cambios</MenuItem>\r\n                                        <MenuItem icon={<Icon color=\"brand.500\" as={FaFileUpload} />} >Publicar Actividad</MenuItem>\r\n                                    </MenuGroup>\r\n                                    <MenuDivider />\r\n                                    <MenuGroup title=\"Ver\">\r\n                                        {\r\n                                            isFullscreen\r\n                                                ? <MenuItem icon={<Icon as={BsFullscreenExit} />} onClick={handleCloseFullscreen}>Vista normal</MenuItem>\r\n                                                : <MenuItem icon={<Icon as={BsFullscreen} />} onClick={handleOpenFullscreen}>Pantalla completa</MenuItem>\r\n                                        }\r\n                                    </MenuGroup>\r\n                                </MenuList>\r\n                            </Menu>\r\n\r\n                        </Flex>\r\n                        <Divider />\r\n                        <Box flexGrow=\"1\" bg=\"gray.100\" p=\"4\" boxShadow=\"base\">\r\n                            <Skeleton height=\"full\" isLoaded={!loading}>\r\n                                <Editable\r\n                                    {...{\r\n                                        decorate,\r\n                                        renderElement,\r\n                                        renderLeaf,\r\n                                        readOnly: !isWritingMode,\r\n                                        placeholder: \"Escribe aquí...\"\r\n                                    }}\r\n                                />\r\n                            </Skeleton>\r\n                        </Box>\r\n\r\n                        {editor.selection && (\r\n                            <Slide direction=\"bottom\" in={editor.selection} style={{ zIndex: 50, boxShadow: \"var(--chakra-shadows-dark-lg)\", }}>\r\n\r\n                                <Flex pr=\"30vw\" w=\"100vw\" color=\"#616161\" bg=\"white\" alignItems=\"center\" height=\"50px\">\r\n                                    <Flex width=\"full\" height=\"full\" overflowX=\"auto\" alignItems=\"center\">\r\n                                        <Toolbar />\r\n                                    </Flex>\r\n\r\n                                    <Flex height=\"full\" position=\"fixed\" bottom=\"0\" right=\"0\" alignItems=\"center\">\r\n                                        <Divider orientation=\"vertical\" />\r\n                                        <IconButton bg=\"white\" borderRadius=\"none\" height=\"full\" onClick={handleHideKeyboard} variant=\"ghost\" colorScheme=\"brand\" icon={<Icon as={MdKeyboardHide} />} />\r\n                                        <Divider orientation=\"vertical\" />\r\n                                        <IconButton variant=\"ghost\" borderRadius=\"none\" height=\"full\" colorScheme=\"brand\" icon={<Icon as={FaChevronUp} />} />\r\n                                    </Flex>\r\n                                </Flex>\r\n\r\n                            </Slide>\r\n                        )}\r\n\r\n                        {!editor.selection && (\r\n                            <Slide direction=\"bottom\" in={!editor.selection} style={{ zIndex: 150 }}>\r\n\r\n                                <Box color=\"white\" display=\"flex\" bg=\"#05043E\" alignItems=\"center\" width=\"100%\" justifyContent=\"space-around\">\r\n                                    <Flex onClick={handlePrint} flexDir=\"column\" alignItems=\"center\" justifyContent=\"center\" cursor=\"pointer\" aria-label=\"button\" py=\"2\" _hover={{ color: \"var(--chakra-colors-brand-300)\" }} >\r\n                                        <Icon w={6} h={6} as={FaPrint} />\r\n                                        <Text fontSize=\"x-small\">Imprimir</Text>\r\n                                    </Flex>\r\n\r\n                                    <Flex flexDir=\"column\" alignItems=\"center\" justifyContent=\"center\" cursor=\"pointer\" aria-label=\"button\" py=\"2\" _hover={{ color: \"var(--chakra-colors-brand-300)\" }} >\r\n                                        <Icon w={6} h={6} as={FaHome} />\r\n                                        <Text fontSize=\"x-small\">Inicio</Text>\r\n                                    </Flex>\r\n\r\n                                    <Flex flexDir=\"column\" alignItems=\"center\" justifyContent=\"center\" cursor=\"pointer\" aria-label=\"button\" py=\"2\" _hover={{ color: \"var(--chakra-colors-brand-300)\" }}>\r\n                                        <Icon w={6} h={6} as={FaChalkboardTeacher} />\r\n                                        <Text fontSize=\"x-small\">Previsualizar</Text>\r\n                                    </Flex>\r\n                                </Box>\r\n                            </Slide>\r\n                        )}\r\n                    </Flex>\r\n                )\r\n            }\r\n\r\n\r\n            {/* <pre>\r\n        {worksheet && JSON.stringify(worksheet.content, null, 2)}\r\n    </pre> */}\r\n            <Box display=\"none\" flexDirection=\"column\" alignItems=\"flex-start\" position=\"fixed\" zIndex=\"banner\" bottom=\"0.5\" width=\"full\"\r\n                sx={{\r\n                    \"@media print\": {\r\n                        display: \"flex\",\r\n                    }\r\n                }}\r\n            >\r\n                <Icon as={Logo} />\r\n                <Text fontSize=\"smaller\"> {host}/worksheets/{id}/practice </Text>\r\n            </Box>\r\n        </Slate >\r\n    )\r\n}\r\n\r\n\r\n\r\nexport default Form\r\n","import { useCallback } from \"react\";\r\nimport { Node, Text } from \"slate\";\r\n\r\nexport default function useSlateDecorate(editor) {\r\n\r\n    return useCallback(([node, path]) => {\r\n        const ranges = [];\r\n\r\n        if (Text.isText(node)) {\r\n            const parent = Node.parent(editor, path);\r\n            console.log(parent);\r\n            if (parent.type === \"word-order-exercise-paragraph\") {\r\n                const { text } = node\r\n                const parts = text.split(\"/\")\r\n                let offset = 0;\r\n\r\n                parts.forEach((part, index) => {\r\n                    if (index !== 0) {\r\n                        ranges.push({\r\n                            anchor: { path, offset: offset - 1 },\r\n                            focus: { path, offset },\r\n                            division: true,\r\n                        })\r\n                    }\r\n\r\n                    offset = offset + part.length + 1;\r\n                })\r\n            }\r\n        }\r\n        return ranges\r\n    }, [editor])\r\n}","// @refresh reset\r\nimport React, { Fragment, useEffect, useRef, useReducer } from 'react'\r\nimport { useParams } from \"react-router-dom\"\r\n\r\nimport { Slate, Editable } from \"slate-react\"\r\n\r\nimport { Container, Box, Text, Input, Flex, Button, useToast, Avatar, AvatarGroup } from \"@chakra-ui/react\";\r\n// import Navbar from \"../components/Navbar\";\r\n\r\n\r\nimport useBodyBackground from '../hooks/useBodyBackground';\r\nimport useSlateRender from '../hooks/useSlateRender';\r\nimport useSlateEditor from '../hooks/useSlateEditor';\r\nimport useDocumentTitle from '../hooks/useDocumentTitle';\r\nimport { parseWorksheet } from '../utils';\r\n\r\nimport { SocketContext, socket } from \"../context/socket\";\r\nimport { Transforms } from 'slate';\r\n// import Logo from '../components/Logo';\r\nimport { FaUserAlt } from 'react-icons/fa';\r\n// import { HiPhoneIncoming } from 'react-icons/hi';\r\n\r\nconst initialValue = {\r\n    users: [],\r\n    username: undefined,\r\n    worksheet: {\r\n        title: \"\",\r\n        content: [\r\n            {\r\n                type: \"paragraph\",\r\n                children: [\r\n                    {\r\n                        text: \"\"\r\n                    }\r\n                ]\r\n            }\r\n        ]\r\n    }\r\n};\r\n\r\nfunction reducer(state, action) {\r\n    console.log(`> Practice reducer: ${action.type}`);\r\n    switch (action.type) {\r\n        case 'set-username':\r\n            return {\r\n                ...state,\r\n                username: action.payload.username\r\n            }\r\n        case 'set-worksheet':\r\n            return {\r\n                ...state,\r\n                worksheet: action.payload.worksheet\r\n            }\r\n        case 'set-worksheet-content':\r\n            return {\r\n                ...state,\r\n                worksheet: {\r\n                    ...state.worksheet,\r\n                    content: action.payload.content\r\n                }\r\n            }\r\n        case 'add-user':\r\n            return {\r\n                ...state,\r\n                users: [\r\n                    ...state.users,\r\n                    action.payload.user\r\n                ]\r\n            }\r\n        case 'set-users':\r\n            return {\r\n                ...state,\r\n                users: action.payload.users\r\n            }\r\n        default:\r\n            console.warn(\"Action provided did not matched\", action);\r\n            return state;\r\n    }\r\n}\r\n\r\n\r\nconst Practice = () => {\r\n    //Get the id of the worksheet from the url \r\n    const { id } = useParams();\r\n\r\n    const editor = useSlateEditor();\r\n\r\n    const [renderLeaf, renderElement] = useSlateRender();\r\n\r\n    const [state, dispatch] = useReducer(reducer, initialValue);\r\n    const { username, users, worksheet } = state;\r\n\r\n    const toast = useToast();\r\n\r\n\r\n\r\n    useEffect(() => {\r\n        async function getWorksheet() {\r\n            const response = await fetch(`/api/activities/${id}`);\r\n            const json = await response.json();\r\n\r\n            if (response.ok) {\r\n                const worksheet = parseWorksheet(json);\r\n                dispatch({ type: 'set-worksheet', payload: { worksheet } });\r\n            }\r\n\r\n        }\r\n        getWorksheet();\r\n    }, [id])\r\n\r\n    useEffect(() => {\r\n        if (username) {\r\n            socket.auth = { username };\r\n            socket.connect();\r\n            socket.emit('join-room', id);\r\n        }\r\n    }, [id, username])\r\n\r\n    useEffect(() => {\r\n\r\n        // socket.onAny((event, ...args) => {\r\n        //     console.log(event, args);\r\n        // });\r\n\r\n        socket.on('users', (commingUsers) => {\r\n            dispatch({ type: 'set-users', payload: { users: commingUsers } });\r\n        });\r\n\r\n        socket.on(\"user-connected\", (newUser) => {\r\n            toast({\r\n                description: `${newUser.username} ha ingresado a la actividad.`,\r\n                status: \"info\",\r\n                duration: 3000,\r\n                position: \"top-right\",\r\n                isClosable: true,\r\n            })\r\n            dispatch({ type: 'add-user', payload: { user: newUser } });\r\n        });\r\n\r\n        //Send the updated contend to a new user \r\n        socket.on(\"send-updated-content\", (userID) => {\r\n            // console.log(worksheet.content);\r\n            socket.emit('send-updated-content', userID, worksheet.content);\r\n        });\r\n\r\n        socket.on(\"user-disconnected\", ({ username, users }) => {\r\n            toast({\r\n                description: `${username} se ha salido de la actividad.`,\r\n                status: \"info\",\r\n                duration: 3000,\r\n                position: \"top-right\",\r\n                isClosable: true,\r\n            })\r\n            dispatch({ type: 'set-users', payload: { users } });\r\n        });\r\n\r\n        socket.on('action', (value) => {\r\n            if (editor.children.length === 0) return;\r\n            const { path, ...action } = value;\r\n\r\n            switch (action.type) {\r\n                case 'update-content':\r\n                    console.log(action.content);\r\n                    dispatch({ type: 'set-worksheet-content', payload: { content: action.content } })\r\n                    break;\r\n                case 'set-leaf-props':\r\n                    Transforms.setNodes(editor, {\r\n                        ...action.props\r\n                    }, { at: path });\r\n                    break;\r\n                case 'input-focused':\r\n                    Transforms.setNodes(editor, {\r\n                        focused: true,\r\n                        user: action.user\r\n                    }, { at: path });\r\n                    break;\r\n                case 'input-blured':\r\n                    Transforms.setNodes(editor, {\r\n                        focused: false\r\n                    }, { at: path });\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        });\r\n\r\n        socket.on('connection_error', (err) => {\r\n            // console.error(err);\r\n            switch (err.message) {\r\n                case \"invalid username\":\r\n                    toast({\r\n                        description: \"Debes elegir un nombre válido\",\r\n                        status: \"warning\",\r\n                        duration: 8000,\r\n                        position: \"top-right\",\r\n                        isClosable: true,\r\n                    })\r\n                    break;\r\n                case \"invalid room\":\r\n                    socket.emit(\"join-room\", id)\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        })\r\n\r\n        return () => {\r\n            socket.offAny();\r\n            socket.off(\"send-updated-content\");\r\n            socket.off('users');\r\n            socket.off('user-connected');\r\n            socket.off('user-disconnected');\r\n            socket.off('action');\r\n            socket.off('connection_error');\r\n        }\r\n    }, [id, worksheet, editor, toast])\r\n\r\n    //Set a custom background color\r\n    useBodyBackground(\"var(--chakra-colors-gray-100)\");\r\n    useDocumentTitle(`LangSheets | ${worksheet.title}`);\r\n    return (\r\n        username ? (\r\n            <Fragment>\r\n\r\n                <Flex py=\"2\" >\r\n                    <Text flexGrow=\"1\" color=\"brand.600\" px=\"4\" fontSize=\"x-large\" fontWeight=\"bold\" >{worksheet.title}</Text>\r\n                    <Flex justifyContent=\"flex-end\" alignItems=\"center\" px=\"4\">\r\n                        <UsersList users={users} />\r\n                    </Flex>\r\n                </Flex>\r\n\r\n                {/* <Navbar /> */}\r\n\r\n                <Box >\r\n                    <Container maxWidth=\"container.lg\" my=\"4\" >\r\n                        <SocketContext.Provider value={socket}>\r\n                            <Slate\r\n                                {...{\r\n                                    editor,\r\n                                    value: worksheet.content,\r\n                                    onChange: (newContent) => dispatch({ type: 'set-worksheet-content', payload: { content: newContent } })\r\n                                }}\r\n                            >\r\n                                <Box background=\"white\" px={[\"8\", \"16\"]} py=\"16\" as={Editable} shadow=\"sm\"\r\n                                    {...{ renderElement, renderLeaf, readOnly: true }}\r\n                                />\r\n                            </Slate>\r\n                        </SocketContext.Provider>\r\n                    </Container>\r\n                </Box >\r\n            </Fragment>\r\n        ) : (\r\n            <UserNameForm {...{ dispatch }} />\r\n        )\r\n\r\n    )\r\n}\r\n\r\nconst UsersList = ({ users }) => (\r\n    <AvatarGroup size=\"sm\" max={3}>\r\n        {users.map(({ username, userID }) => (\r\n            <Avatar key={userID} bg=\"brand.500\" color=\"white\" name={username} src={<FaUserAlt />} title={username} />\r\n        ))}\r\n    </AvatarGroup>\r\n)\r\n\r\n\r\nconst UserNameForm = (props) => {\r\n    const { dispatch } = props;\r\n\r\n    const toast = useToast();\r\n    const inputRef = useRef();\r\n\r\n    function handleSetUserName() {\r\n        const username = inputRef.current.value;\r\n        if (username.trim() !== \"\") {\r\n            dispatch({ type: 'set-username', payload: { username } })\r\n            return\r\n        }\r\n\r\n        toast({\r\n            description: \"Debes elegir un nombre válido\",\r\n            status: \"warning\",\r\n            duration: 8000,\r\n            position: \"top-right\",\r\n            isClosable: true,\r\n        })\r\n\r\n    }\r\n\r\n    return (\r\n        <Flex bg=\"gray.100\" h=\"100vh\" alignItems=\"center\" justifyContent=\"center\">\r\n            <Flex flexDir=\"column\" bg=\"white\" px=\"10\" py=\"5\" boxShadow=\"base\" borderRadius=\"base\" alignItems=\"center\" justifyContent=\"center\">\r\n                <Text fontSize=\"x-large\" my=\"4\">Ingresa tu nombre</Text>\r\n                <Input onSubmit={handleSetUserName} size=\"lg\" ref={inputRef} variant=\"filled\" my=\"4\" placeholder=\"Escribe un nombre\" />\r\n                <Button variant=\"solid\" colorScheme=\"brand\" my=\"4\" onClick={handleSetUserName}>Aceptar</Button>\r\n            </Flex>\r\n        </Flex>\r\n    )\r\n};\r\n\r\nexport default Practice\r\n","import { Flex, Text } from '@chakra-ui/layout'\r\nimport React, { Fragment } from 'react'\r\nimport Navbar from '../components/Navbar'\r\nimport useDocumentTitle from '../hooks/useDocumentTitle'\r\n\r\nconst NotFounded = () => {\r\n    useDocumentTitle(\"Página no encontrada\")\r\n    return (\r\n        <Fragment>\r\n            <Navbar />\r\n            <Flex alignItems=\"center\" flexDirection=\"column\" justifyContent=\"center\" textAlign=\"center\" height=\"100vh\">\r\n\r\n                <Text fontSize=\"6xl\">404</Text>\r\n                <Text fontSize=\"4xl\">Page not founded</Text>\r\n            </Flex>\r\n        </Fragment>\r\n    )\r\n}\r\n\r\nexport default NotFounded\r\n","\nimport { ChakraProvider } from \"@chakra-ui/react\";\nimport theme from \"./theme\";\n\nimport Home from \"./pages/Home\";\nimport Form from \"./pages/Form\";\nimport Practice from \"./pages/Practice\";\nimport NotFounded from \"./pages/NotFounded\";\n\n\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\n\nfunction App() {\n  return (\n    <ChakraProvider theme={theme}>\n      <div className=\"App\">\n        <Router>\n          <Switch>\n            <Route path=\"/\" exact component={Home} />\n            <Route path=\"/worksheets/:id/edit\" component={Form} />\n            <Route path=\"/worksheets/:id/practice\" component={Practice} />\n            <Route path=\"*\" component={NotFounded} />\n          </Switch>\n        </Router>\n      </div>\n    </ChakraProvider>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}